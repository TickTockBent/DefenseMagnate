var Zg=Object.defineProperty;var Wg=(f,i,l)=>i in f?Zg(f,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):f[i]=l;var De=(f,i,l)=>Wg(f,typeof i!="symbol"?i+"":i,l);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function l(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=l(o);fetch(o.href,u)}})();function Fg(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var Co={exports:{}},wi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um;function ey(){if(Um)return wi;Um=1;var f=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function l(r,o,u){var m=null;if(u!==void 0&&(m=""+u),o.key!==void 0&&(m=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:f,type:r,key:m,ref:o!==void 0?o:null,props:u}}return wi.Fragment=i,wi.jsx=l,wi.jsxs=l,wi}var wm;function ty(){return wm||(wm=1,Co.exports=ey()),Co.exports}var d=ty(),Ro={exports:{}},de={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm;function ay(){if(Hm)return de;Hm=1;var f=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),m=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),A=Symbol.iterator;function T(S){return S===null||typeof S!="object"?null:(S=A&&S[A]||S["@@iterator"],typeof S=="function"?S:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,H={};function B(S,w,V){this.props=S,this.context=w,this.refs=H,this.updater=V||N}B.prototype.isReactComponent={},B.prototype.setState=function(S,w){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,w,"setState")},B.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function P(){}P.prototype=B.prototype;function F(S,w,V){this.props=S,this.context=w,this.refs=H,this.updater=V||N}var oe=F.prototype=new P;oe.constructor=F,I(oe,B.prototype),oe.isPureReactComponent=!0;var se=Array.isArray,J={H:null,A:null,T:null,S:null,V:null},Ae=Object.prototype.hasOwnProperty;function Oe(S,w,V,Q,ae,Se){return V=Se.ref,{$$typeof:f,type:S,key:w,ref:V!==void 0?V:null,props:Se}}function Ge(S,w){return Oe(S.type,w,void 0,void 0,void 0,S.props)}function k(S){return typeof S=="object"&&S!==null&&S.$$typeof===f}function be(S){var w={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(V){return w[V]})}var Ue=/\/+/g;function ke(S,w){return typeof S=="object"&&S!==null&&S.key!=null?be(""+S.key):w.toString(36)}function ge(){}function te(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(ge,ge):(S.status="pending",S.then(function(w){S.status==="pending"&&(S.status="fulfilled",S.value=w)},function(w){S.status==="pending"&&(S.status="rejected",S.reason=w)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function ue(S,w,V,Q,ae){var Se=typeof S;(Se==="undefined"||Se==="boolean")&&(S=null);var ce=!1;if(S===null)ce=!0;else switch(Se){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(S.$$typeof){case f:case i:ce=!0;break;case v:return ce=S._init,ue(ce(S._payload),w,V,Q,ae)}}if(ce)return ae=ae(S),ce=Q===""?"."+ke(S,0):Q,se(ae)?(V="",ce!=null&&(V=ce.replace(Ue,"$&/")+"/"),ue(ae,w,V,"",function(oa){return oa})):ae!=null&&(k(ae)&&(ae=Ge(ae,V+(ae.key==null||S&&S.key===ae.key?"":(""+ae.key).replace(Ue,"$&/")+"/")+ce)),w.push(ae)),1;ce=0;var ht=Q===""?".":Q+":";if(se(S))for(var we=0;we<S.length;we++)Q=S[we],Se=ht+ke(Q,we),ce+=ue(Q,w,V,Se,ae);else if(we=T(S),typeof we=="function")for(S=we.call(S),we=0;!(Q=S.next()).done;)Q=Q.value,Se=ht+ke(Q,we++),ce+=ue(Q,w,V,Se,ae);else if(Se==="object"){if(typeof S.then=="function")return ue(te(S),w,V,Q,ae);throw w=String(S),Error("Objects are not valid as a React child (found: "+(w==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":w)+"). If you meant to render a collection of children, use an array instead.")}return ce}function O(S,w,V){if(S==null)return S;var Q=[],ae=0;return ue(S,Q,"","",function(Se){return w.call(V,Se,ae++)}),Q}function $(S){if(S._status===-1){var w=S._result;w=w(),w.then(function(V){(S._status===0||S._status===-1)&&(S._status=1,S._result=V)},function(V){(S._status===0||S._status===-1)&&(S._status=2,S._result=V)}),S._status===-1&&(S._status=0,S._result=w)}if(S._status===1)return S._result.default;throw S._result}var Y=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var w=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(w))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)};function X(){}return de.Children={map:O,forEach:function(S,w,V){O(S,function(){w.apply(this,arguments)},V)},count:function(S){var w=0;return O(S,function(){w++}),w},toArray:function(S){return O(S,function(w){return w})||[]},only:function(S){if(!k(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},de.Component=B,de.Fragment=l,de.Profiler=o,de.PureComponent=F,de.StrictMode=r,de.Suspense=y,de.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,de.__COMPILER_RUNTIME={__proto__:null,c:function(S){return J.H.useMemoCache(S)}},de.cache=function(S){return function(){return S.apply(null,arguments)}},de.cloneElement=function(S,w,V){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var Q=I({},S.props),ae=S.key,Se=void 0;if(w!=null)for(ce in w.ref!==void 0&&(Se=void 0),w.key!==void 0&&(ae=""+w.key),w)!Ae.call(w,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&w.ref===void 0||(Q[ce]=w[ce]);var ce=arguments.length-2;if(ce===1)Q.children=V;else if(1<ce){for(var ht=Array(ce),we=0;we<ce;we++)ht[we]=arguments[we+2];Q.children=ht}return Oe(S.type,ae,void 0,void 0,Se,Q)},de.createContext=function(S){return S={$$typeof:m,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:u,_context:S},S},de.createElement=function(S,w,V){var Q,ae={},Se=null;if(w!=null)for(Q in w.key!==void 0&&(Se=""+w.key),w)Ae.call(w,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(ae[Q]=w[Q]);var ce=arguments.length-2;if(ce===1)ae.children=V;else if(1<ce){for(var ht=Array(ce),we=0;we<ce;we++)ht[we]=arguments[we+2];ae.children=ht}if(S&&S.defaultProps)for(Q in ce=S.defaultProps,ce)ae[Q]===void 0&&(ae[Q]=ce[Q]);return Oe(S,Se,void 0,void 0,null,ae)},de.createRef=function(){return{current:null}},de.forwardRef=function(S){return{$$typeof:p,render:S}},de.isValidElement=k,de.lazy=function(S){return{$$typeof:v,_payload:{_status:-1,_result:S},_init:$}},de.memo=function(S,w){return{$$typeof:h,type:S,compare:w===void 0?null:w}},de.startTransition=function(S){var w=J.T,V={};J.T=V;try{var Q=S(),ae=J.S;ae!==null&&ae(V,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(X,Y)}catch(Se){Y(Se)}finally{J.T=w}},de.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},de.use=function(S){return J.H.use(S)},de.useActionState=function(S,w,V){return J.H.useActionState(S,w,V)},de.useCallback=function(S,w){return J.H.useCallback(S,w)},de.useContext=function(S){return J.H.useContext(S)},de.useDebugValue=function(){},de.useDeferredValue=function(S,w){return J.H.useDeferredValue(S,w)},de.useEffect=function(S,w,V){var Q=J.H;if(typeof V=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(S,w)},de.useId=function(){return J.H.useId()},de.useImperativeHandle=function(S,w,V){return J.H.useImperativeHandle(S,w,V)},de.useInsertionEffect=function(S,w){return J.H.useInsertionEffect(S,w)},de.useLayoutEffect=function(S,w){return J.H.useLayoutEffect(S,w)},de.useMemo=function(S,w){return J.H.useMemo(S,w)},de.useOptimistic=function(S,w){return J.H.useOptimistic(S,w)},de.useReducer=function(S,w,V){return J.H.useReducer(S,w,V)},de.useRef=function(S){return J.H.useRef(S)},de.useState=function(S){return J.H.useState(S)},de.useSyncExternalStore=function(S,w,V){return J.H.useSyncExternalStore(S,w,V)},de.useTransition=function(){return J.H.useTransition()},de.version="19.1.0",de}var km;function Qo(){return km||(km=1,Ro.exports=ay()),Ro.exports}var pe=Qo();const $m=Fg(pe);var qo={exports:{}},Hi={},Do={exports:{}},Oo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm;function ny(){return Bm||(Bm=1,function(f){function i(O,$){var Y=O.length;O.push($);e:for(;0<Y;){var X=Y-1>>>1,S=O[X];if(0<o(S,$))O[X]=$,O[Y]=S,Y=X;else break e}}function l(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var $=O[0],Y=O.pop();if(Y!==$){O[0]=Y;e:for(var X=0,S=O.length,w=S>>>1;X<w;){var V=2*(X+1)-1,Q=O[V],ae=V+1,Se=O[ae];if(0>o(Q,Y))ae<S&&0>o(Se,Q)?(O[X]=Se,O[ae]=Y,X=ae):(O[X]=Q,O[V]=Y,X=V);else if(ae<S&&0>o(Se,Y))O[X]=Se,O[ae]=Y,X=ae;else break e}}return $}function o(O,$){var Y=O.sortIndex-$.sortIndex;return Y!==0?Y:O.id-$.id}if(f.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;f.unstable_now=function(){return u.now()}}else{var m=Date,p=m.now();f.unstable_now=function(){return m.now()-p}}var y=[],h=[],v=1,A=null,T=3,N=!1,I=!1,H=!1,B=!1,P=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function se(O){for(var $=l(h);$!==null;){if($.callback===null)r(h);else if($.startTime<=O)r(h),$.sortIndex=$.expirationTime,i(y,$);else break;$=l(h)}}function J(O){if(H=!1,se(O),!I)if(l(y)!==null)I=!0,Ae||(Ae=!0,ke());else{var $=l(h);$!==null&&ue(J,$.startTime-O)}}var Ae=!1,Oe=-1,Ge=5,k=-1;function be(){return B?!0:!(f.unstable_now()-k<Ge)}function Ue(){if(B=!1,Ae){var O=f.unstable_now();k=O;var $=!0;try{e:{I=!1,H&&(H=!1,F(Oe),Oe=-1),N=!0;var Y=T;try{t:{for(se(O),A=l(y);A!==null&&!(A.expirationTime>O&&be());){var X=A.callback;if(typeof X=="function"){A.callback=null,T=A.priorityLevel;var S=X(A.expirationTime<=O);if(O=f.unstable_now(),typeof S=="function"){A.callback=S,se(O),$=!0;break t}A===l(y)&&r(y),se(O)}else r(y);A=l(y)}if(A!==null)$=!0;else{var w=l(h);w!==null&&ue(J,w.startTime-O),$=!1}}break e}finally{A=null,T=Y,N=!1}$=void 0}}finally{$?ke():Ae=!1}}}var ke;if(typeof oe=="function")ke=function(){oe(Ue)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,te=ge.port2;ge.port1.onmessage=Ue,ke=function(){te.postMessage(null)}}else ke=function(){P(Ue,0)};function ue(O,$){Oe=P(function(){O(f.unstable_now())},$)}f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(O){O.callback=null},f.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ge=0<O?Math.floor(1e3/O):5},f.unstable_getCurrentPriorityLevel=function(){return T},f.unstable_next=function(O){switch(T){case 1:case 2:case 3:var $=3;break;default:$=T}var Y=T;T=$;try{return O()}finally{T=Y}},f.unstable_requestPaint=function(){B=!0},f.unstable_runWithPriority=function(O,$){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Y=T;T=O;try{return $()}finally{T=Y}},f.unstable_scheduleCallback=function(O,$,Y){var X=f.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?X+Y:X):Y=X,O){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=Y+S,O={id:v++,callback:$,priorityLevel:O,startTime:Y,expirationTime:S,sortIndex:-1},Y>X?(O.sortIndex=Y,i(h,O),l(y)===null&&O===l(h)&&(H?(F(Oe),Oe=-1):H=!0,ue(J,Y-X))):(O.sortIndex=S,i(y,O),I||N||(I=!0,Ae||(Ae=!0,ke()))),O},f.unstable_shouldYield=be,f.unstable_wrapCallback=function(O){var $=T;return function(){var Y=T;T=$;try{return O.apply(this,arguments)}finally{T=Y}}}}(Oo)),Oo}var zm;function iy(){return zm||(zm=1,Do.exports=ny()),Do.exports}var Io={exports:{}},ot={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qm;function ly(){if(Qm)return ot;Qm=1;var f=Qo();function i(y){var h="https://react.dev/errors/"+y;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var r={d:{f:l,r:function(){throw Error(i(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,h,v){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:y,containerInfo:h,implementation:v}}var m=f.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,h){if(y==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return ot.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ot.createPortal=function(y,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(i(299));return u(y,h,null,v)},ot.flushSync=function(y){var h=m.T,v=r.p;try{if(m.T=null,r.p=2,y)return y()}finally{m.T=h,r.p=v,r.d.f()}},ot.preconnect=function(y,h){typeof y=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(y,h))},ot.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},ot.preinit=function(y,h){if(typeof y=="string"&&h&&typeof h.as=="string"){var v=h.as,A=p(v,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,N=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?r.d.S(y,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:A,integrity:T,fetchPriority:N}):v==="script"&&r.d.X(y,{crossOrigin:A,integrity:T,fetchPriority:N,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},ot.preinitModule=function(y,h){if(typeof y=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=p(h.as,h.crossOrigin);r.d.M(y,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(y)},ot.preload=function(y,h){if(typeof y=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,A=p(v,h.crossOrigin);r.d.L(y,v,{crossOrigin:A,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},ot.preloadModule=function(y,h){if(typeof y=="string")if(h){var v=p(h.as,h.crossOrigin);r.d.m(y,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(y)},ot.requestFormReset=function(y){r.d.r(y)},ot.unstable_batchedUpdates=function(y,h){return y(h)},ot.useFormState=function(y,h,v){return m.H.useFormState(y,h,v)},ot.useFormStatus=function(){return m.H.useHostTransitionStatus()},ot.version="19.1.0",ot}var Ym;function sy(){if(Ym)return Io.exports;Ym=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(i){console.error(i)}}return f(),Io.exports=ly(),Io.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm;function ry(){if(Vm)return Hi;Vm=1;var f=iy(),i=Qo(),l=sy();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(r(188))}function y(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(r(188));return t!==e?null:e}for(var a=e,n=t;;){var s=a.return;if(s===null)break;var c=s.alternate;if(c===null){if(n=s.return,n!==null){a=n;continue}break}if(s.child===c.child){for(c=s.child;c;){if(c===a)return p(s),e;if(c===n)return p(s),t;c=c.sibling}throw Error(r(188))}if(a.return!==n.return)a=s,n=c;else{for(var g=!1,b=s.child;b;){if(b===a){g=!0,a=s,n=c;break}if(b===n){g=!0,n=s,a=c;break}b=b.sibling}if(!g){for(b=c.child;b;){if(b===a){g=!0,a=c,n=s;break}if(b===n){g=!0,n=c,a=s;break}b=b.sibling}if(!g)throw Error(r(189))}}if(a.alternate!==n)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:t}function h(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=h(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,A=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),Oe=Symbol.for("react.memo"),Ge=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),be=Symbol.for("react.memo_cache_sentinel"),Ue=Symbol.iterator;function ke(e){return e===null||typeof e!="object"?null:(e=Ue&&e[Ue]||e["@@iterator"],typeof e=="function"?e:null)}var ge=Symbol.for("react.client.reference");function te(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ge?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case I:return"Fragment";case B:return"Profiler";case H:return"StrictMode";case J:return"Suspense";case Ae:return"SuspenseList";case k:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case oe:return(e.displayName||"Context")+".Provider";case F:return(e._context.displayName||"Context")+".Consumer";case se:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Oe:return t=e.displayName||null,t!==null?t:te(e.type)||"Memo";case Ge:t=e._payload,e=e._init;try{return te(e(t))}catch{}}return null}var ue=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},X=[],S=-1;function w(e){return{current:e}}function V(e){0>S||(e.current=X[S],X[S]=null,S--)}function Q(e,t){S++,X[S]=e.current,e.current=t}var ae=w(null),Se=w(null),ce=w(null),ht=w(null);function we(e,t){switch(Q(ce,t),Q(Se,e),Q(ae,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?dm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=dm(t),e=mm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(ae),Q(ae,e)}function oa(){V(ae),V(Se),V(ce)}function ms(e){e.memoizedState!==null&&Q(ht,e);var t=ae.current,a=mm(t,e.type);t!==a&&(Q(Se,e),Q(ae,a))}function zi(e){Se.current===e&&(V(ae),V(Se)),ht.current===e&&(V(ht),Ii._currentValue=Y)}var fs=Object.prototype.hasOwnProperty,ps=f.unstable_scheduleCallback,gs=f.unstable_cancelCallback,Rf=f.unstable_shouldYield,qf=f.unstable_requestPaint,kt=f.unstable_now,Df=f.unstable_getCurrentPriorityLevel,Yo=f.unstable_ImmediatePriority,Vo=f.unstable_UserBlockingPriority,Qi=f.unstable_NormalPriority,Of=f.unstable_LowPriority,Jo=f.unstable_IdlePriority,If=f.log,jf=f.unstable_setDisableYieldValue,$n=null,bt=null;function ca(e){if(typeof If=="function"&&jf(e),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode($n,e)}catch{}}var vt=Math.clz32?Math.clz32:Uf,Lf=Math.log,Gf=Math.LN2;function Uf(e){return e>>>=0,e===0?32:31-(Lf(e)/Gf|0)|0}var Yi=256,Vi=4194304;function Ia(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ji(e,t,a){var n=e.pendingLanes;if(n===0)return 0;var s=0,c=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var b=n&134217727;return b!==0?(n=b&~c,n!==0?s=Ia(n):(g&=b,g!==0?s=Ia(g):a||(a=b&~e,a!==0&&(s=Ia(a))))):(b=n&~c,b!==0?s=Ia(b):g!==0?s=Ia(g):a||(a=n&~e,a!==0&&(s=Ia(a)))),s===0?0:t!==0&&t!==s&&(t&c)===0&&(c=s&-s,a=t&-t,c>=a||c===32&&(a&4194048)!==0)?t:s}function Bn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function wf(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Po(){var e=Yi;return Yi<<=1,(Yi&4194048)===0&&(Yi=256),e}function Xo(){var e=Vi;return Vi<<=1,(Vi&62914560)===0&&(Vi=4194304),e}function ys(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function zn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Hf(e,t,a,n,s,c){var g=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var b=e.entanglements,x=e.expirationTimes,R=e.hiddenUpdates;for(a=g&~a;0<a;){var L=31-vt(a),U=1<<L;b[L]=0,x[L]=-1;var q=R[L];if(q!==null)for(R[L]=null,L=0;L<q.length;L++){var D=q[L];D!==null&&(D.lane&=-536870913)}a&=~U}n!==0&&Ko(e,n,0),c!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=c&~(g&~t))}function Ko(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-vt(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&4194090}function Zo(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-vt(a),s=1<<n;s&t|e[n]&t&&(e[n]|=t),a&=~s}}function hs(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function bs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Wo(){var e=$.p;return e!==0?e:(e=window.event,e===void 0?32:Dm(e.type))}function kf(e,t){var a=$.p;try{return $.p=e,t()}finally{$.p=a}}var ua=Math.random().toString(36).slice(2),st="__reactFiber$"+ua,dt="__reactProps$"+ua,Wa="__reactContainer$"+ua,vs="__reactEvents$"+ua,$f="__reactListeners$"+ua,Bf="__reactHandles$"+ua,Fo="__reactResources$"+ua,Qn="__reactMarker$"+ua;function xs(e){delete e[st],delete e[dt],delete e[vs],delete e[$f],delete e[Bf]}function Fa(e){var t=e[st];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Wa]||a[st]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=ym(e);e!==null;){if(a=e[st])return a;e=ym(e)}return t}e=a,a=e.parentNode}return null}function en(e){if(e=e[st]||e[Wa]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Yn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(r(33))}function tn(e){var t=e[Fo];return t||(t=e[Fo]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[Qn]=!0}var ec=new Set,tc={};function ja(e,t){an(e,t),an(e+"Capture",t)}function an(e,t){for(tc[e]=t,e=0;e<t.length;e++)ec.add(t[e])}var zf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ac={},nc={};function Qf(e){return fs.call(nc,e)?!0:fs.call(ac,e)?!1:zf.test(e)?nc[e]=!0:(ac[e]=!0,!1)}function Pi(e,t,a){if(Qf(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Xi(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Jt(e,t,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+n)}}var As,ic;function nn(e){if(As===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);As=t&&t[1]||"",ic=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+As+e+ic}var Ss=!1;function Ms(e,t){if(!e||Ss)return"";Ss=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var U=function(){throw Error()};if(Object.defineProperty(U.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(U,[])}catch(D){var q=D}Reflect.construct(e,[],U)}else{try{U.call()}catch(D){q=D}e.call(U.prototype)}}else{try{throw Error()}catch(D){q=D}(U=e())&&typeof U.catch=="function"&&U.catch(function(){})}}catch(D){if(D&&q&&typeof D.stack=="string")return[D.stack,q.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=n.DetermineComponentFrameRoot(),g=c[0],b=c[1];if(g&&b){var x=g.split(`
`),R=b.split(`
`);for(s=n=0;n<x.length&&!x[n].includes("DetermineComponentFrameRoot");)n++;for(;s<R.length&&!R[s].includes("DetermineComponentFrameRoot");)s++;if(n===x.length||s===R.length)for(n=x.length-1,s=R.length-1;1<=n&&0<=s&&x[n]!==R[s];)s--;for(;1<=n&&0<=s;n--,s--)if(x[n]!==R[s]){if(n!==1||s!==1)do if(n--,s--,0>s||x[n]!==R[s]){var L=`
`+x[n].replace(" at new "," at ");return e.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",e.displayName)),L}while(1<=n&&0<=s);break}}}finally{Ss=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?nn(a):""}function Yf(e){switch(e.tag){case 26:case 27:case 5:return nn(e.type);case 16:return nn("Lazy");case 13:return nn("Suspense");case 19:return nn("SuspenseList");case 0:case 15:return Ms(e.type,!1);case 11:return Ms(e.type.render,!1);case 1:return Ms(e.type,!0);case 31:return nn("Activity");default:return""}}function lc(e){try{var t="";do t+=Yf(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vf(e){var t=sc(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var s=a.get,c=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(g){n=""+g,c.call(this,g)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(g){n=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ki(e){e._valueTracker||(e._valueTracker=Vf(e))}function rc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=sc(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function Zi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Jf=/[\n"\\]/g;function Rt(e){return e.replace(Jf,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Es(e,t,a,n,s,c,g,b){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ct(t)):e.value!==""+Ct(t)&&(e.value=""+Ct(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Ts(e,g,Ct(t)):a!=null?Ts(e,g,Ct(a)):n!=null&&e.removeAttribute("value"),s==null&&c!=null&&(e.defaultChecked=!!c),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+Ct(b):e.removeAttribute("name")}function oc(e,t,a,n,s,c,g,b){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),t!=null||a!=null){if(!(c!=="submit"&&c!=="reset"||t!=null))return;a=a!=null?""+Ct(a):"",t=t!=null?""+Ct(t):a,b||t===e.value||(e.value=t),e.defaultValue=t}n=n??s,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=b?e.checked:!!n,e.defaultChecked=!!n,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g)}function Ts(e,t,a){t==="number"&&Zi(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ln(e,t,a,n){if(e=e.options,t){t={};for(var s=0;s<a.length;s++)t["$"+a[s]]=!0;for(a=0;a<e.length;a++)s=t.hasOwnProperty("$"+e[a].value),e[a].selected!==s&&(e[a].selected=s),s&&n&&(e[a].defaultSelected=!0)}else{for(a=""+Ct(a),t=null,s=0;s<e.length;s++){if(e[s].value===a){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function cc(e,t,a){if(t!=null&&(t=""+Ct(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Ct(a):""}function uc(e,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(r(92));if(ue(n)){if(1<n.length)throw Error(r(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=Ct(t),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n)}function sn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Pf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dc(e,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,a):typeof a!="number"||a===0||Pf.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function mc(e,t,a){if(t!=null&&typeof t!="object")throw Error(r(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var s in t)n=t[s],t.hasOwnProperty(s)&&a[s]!==n&&dc(e,s,n)}else for(var c in t)t.hasOwnProperty(c)&&dc(e,c,t[c])}function _s(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wi(e){return Kf.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ns=null;function Cs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rn=null,on=null;function fc(e){var t=en(e);if(t&&(e=t.stateNode)){var a=e[dt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Es(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Rt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var s=n[dt]||null;if(!s)throw Error(r(90));Es(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===e.form&&rc(n)}break e;case"textarea":cc(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&ln(e,!!a.multiple,t,!1)}}}var Rs=!1;function pc(e,t,a){if(Rs)return e(t,a);Rs=!0;try{var n=e(t);return n}finally{if(Rs=!1,(rn!==null||on!==null)&&(Ul(),rn&&(t=rn,e=on,on=rn=null,fc(t),e)))for(t=0;t<e.length;t++)fc(e[t])}}function Vn(e,t){var a=e.stateNode;if(a===null)return null;var n=a[dt]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,t,typeof a));return a}var Pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qs=!1;if(Pt)try{var Jn={};Object.defineProperty(Jn,"passive",{get:function(){qs=!0}}),window.addEventListener("test",Jn,Jn),window.removeEventListener("test",Jn,Jn)}catch{qs=!1}var da=null,Ds=null,Fi=null;function gc(){if(Fi)return Fi;var e,t=Ds,a=t.length,n,s="value"in da?da.value:da.textContent,c=s.length;for(e=0;e<a&&t[e]===s[e];e++);var g=a-e;for(n=1;n<=g&&t[a-n]===s[c-n];n++);return Fi=s.slice(e,1<n?1-n:void 0)}function el(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tl(){return!0}function yc(){return!1}function mt(e){function t(a,n,s,c,g){this._reactName=a,this._targetInst=s,this.type=n,this.nativeEvent=c,this.target=g,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(a=e[b],this[b]=a?a(c):c[b]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?tl:yc,this.isPropagationStopped=yc,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=tl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=tl)},persist:function(){},isPersistent:tl}),t}var La={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},al=mt(La),Pn=v({},La,{view:0,detail:0}),Zf=mt(Pn),Os,Is,Xn,nl=v({},Pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ls,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xn&&(Xn&&e.type==="mousemove"?(Os=e.screenX-Xn.screenX,Is=e.screenY-Xn.screenY):Is=Os=0,Xn=e),Os)},movementY:function(e){return"movementY"in e?e.movementY:Is}}),hc=mt(nl),Wf=v({},nl,{dataTransfer:0}),Ff=mt(Wf),ep=v({},Pn,{relatedTarget:0}),js=mt(ep),tp=v({},La,{animationName:0,elapsedTime:0,pseudoElement:0}),ap=mt(tp),np=v({},La,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ip=mt(np),lp=v({},La,{data:0}),bc=mt(lp),sp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},op={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=op[e])?!!t[e]:!1}function Ls(){return cp}var up=v({},Pn,{key:function(e){if(e.key){var t=sp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=el(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ls,charCode:function(e){return e.type==="keypress"?el(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?el(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dp=mt(up),mp=v({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vc=mt(mp),fp=v({},Pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ls}),pp=mt(fp),gp=v({},La,{propertyName:0,elapsedTime:0,pseudoElement:0}),yp=mt(gp),hp=v({},nl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bp=mt(hp),vp=v({},La,{newState:0,oldState:0}),xp=mt(vp),Ap=[9,13,27,32],Gs=Pt&&"CompositionEvent"in window,Kn=null;Pt&&"documentMode"in document&&(Kn=document.documentMode);var Sp=Pt&&"TextEvent"in window&&!Kn,xc=Pt&&(!Gs||Kn&&8<Kn&&11>=Kn),Ac=" ",Sc=!1;function Mc(e,t){switch(e){case"keyup":return Ap.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ec(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cn=!1;function Mp(e,t){switch(e){case"compositionend":return Ec(t);case"keypress":return t.which!==32?null:(Sc=!0,Ac);case"textInput":return e=t.data,e===Ac&&Sc?null:e;default:return null}}function Ep(e,t){if(cn)return e==="compositionend"||!Gs&&Mc(e,t)?(e=gc(),Fi=Ds=da=null,cn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xc&&t.locale!=="ko"?null:t.data;default:return null}}var Tp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Tp[e.type]:t==="textarea"}function _c(e,t,a,n){rn?on?on.push(n):on=[n]:rn=n,t=zl(t,"onChange"),0<t.length&&(a=new al("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var Zn=null,Wn=null;function _p(e){sm(e,0)}function il(e){var t=Yn(e);if(rc(t))return e}function Nc(e,t){if(e==="change")return t}var Cc=!1;if(Pt){var Us;if(Pt){var ws="oninput"in document;if(!ws){var Rc=document.createElement("div");Rc.setAttribute("oninput","return;"),ws=typeof Rc.oninput=="function"}Us=ws}else Us=!1;Cc=Us&&(!document.documentMode||9<document.documentMode)}function qc(){Zn&&(Zn.detachEvent("onpropertychange",Dc),Wn=Zn=null)}function Dc(e){if(e.propertyName==="value"&&il(Wn)){var t=[];_c(t,Wn,e,Cs(e)),pc(_p,t)}}function Np(e,t,a){e==="focusin"?(qc(),Zn=t,Wn=a,Zn.attachEvent("onpropertychange",Dc)):e==="focusout"&&qc()}function Cp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return il(Wn)}function Rp(e,t){if(e==="click")return il(t)}function qp(e,t){if(e==="input"||e==="change")return il(t)}function Dp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xt=typeof Object.is=="function"?Object.is:Dp;function Fn(e,t){if(xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var s=a[n];if(!fs.call(t,s)||!xt(e[s],t[s]))return!1}return!0}function Oc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ic(e,t){var a=Oc(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Oc(a)}}function jc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?jc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Lc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Zi(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Zi(e.document)}return t}function Hs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Op=Pt&&"documentMode"in document&&11>=document.documentMode,un=null,ks=null,ei=null,$s=!1;function Gc(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;$s||un==null||un!==Zi(n)||(n=un,"selectionStart"in n&&Hs(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ei&&Fn(ei,n)||(ei=n,n=zl(ks,"onSelect"),0<n.length&&(t=new al("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=un)))}function Ga(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var dn={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionrun:Ga("Transition","TransitionRun"),transitionstart:Ga("Transition","TransitionStart"),transitioncancel:Ga("Transition","TransitionCancel"),transitionend:Ga("Transition","TransitionEnd")},Bs={},Uc={};Pt&&(Uc=document.createElement("div").style,"AnimationEvent"in window||(delete dn.animationend.animation,delete dn.animationiteration.animation,delete dn.animationstart.animation),"TransitionEvent"in window||delete dn.transitionend.transition);function Ua(e){if(Bs[e])return Bs[e];if(!dn[e])return e;var t=dn[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Uc)return Bs[e]=t[a];return e}var wc=Ua("animationend"),Hc=Ua("animationiteration"),kc=Ua("animationstart"),Ip=Ua("transitionrun"),jp=Ua("transitionstart"),Lp=Ua("transitioncancel"),$c=Ua("transitionend"),Bc=new Map,zs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zs.push("scrollEnd");function Ut(e,t){Bc.set(e,t),ja(t,[e])}var zc=new WeakMap;function qt(e,t){if(typeof e=="object"&&e!==null){var a=zc.get(e);return a!==void 0?a:(t={value:e,source:t,stack:lc(t)},zc.set(e,t),t)}return{value:e,source:t,stack:lc(t)}}var Dt=[],mn=0,Qs=0;function ll(){for(var e=mn,t=Qs=mn=0;t<e;){var a=Dt[t];Dt[t++]=null;var n=Dt[t];Dt[t++]=null;var s=Dt[t];Dt[t++]=null;var c=Dt[t];if(Dt[t++]=null,n!==null&&s!==null){var g=n.pending;g===null?s.next=s:(s.next=g.next,g.next=s),n.pending=s}c!==0&&Qc(a,s,c)}}function sl(e,t,a,n){Dt[mn++]=e,Dt[mn++]=t,Dt[mn++]=a,Dt[mn++]=n,Qs|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Ys(e,t,a,n){return sl(e,t,a,n),rl(e)}function fn(e,t){return sl(e,null,null,t),rl(e)}function Qc(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var s=!1,c=e.return;c!==null;)c.childLanes|=a,n=c.alternate,n!==null&&(n.childLanes|=a),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(s=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,s&&t!==null&&(s=31-vt(a),e=c.hiddenUpdates,n=e[s],n===null?e[s]=[t]:n.push(t),t.lane=a|536870912),c):null}function rl(e){if(50<Ti)throw Ti=0,Zr=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var pn={};function Gp(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(e,t,a,n){return new Gp(e,t,a,n)}function Vs(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Xt(e,t){var a=e.alternate;return a===null?(a=At(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Yc(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ol(e,t,a,n,s,c){var g=0;if(n=e,typeof e=="function")Vs(e)&&(g=1);else if(typeof e=="string")g=wg(e,a,ae.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case k:return e=At(31,a,t,s),e.elementType=k,e.lanes=c,e;case I:return wa(a.children,s,c,t);case H:g=8,s|=24;break;case B:return e=At(12,a,t,s|2),e.elementType=B,e.lanes=c,e;case J:return e=At(13,a,t,s),e.elementType=J,e.lanes=c,e;case Ae:return e=At(19,a,t,s),e.elementType=Ae,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case P:case oe:g=10;break e;case F:g=9;break e;case se:g=11;break e;case Oe:g=14;break e;case Ge:g=16,n=null;break e}g=29,a=Error(r(130,e===null?"null":typeof e,"")),n=null}return t=At(g,a,t,s),t.elementType=e,t.type=n,t.lanes=c,t}function wa(e,t,a,n){return e=At(7,e,n,t),e.lanes=a,e}function Js(e,t,a){return e=At(6,e,null,t),e.lanes=a,e}function Ps(e,t,a){return t=At(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var gn=[],yn=0,cl=null,ul=0,Ot=[],It=0,Ha=null,Kt=1,Zt="";function ka(e,t){gn[yn++]=ul,gn[yn++]=cl,cl=e,ul=t}function Vc(e,t,a){Ot[It++]=Kt,Ot[It++]=Zt,Ot[It++]=Ha,Ha=e;var n=Kt;e=Zt;var s=32-vt(n)-1;n&=~(1<<s),a+=1;var c=32-vt(t)+s;if(30<c){var g=s-s%5;c=(n&(1<<g)-1).toString(32),n>>=g,s-=g,Kt=1<<32-vt(t)+s|a<<s|n,Zt=c+e}else Kt=1<<c|a<<s|n,Zt=e}function Xs(e){e.return!==null&&(ka(e,1),Vc(e,1,0))}function Ks(e){for(;e===cl;)cl=gn[--yn],gn[yn]=null,ul=gn[--yn],gn[yn]=null;for(;e===Ha;)Ha=Ot[--It],Ot[It]=null,Zt=Ot[--It],Ot[It]=null,Kt=Ot[--It],Ot[It]=null}var ut=null,Be=null,Te=!1,$a=null,$t=!1,Zs=Error(r(519));function Ba(e){var t=Error(r(418,""));throw ni(qt(t,e)),Zs}function Jc(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[st]=e,t[dt]=n,a){case"dialog":he("cancel",t),he("close",t);break;case"iframe":case"object":case"embed":he("load",t);break;case"video":case"audio":for(a=0;a<Ni.length;a++)he(Ni[a],t);break;case"source":he("error",t);break;case"img":case"image":case"link":he("error",t),he("load",t);break;case"details":he("toggle",t);break;case"input":he("invalid",t),oc(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),Ki(t);break;case"select":he("invalid",t);break;case"textarea":he("invalid",t),uc(t,n.value,n.defaultValue,n.children),Ki(t)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||um(t.textContent,a)?(n.popover!=null&&(he("beforetoggle",t),he("toggle",t)),n.onScroll!=null&&he("scroll",t),n.onScrollEnd!=null&&he("scrollend",t),n.onClick!=null&&(t.onclick=Ql),t=!0):t=!1,t||Ba(e)}function Pc(e){for(ut=e.return;ut;)switch(ut.tag){case 5:case 13:$t=!1;return;case 27:case 3:$t=!0;return;default:ut=ut.return}}function ti(e){if(e!==ut)return!1;if(!Te)return Pc(e),Te=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||po(e.type,e.memoizedProps)),a=!a),a&&Be&&Ba(e),Pc(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){Be=Ht(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}Be=null}}else t===27?(t=Be,Na(e.type)?(e=bo,bo=null,Be=e):Be=t):Be=ut?Ht(e.stateNode.nextSibling):null;return!0}function ai(){Be=ut=null,Te=!1}function Xc(){var e=$a;return e!==null&&(gt===null?gt=e:gt.push.apply(gt,e),$a=null),e}function ni(e){$a===null?$a=[e]:$a.push(e)}var Ws=w(null),za=null,Wt=null;function ma(e,t,a){Q(Ws,t._currentValue),t._currentValue=a}function Ft(e){e._currentValue=Ws.current,V(Ws)}function Fs(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function er(e,t,a,n){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){var g=s.child;c=c.firstContext;e:for(;c!==null;){var b=c;c=s;for(var x=0;x<t.length;x++)if(b.context===t[x]){c.lanes|=a,b=c.alternate,b!==null&&(b.lanes|=a),Fs(c.return,a,e),n||(g=null);break e}c=b.next}}else if(s.tag===18){if(g=s.return,g===null)throw Error(r(341));g.lanes|=a,c=g.alternate,c!==null&&(c.lanes|=a),Fs(g,a,e),g=null}else g=s.child;if(g!==null)g.return=s;else for(g=s;g!==null;){if(g===e){g=null;break}if(s=g.sibling,s!==null){s.return=g.return,g=s;break}g=g.return}s=g}}function ii(e,t,a,n){e=null;for(var s=t,c=!1;s!==null;){if(!c){if((s.flags&524288)!==0)c=!0;else if((s.flags&262144)!==0)break}if(s.tag===10){var g=s.alternate;if(g===null)throw Error(r(387));if(g=g.memoizedProps,g!==null){var b=s.type;xt(s.pendingProps.value,g.value)||(e!==null?e.push(b):e=[b])}}else if(s===ht.current){if(g=s.alternate,g===null)throw Error(r(387));g.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(Ii):e=[Ii])}s=s.return}e!==null&&er(t,e,a,n),t.flags|=262144}function dl(e){for(e=e.firstContext;e!==null;){if(!xt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Qa(e){za=e,Wt=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function rt(e){return Kc(za,e)}function ml(e,t){return za===null&&Qa(e),Kc(e,t)}function Kc(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Wt===null){if(e===null)throw Error(r(308));Wt=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Wt=Wt.next=t;return a}var Up=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},wp=f.unstable_scheduleCallback,Hp=f.unstable_NormalPriority,Pe={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tr(){return{controller:new Up,data:new Map,refCount:0}}function li(e){e.refCount--,e.refCount===0&&wp(Hp,function(){e.controller.abort()})}var si=null,ar=0,hn=0,bn=null;function kp(e,t){if(si===null){var a=si=[];ar=0,hn=io(),bn={status:"pending",value:void 0,then:function(n){a.push(n)}}}return ar++,t.then(Zc,Zc),t}function Zc(){if(--ar===0&&si!==null){bn!==null&&(bn.status="fulfilled");var e=si;si=null,hn=0,bn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function $p(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(s){a.push(s)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var s=0;s<a.length;s++)(0,a[s])(t)},function(s){for(n.status="rejected",n.reason=s,s=0;s<a.length;s++)(0,a[s])(void 0)}),n}var Wc=O.S;O.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&kp(e,t),Wc!==null&&Wc(e,t)};var Ya=w(null);function nr(){var e=Ya.current;return e!==null?e:Le.pooledCache}function fl(e,t){t===null?Q(Ya,Ya.current):Q(Ya,t.pool)}function Fc(){var e=nr();return e===null?null:{parent:Pe._currentValue,pool:e}}var ri=Error(r(460)),eu=Error(r(474)),pl=Error(r(542)),ir={then:function(){}};function tu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function gl(){}function au(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(gl,gl),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,iu(e),e;default:if(typeof t.status=="string")t.then(gl,gl);else{if(e=Le,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=n}},function(n){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,iu(e),e}throw oi=t,ri}}var oi=null;function nu(){if(oi===null)throw Error(r(459));var e=oi;return oi=null,e}function iu(e){if(e===ri||e===pl)throw Error(r(483))}var fa=!1;function lr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function pa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ga(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(_e&2)!==0){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,t=rl(e),Qc(e,null,a),t}return sl(e,n,t,a),rl(e)}function ci(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,Zo(e,a)}}function rr(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var s=null,c=null;if(a=a.firstBaseUpdate,a!==null){do{var g={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};c===null?s=c=g:c=c.next=g,a=a.next}while(a!==null);c===null?s=c=t:c=c.next=t}else s=c=t;a={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:c,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var or=!1;function ui(){if(or){var e=bn;if(e!==null)throw e}}function di(e,t,a,n){or=!1;var s=e.updateQueue;fa=!1;var c=s.firstBaseUpdate,g=s.lastBaseUpdate,b=s.shared.pending;if(b!==null){s.shared.pending=null;var x=b,R=x.next;x.next=null,g===null?c=R:g.next=R,g=x;var L=e.alternate;L!==null&&(L=L.updateQueue,b=L.lastBaseUpdate,b!==g&&(b===null?L.firstBaseUpdate=R:b.next=R,L.lastBaseUpdate=x))}if(c!==null){var U=s.baseState;g=0,L=R=x=null,b=c;do{var q=b.lane&-536870913,D=q!==b.lane;if(D?(ve&q)===q:(n&q)===q){q!==0&&q===hn&&(or=!0),L!==null&&(L=L.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var re=e,ne=b;q=t;var qe=a;switch(ne.tag){case 1:if(re=ne.payload,typeof re=="function"){U=re.call(qe,U,q);break e}U=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=ne.payload,q=typeof re=="function"?re.call(qe,U,q):re,q==null)break e;U=v({},U,q);break e;case 2:fa=!0}}q=b.callback,q!==null&&(e.flags|=64,D&&(e.flags|=8192),D=s.callbacks,D===null?s.callbacks=[q]:D.push(q))}else D={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},L===null?(R=L=D,x=U):L=L.next=D,g|=q;if(b=b.next,b===null){if(b=s.shared.pending,b===null)break;D=b,b=D.next,D.next=null,s.lastBaseUpdate=D,s.shared.pending=null}}while(!0);L===null&&(x=U),s.baseState=x,s.firstBaseUpdate=R,s.lastBaseUpdate=L,c===null&&(s.shared.lanes=0),Ma|=g,e.lanes=g,e.memoizedState=U}}function lu(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function su(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)lu(a[e],t)}var vn=w(null),yl=w(0);function ru(e,t){e=sa,Q(yl,e),Q(vn,t),sa=e|t.baseLanes}function cr(){Q(yl,sa),Q(vn,vn.current)}function ur(){sa=yl.current,V(vn),V(yl)}var ya=0,me=null,Ce=null,Ve=null,hl=!1,xn=!1,Va=!1,bl=0,mi=0,An=null,Bp=0;function Qe(){throw Error(r(321))}function dr(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!xt(e[a],t[a]))return!1;return!0}function mr(e,t,a,n,s,c){return ya=c,me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=e===null||e.memoizedState===null?Qu:Yu,Va=!1,c=a(n,s),Va=!1,xn&&(c=cu(t,a,n,s)),ou(e),c}function ou(e){O.H=El;var t=Ce!==null&&Ce.next!==null;if(ya=0,Ve=Ce=me=null,hl=!1,mi=0,An=null,t)throw Error(r(300));e===null||Ze||(e=e.dependencies,e!==null&&dl(e)&&(Ze=!0))}function cu(e,t,a,n){me=e;var s=0;do{if(xn&&(An=null),mi=0,xn=!1,25<=s)throw Error(r(301));if(s+=1,Ve=Ce=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}O.H=Xp,c=t(a,n)}while(xn);return c}function zp(){var e=O.H,t=e.useState()[0];return t=typeof t.then=="function"?fi(t):t,e=e.useState()[0],(Ce!==null?Ce.memoizedState:null)!==e&&(me.flags|=1024),t}function fr(){var e=bl!==0;return bl=0,e}function pr(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function gr(e){if(hl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}hl=!1}ya=0,Ve=Ce=me=null,xn=!1,mi=bl=0,An=null}function ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?me.memoizedState=Ve=e:Ve=Ve.next=e,Ve}function Je(){if(Ce===null){var e=me.alternate;e=e!==null?e.memoizedState:null}else e=Ce.next;var t=Ve===null?me.memoizedState:Ve.next;if(t!==null)Ve=t,Ce=e;else{if(e===null)throw me.alternate===null?Error(r(467)):Error(r(310));Ce=e,e={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},Ve===null?me.memoizedState=Ve=e:Ve=Ve.next=e}return Ve}function yr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fi(e){var t=mi;return mi+=1,An===null&&(An=[]),e=au(An,e,t),t=me,(Ve===null?t.memoizedState:Ve.next)===null&&(t=t.alternate,O.H=t===null||t.memoizedState===null?Qu:Yu),e}function vl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return fi(e);if(e.$$typeof===oe)return rt(e)}throw Error(r(438,String(e)))}function hr(e){var t=null,a=me.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=me.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=yr(),me.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=be;return t.index++,a}function ea(e,t){return typeof t=="function"?t(e):t}function xl(e){var t=Je();return br(t,Ce,e)}function br(e,t,a){var n=e.queue;if(n===null)throw Error(r(311));n.lastRenderedReducer=a;var s=e.baseQueue,c=n.pending;if(c!==null){if(s!==null){var g=s.next;s.next=c.next,c.next=g}t.baseQueue=s=c,n.pending=null}if(c=e.baseState,s===null)e.memoizedState=c;else{t=s.next;var b=g=null,x=null,R=t,L=!1;do{var U=R.lane&-536870913;if(U!==R.lane?(ve&U)===U:(ya&U)===U){var q=R.revertLane;if(q===0)x!==null&&(x=x.next={lane:0,revertLane:0,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),U===hn&&(L=!0);else if((ya&q)===q){R=R.next,q===hn&&(L=!0);continue}else U={lane:0,revertLane:R.revertLane,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},x===null?(b=x=U,g=c):x=x.next=U,me.lanes|=q,Ma|=q;U=R.action,Va&&a(c,U),c=R.hasEagerState?R.eagerState:a(c,U)}else q={lane:U,revertLane:R.revertLane,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},x===null?(b=x=q,g=c):x=x.next=q,me.lanes|=U,Ma|=U;R=R.next}while(R!==null&&R!==t);if(x===null?g=c:x.next=b,!xt(c,e.memoizedState)&&(Ze=!0,L&&(a=bn,a!==null)))throw a;e.memoizedState=c,e.baseState=g,e.baseQueue=x,n.lastRenderedState=c}return s===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function vr(e){var t=Je(),a=t.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var n=a.dispatch,s=a.pending,c=t.memoizedState;if(s!==null){a.pending=null;var g=s=s.next;do c=e(c,g.action),g=g.next;while(g!==s);xt(c,t.memoizedState)||(Ze=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),a.lastRenderedState=c}return[c,n]}function uu(e,t,a){var n=me,s=Je(),c=Te;if(c){if(a===void 0)throw Error(r(407));a=a()}else a=t();var g=!xt((Ce||s).memoizedState,a);g&&(s.memoizedState=a,Ze=!0),s=s.queue;var b=fu.bind(null,n,s,e);if(pi(2048,8,b,[e]),s.getSnapshot!==t||g||Ve!==null&&Ve.memoizedState.tag&1){if(n.flags|=2048,Sn(9,Al(),mu.bind(null,n,s,a,t),null),Le===null)throw Error(r(349));c||(ya&124)!==0||du(n,t,a)}return a}function du(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=me.updateQueue,t===null?(t=yr(),me.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function mu(e,t,a,n){t.value=a,t.getSnapshot=n,pu(t)&&gu(e)}function fu(e,t,a){return a(function(){pu(t)&&gu(e)})}function pu(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!xt(e,a)}catch{return!0}}function gu(e){var t=fn(e,2);t!==null&&_t(t,e,2)}function xr(e){var t=ft();if(typeof e=="function"){var a=e;if(e=a(),Va){ca(!0);try{a()}finally{ca(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:e},t}function yu(e,t,a,n){return e.baseState=a,br(e,Ce,typeof n=="function"?n:ea)}function Qp(e,t,a,n,s){if(Ml(e))throw Error(r(485));if(e=t.action,e!==null){var c={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){c.listeners.push(g)}};O.T!==null?a(!0):c.isTransition=!1,n(c),a=t.pending,a===null?(c.next=t.pending=c,hu(t,c)):(c.next=a.next,t.pending=a.next=c)}}function hu(e,t){var a=t.action,n=t.payload,s=e.state;if(t.isTransition){var c=O.T,g={};O.T=g;try{var b=a(s,n),x=O.S;x!==null&&x(g,b),bu(e,t,b)}catch(R){Ar(e,t,R)}finally{O.T=c}}else try{c=a(s,n),bu(e,t,c)}catch(R){Ar(e,t,R)}}function bu(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){vu(e,t,n)},function(n){return Ar(e,t,n)}):vu(e,t,a)}function vu(e,t,a){t.status="fulfilled",t.value=a,xu(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,hu(e,a)))}function Ar(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,xu(t),t=t.next;while(t!==n)}e.action=null}function xu(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Au(e,t){return t}function Su(e,t){if(Te){var a=Le.formState;if(a!==null){e:{var n=me;if(Te){if(Be){t:{for(var s=Be,c=$t;s.nodeType!==8;){if(!c){s=null;break t}if(s=Ht(s.nextSibling),s===null){s=null;break t}}c=s.data,s=c==="F!"||c==="F"?s:null}if(s){Be=Ht(s.nextSibling),n=s.data==="F!";break e}}Ba(n)}n=!1}n&&(t=a[0])}}return a=ft(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Au,lastRenderedState:t},a.queue=n,a=$u.bind(null,me,n),n.dispatch=a,n=xr(!1),c=_r.bind(null,me,!1,n.queue),n=ft(),s={state:t,dispatch:null,action:e,pending:null},n.queue=s,a=Qp.bind(null,me,s,c,a),s.dispatch=a,n.memoizedState=e,[t,a,!1]}function Mu(e){var t=Je();return Eu(t,Ce,e)}function Eu(e,t,a){if(t=br(e,t,Au)[0],e=xl(ea)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=fi(t)}catch(g){throw g===ri?pl:g}else n=t;t=Je();var s=t.queue,c=s.dispatch;return a!==t.memoizedState&&(me.flags|=2048,Sn(9,Al(),Yp.bind(null,s,a),null)),[n,c,e]}function Yp(e,t){e.action=t}function Tu(e){var t=Je(),a=Ce;if(a!==null)return Eu(t,a,e);Je(),t=t.memoizedState,a=Je();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function Sn(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},t=me.updateQueue,t===null&&(t=yr(),me.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function Al(){return{destroy:void 0,resource:void 0}}function _u(){return Je().memoizedState}function Sl(e,t,a,n){var s=ft();n=n===void 0?null:n,me.flags|=e,s.memoizedState=Sn(1|t,Al(),a,n)}function pi(e,t,a,n){var s=Je();n=n===void 0?null:n;var c=s.memoizedState.inst;Ce!==null&&n!==null&&dr(n,Ce.memoizedState.deps)?s.memoizedState=Sn(t,c,a,n):(me.flags|=e,s.memoizedState=Sn(1|t,c,a,n))}function Nu(e,t){Sl(8390656,8,e,t)}function Cu(e,t){pi(2048,8,e,t)}function Ru(e,t){return pi(4,2,e,t)}function qu(e,t){return pi(4,4,e,t)}function Du(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ou(e,t,a){a=a!=null?a.concat([e]):null,pi(4,4,Du.bind(null,t,e),a)}function Sr(){}function Iu(e,t){var a=Je();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&dr(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function ju(e,t){var a=Je();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&dr(t,n[1]))return n[0];if(n=e(),Va){ca(!0);try{e()}finally{ca(!1)}}return a.memoizedState=[n,t],n}function Mr(e,t,a){return a===void 0||(ya&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=Ud(),me.lanes|=e,Ma|=e,a)}function Lu(e,t,a,n){return xt(a,t)?a:vn.current!==null?(e=Mr(e,a,n),xt(e,t)||(Ze=!0),e):(ya&42)===0?(Ze=!0,e.memoizedState=a):(e=Ud(),me.lanes|=e,Ma|=e,t)}function Gu(e,t,a,n,s){var c=$.p;$.p=c!==0&&8>c?c:8;var g=O.T,b={};O.T=b,_r(e,!1,t,a);try{var x=s(),R=O.S;if(R!==null&&R(b,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var L=$p(x,n);gi(e,t,L,Tt(e))}else gi(e,t,n,Tt(e))}catch(U){gi(e,t,{then:function(){},status:"rejected",reason:U},Tt())}finally{$.p=c,O.T=g}}function Vp(){}function Er(e,t,a,n){if(e.tag!==5)throw Error(r(476));var s=Uu(e).queue;Gu(e,s,t,Y,a===null?Vp:function(){return wu(e),a(n)})}function Uu(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:Y},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function wu(e){var t=Uu(e).next.queue;gi(e,t,{},Tt())}function Tr(){return rt(Ii)}function Hu(){return Je().memoizedState}function ku(){return Je().memoizedState}function Jp(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Tt();e=pa(a);var n=ga(t,e,a);n!==null&&(_t(n,t,a),ci(n,t,a)),t={cache:tr()},e.payload=t;return}t=t.return}}function Pp(e,t,a){var n=Tt();a={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ml(e)?Bu(t,a):(a=Ys(e,t,a,n),a!==null&&(_t(a,e,n),zu(a,t,n)))}function $u(e,t,a){var n=Tt();gi(e,t,a,n)}function gi(e,t,a,n){var s={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ml(e))Bu(t,s);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var g=t.lastRenderedState,b=c(g,a);if(s.hasEagerState=!0,s.eagerState=b,xt(b,g))return sl(e,t,s,0),Le===null&&ll(),!1}catch{}finally{}if(a=Ys(e,t,s,n),a!==null)return _t(a,e,n),zu(a,t,n),!0}return!1}function _r(e,t,a,n){if(n={lane:2,revertLane:io(),action:n,hasEagerState:!1,eagerState:null,next:null},Ml(e)){if(t)throw Error(r(479))}else t=Ys(e,a,n,2),t!==null&&_t(t,e,2)}function Ml(e){var t=e.alternate;return e===me||t!==null&&t===me}function Bu(e,t){xn=hl=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function zu(e,t,a){if((a&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,Zo(e,a)}}var El={readContext:rt,use:vl,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useLayoutEffect:Qe,useInsertionEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useSyncExternalStore:Qe,useId:Qe,useHostTransitionStatus:Qe,useFormState:Qe,useActionState:Qe,useOptimistic:Qe,useMemoCache:Qe,useCacheRefresh:Qe},Qu={readContext:rt,use:vl,useCallback:function(e,t){return ft().memoizedState=[e,t===void 0?null:t],e},useContext:rt,useEffect:Nu,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Sl(4194308,4,Du.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Sl(4194308,4,e,t)},useInsertionEffect:function(e,t){Sl(4,2,e,t)},useMemo:function(e,t){var a=ft();t=t===void 0?null:t;var n=e();if(Va){ca(!0);try{e()}finally{ca(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=ft();if(a!==void 0){var s=a(t);if(Va){ca(!0);try{a(t)}finally{ca(!1)}}}else s=t;return n.memoizedState=n.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=Pp.bind(null,me,e),[n.memoizedState,e]},useRef:function(e){var t=ft();return e={current:e},t.memoizedState=e},useState:function(e){e=xr(e);var t=e.queue,a=$u.bind(null,me,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Sr,useDeferredValue:function(e,t){var a=ft();return Mr(a,e,t)},useTransition:function(){var e=xr(!1);return e=Gu.bind(null,me,e.queue,!0,!1),ft().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=me,s=ft();if(Te){if(a===void 0)throw Error(r(407));a=a()}else{if(a=t(),Le===null)throw Error(r(349));(ve&124)!==0||du(n,t,a)}s.memoizedState=a;var c={value:a,getSnapshot:t};return s.queue=c,Nu(fu.bind(null,n,c,e),[e]),n.flags|=2048,Sn(9,Al(),mu.bind(null,n,c,a,t),null),a},useId:function(){var e=ft(),t=Le.identifierPrefix;if(Te){var a=Zt,n=Kt;a=(n&~(1<<32-vt(n)-1)).toString(32)+a,t="«"+t+"R"+a,a=bl++,0<a&&(t+="H"+a.toString(32)),t+="»"}else a=Bp++,t="«"+t+"r"+a.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Tr,useFormState:Su,useActionState:Su,useOptimistic:function(e){var t=ft();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=_r.bind(null,me,!0,a),a.dispatch=t,[e,t]},useMemoCache:hr,useCacheRefresh:function(){return ft().memoizedState=Jp.bind(null,me)}},Yu={readContext:rt,use:vl,useCallback:Iu,useContext:rt,useEffect:Cu,useImperativeHandle:Ou,useInsertionEffect:Ru,useLayoutEffect:qu,useMemo:ju,useReducer:xl,useRef:_u,useState:function(){return xl(ea)},useDebugValue:Sr,useDeferredValue:function(e,t){var a=Je();return Lu(a,Ce.memoizedState,e,t)},useTransition:function(){var e=xl(ea)[0],t=Je().memoizedState;return[typeof e=="boolean"?e:fi(e),t]},useSyncExternalStore:uu,useId:Hu,useHostTransitionStatus:Tr,useFormState:Mu,useActionState:Mu,useOptimistic:function(e,t){var a=Je();return yu(a,Ce,e,t)},useMemoCache:hr,useCacheRefresh:ku},Xp={readContext:rt,use:vl,useCallback:Iu,useContext:rt,useEffect:Cu,useImperativeHandle:Ou,useInsertionEffect:Ru,useLayoutEffect:qu,useMemo:ju,useReducer:vr,useRef:_u,useState:function(){return vr(ea)},useDebugValue:Sr,useDeferredValue:function(e,t){var a=Je();return Ce===null?Mr(a,e,t):Lu(a,Ce.memoizedState,e,t)},useTransition:function(){var e=vr(ea)[0],t=Je().memoizedState;return[typeof e=="boolean"?e:fi(e),t]},useSyncExternalStore:uu,useId:Hu,useHostTransitionStatus:Tr,useFormState:Tu,useActionState:Tu,useOptimistic:function(e,t){var a=Je();return Ce!==null?yu(a,Ce,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:hr,useCacheRefresh:ku},Mn=null,yi=0;function Tl(e){var t=yi;return yi+=1,Mn===null&&(Mn=[]),au(Mn,e,t)}function hi(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function _l(e,t){throw t.$$typeof===A?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Vu(e){var t=e._init;return t(e._payload)}function Ju(e){function t(_,M){if(e){var C=_.deletions;C===null?(_.deletions=[M],_.flags|=16):C.push(M)}}function a(_,M){if(!e)return null;for(;M!==null;)t(_,M),M=M.sibling;return null}function n(_){for(var M=new Map;_!==null;)_.key!==null?M.set(_.key,_):M.set(_.index,_),_=_.sibling;return M}function s(_,M){return _=Xt(_,M),_.index=0,_.sibling=null,_}function c(_,M,C){return _.index=C,e?(C=_.alternate,C!==null?(C=C.index,C<M?(_.flags|=67108866,M):C):(_.flags|=67108866,M)):(_.flags|=1048576,M)}function g(_){return e&&_.alternate===null&&(_.flags|=67108866),_}function b(_,M,C,G){return M===null||M.tag!==6?(M=Js(C,_.mode,G),M.return=_,M):(M=s(M,C),M.return=_,M)}function x(_,M,C,G){var K=C.type;return K===I?L(_,M,C.props.children,G,C.key):M!==null&&(M.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Ge&&Vu(K)===M.type)?(M=s(M,C.props),hi(M,C),M.return=_,M):(M=ol(C.type,C.key,C.props,null,_.mode,G),hi(M,C),M.return=_,M)}function R(_,M,C,G){return M===null||M.tag!==4||M.stateNode.containerInfo!==C.containerInfo||M.stateNode.implementation!==C.implementation?(M=Ps(C,_.mode,G),M.return=_,M):(M=s(M,C.children||[]),M.return=_,M)}function L(_,M,C,G,K){return M===null||M.tag!==7?(M=wa(C,_.mode,G,K),M.return=_,M):(M=s(M,C),M.return=_,M)}function U(_,M,C){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Js(""+M,_.mode,C),M.return=_,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case T:return C=ol(M.type,M.key,M.props,null,_.mode,C),hi(C,M),C.return=_,C;case N:return M=Ps(M,_.mode,C),M.return=_,M;case Ge:var G=M._init;return M=G(M._payload),U(_,M,C)}if(ue(M)||ke(M))return M=wa(M,_.mode,C,null),M.return=_,M;if(typeof M.then=="function")return U(_,Tl(M),C);if(M.$$typeof===oe)return U(_,ml(_,M),C);_l(_,M)}return null}function q(_,M,C,G){var K=M!==null?M.key:null;if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return K!==null?null:b(_,M,""+C,G);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case T:return C.key===K?x(_,M,C,G):null;case N:return C.key===K?R(_,M,C,G):null;case Ge:return K=C._init,C=K(C._payload),q(_,M,C,G)}if(ue(C)||ke(C))return K!==null?null:L(_,M,C,G,null);if(typeof C.then=="function")return q(_,M,Tl(C),G);if(C.$$typeof===oe)return q(_,M,ml(_,C),G);_l(_,C)}return null}function D(_,M,C,G,K){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return _=_.get(C)||null,b(M,_,""+G,K);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case T:return _=_.get(G.key===null?C:G.key)||null,x(M,_,G,K);case N:return _=_.get(G.key===null?C:G.key)||null,R(M,_,G,K);case Ge:var fe=G._init;return G=fe(G._payload),D(_,M,C,G,K)}if(ue(G)||ke(G))return _=_.get(C)||null,L(M,_,G,K,null);if(typeof G.then=="function")return D(_,M,C,Tl(G),K);if(G.$$typeof===oe)return D(_,M,C,ml(M,G),K);_l(M,G)}return null}function re(_,M,C,G){for(var K=null,fe=null,ee=M,le=M=0,Fe=null;ee!==null&&le<C.length;le++){ee.index>le?(Fe=ee,ee=null):Fe=ee.sibling;var Me=q(_,ee,C[le],G);if(Me===null){ee===null&&(ee=Fe);break}e&&ee&&Me.alternate===null&&t(_,ee),M=c(Me,M,le),fe===null?K=Me:fe.sibling=Me,fe=Me,ee=Fe}if(le===C.length)return a(_,ee),Te&&ka(_,le),K;if(ee===null){for(;le<C.length;le++)ee=U(_,C[le],G),ee!==null&&(M=c(ee,M,le),fe===null?K=ee:fe.sibling=ee,fe=ee);return Te&&ka(_,le),K}for(ee=n(ee);le<C.length;le++)Fe=D(ee,_,le,C[le],G),Fe!==null&&(e&&Fe.alternate!==null&&ee.delete(Fe.key===null?le:Fe.key),M=c(Fe,M,le),fe===null?K=Fe:fe.sibling=Fe,fe=Fe);return e&&ee.forEach(function(Oa){return t(_,Oa)}),Te&&ka(_,le),K}function ne(_,M,C,G){if(C==null)throw Error(r(151));for(var K=null,fe=null,ee=M,le=M=0,Fe=null,Me=C.next();ee!==null&&!Me.done;le++,Me=C.next()){ee.index>le?(Fe=ee,ee=null):Fe=ee.sibling;var Oa=q(_,ee,Me.value,G);if(Oa===null){ee===null&&(ee=Fe);break}e&&ee&&Oa.alternate===null&&t(_,ee),M=c(Oa,M,le),fe===null?K=Oa:fe.sibling=Oa,fe=Oa,ee=Fe}if(Me.done)return a(_,ee),Te&&ka(_,le),K;if(ee===null){for(;!Me.done;le++,Me=C.next())Me=U(_,Me.value,G),Me!==null&&(M=c(Me,M,le),fe===null?K=Me:fe.sibling=Me,fe=Me);return Te&&ka(_,le),K}for(ee=n(ee);!Me.done;le++,Me=C.next())Me=D(ee,_,le,Me.value,G),Me!==null&&(e&&Me.alternate!==null&&ee.delete(Me.key===null?le:Me.key),M=c(Me,M,le),fe===null?K=Me:fe.sibling=Me,fe=Me);return e&&ee.forEach(function(Kg){return t(_,Kg)}),Te&&ka(_,le),K}function qe(_,M,C,G){if(typeof C=="object"&&C!==null&&C.type===I&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case T:e:{for(var K=C.key;M!==null;){if(M.key===K){if(K=C.type,K===I){if(M.tag===7){a(_,M.sibling),G=s(M,C.props.children),G.return=_,_=G;break e}}else if(M.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Ge&&Vu(K)===M.type){a(_,M.sibling),G=s(M,C.props),hi(G,C),G.return=_,_=G;break e}a(_,M);break}else t(_,M);M=M.sibling}C.type===I?(G=wa(C.props.children,_.mode,G,C.key),G.return=_,_=G):(G=ol(C.type,C.key,C.props,null,_.mode,G),hi(G,C),G.return=_,_=G)}return g(_);case N:e:{for(K=C.key;M!==null;){if(M.key===K)if(M.tag===4&&M.stateNode.containerInfo===C.containerInfo&&M.stateNode.implementation===C.implementation){a(_,M.sibling),G=s(M,C.children||[]),G.return=_,_=G;break e}else{a(_,M);break}else t(_,M);M=M.sibling}G=Ps(C,_.mode,G),G.return=_,_=G}return g(_);case Ge:return K=C._init,C=K(C._payload),qe(_,M,C,G)}if(ue(C))return re(_,M,C,G);if(ke(C)){if(K=ke(C),typeof K!="function")throw Error(r(150));return C=K.call(C),ne(_,M,C,G)}if(typeof C.then=="function")return qe(_,M,Tl(C),G);if(C.$$typeof===oe)return qe(_,M,ml(_,C),G);_l(_,C)}return typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint"?(C=""+C,M!==null&&M.tag===6?(a(_,M.sibling),G=s(M,C),G.return=_,_=G):(a(_,M),G=Js(C,_.mode,G),G.return=_,_=G),g(_)):a(_,M)}return function(_,M,C,G){try{yi=0;var K=qe(_,M,C,G);return Mn=null,K}catch(ee){if(ee===ri||ee===pl)throw ee;var fe=At(29,ee,null,_.mode);return fe.lanes=G,fe.return=_,fe}finally{}}}var En=Ju(!0),Pu=Ju(!1),jt=w(null),Bt=null;function ha(e){var t=e.alternate;Q(Xe,Xe.current&1),Q(jt,e),Bt===null&&(t===null||vn.current!==null||t.memoizedState!==null)&&(Bt=e)}function Xu(e){if(e.tag===22){if(Q(Xe,Xe.current),Q(jt,e),Bt===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Bt=e)}}else ba()}function ba(){Q(Xe,Xe.current),Q(jt,jt.current)}function ta(e){V(jt),Bt===e&&(Bt=null),V(Xe)}var Xe=w(0);function Nl(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||ho(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Nr(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:v({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Cr={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=Tt(),s=pa(n);s.payload=t,a!=null&&(s.callback=a),t=ga(e,s,n),t!==null&&(_t(t,e,n),ci(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=Tt(),s=pa(n);s.tag=1,s.payload=t,a!=null&&(s.callback=a),t=ga(e,s,n),t!==null&&(_t(t,e,n),ci(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Tt(),n=pa(a);n.tag=2,t!=null&&(n.callback=t),t=ga(e,n,a),t!==null&&(_t(t,e,a),ci(t,e,a))}};function Ku(e,t,a,n,s,c,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,c,g):t.prototype&&t.prototype.isPureReactComponent?!Fn(a,n)||!Fn(s,c):!0}function Zu(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&Cr.enqueueReplaceState(t,t.state,null)}function Ja(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=v({},a));for(var s in e)a[s]===void 0&&(a[s]=e[s])}return a}var Cl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Wu(e){Cl(e)}function Fu(e){console.error(e)}function ed(e){Cl(e)}function Rl(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function td(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Rr(e,t,a){return a=pa(a),a.tag=3,a.payload={element:null},a.callback=function(){Rl(e,t)},a}function ad(e){return e=pa(e),e.tag=3,e}function nd(e,t,a,n){var s=a.type.getDerivedStateFromError;if(typeof s=="function"){var c=n.value;e.payload=function(){return s(c)},e.callback=function(){td(t,a,n)}}var g=a.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){td(t,a,n),typeof s!="function"&&(Ea===null?Ea=new Set([this]):Ea.add(this));var b=n.stack;this.componentDidCatch(n.value,{componentStack:b!==null?b:""})})}function Kp(e,t,a,n,s){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&ii(t,a,s,!0),a=jt.current,a!==null){switch(a.tag){case 13:return Bt===null?Fr():a.alternate===null&&ze===0&&(ze=3),a.flags&=-257,a.flags|=65536,a.lanes=s,n===ir?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),to(e,n,s)),!1;case 22:return a.flags|=65536,n===ir?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),to(e,n,s)),!1}throw Error(r(435,a.tag))}return to(e,n,s),Fr(),!1}if(Te)return t=jt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=s,n!==Zs&&(e=Error(r(422),{cause:n}),ni(qt(e,a)))):(n!==Zs&&(t=Error(r(423),{cause:n}),ni(qt(t,a))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,n=qt(n,a),s=Rr(e.stateNode,n,s),rr(e,s),ze!==4&&(ze=2)),!1;var c=Error(r(520),{cause:n});if(c=qt(c,a),Ei===null?Ei=[c]:Ei.push(c),ze!==4&&(ze=2),t===null)return!0;n=qt(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=s&-s,a.lanes|=e,e=Rr(a.stateNode,n,e),rr(a,e),!1;case 1:if(t=a.type,c=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Ea===null||!Ea.has(c))))return a.flags|=65536,s&=-s,a.lanes|=s,s=ad(s),nd(s,e,a,n),rr(a,s),!1}a=a.return}while(a!==null);return!1}var id=Error(r(461)),Ze=!1;function at(e,t,a,n){t.child=e===null?Pu(t,null,a,n):En(t,e.child,a,n)}function ld(e,t,a,n,s){a=a.render;var c=t.ref;if("ref"in n){var g={};for(var b in n)b!=="ref"&&(g[b]=n[b])}else g=n;return Qa(t),n=mr(e,t,a,g,c,s),b=fr(),e!==null&&!Ze?(pr(e,t,s),aa(e,t,s)):(Te&&b&&Xs(t),t.flags|=1,at(e,t,n,s),t.child)}function sd(e,t,a,n,s){if(e===null){var c=a.type;return typeof c=="function"&&!Vs(c)&&c.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=c,rd(e,t,c,n,s)):(e=ol(a.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!Ur(e,s)){var g=c.memoizedProps;if(a=a.compare,a=a!==null?a:Fn,a(g,n)&&e.ref===t.ref)return aa(e,t,s)}return t.flags|=1,e=Xt(c,n),e.ref=t.ref,e.return=t,t.child=e}function rd(e,t,a,n,s){if(e!==null){var c=e.memoizedProps;if(Fn(c,n)&&e.ref===t.ref)if(Ze=!1,t.pendingProps=n=c,Ur(e,s))(e.flags&131072)!==0&&(Ze=!0);else return t.lanes=e.lanes,aa(e,t,s)}return qr(e,t,a,n,s)}function od(e,t,a){var n=t.pendingProps,s=n.children,c=e!==null?e.memoizedState:null;if(n.mode==="hidden"){if((t.flags&128)!==0){if(n=c!==null?c.baseLanes|a:a,e!==null){for(s=t.child=e.child,c=0;s!==null;)c=c|s.lanes|s.childLanes,s=s.sibling;t.childLanes=c&~n}else t.childLanes=0,t.child=null;return cd(e,t,n,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&fl(t,c!==null?c.cachePool:null),c!==null?ru(t,c):cr(),Xu(t);else return t.lanes=t.childLanes=536870912,cd(e,t,c!==null?c.baseLanes|a:a,a)}else c!==null?(fl(t,c.cachePool),ru(t,c),ba(),t.memoizedState=null):(e!==null&&fl(t,null),cr(),ba());return at(e,t,s,a),t.child}function cd(e,t,a,n){var s=nr();return s=s===null?null:{parent:Pe._currentValue,pool:s},t.memoizedState={baseLanes:a,cachePool:s},e!==null&&fl(t,null),cr(),Xu(t),e!==null&&ii(e,t,n,!0),null}function ql(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function qr(e,t,a,n,s){return Qa(t),a=mr(e,t,a,n,void 0,s),n=fr(),e!==null&&!Ze?(pr(e,t,s),aa(e,t,s)):(Te&&n&&Xs(t),t.flags|=1,at(e,t,a,s),t.child)}function ud(e,t,a,n,s,c){return Qa(t),t.updateQueue=null,a=cu(t,n,a,s),ou(e),n=fr(),e!==null&&!Ze?(pr(e,t,c),aa(e,t,c)):(Te&&n&&Xs(t),t.flags|=1,at(e,t,a,c),t.child)}function dd(e,t,a,n,s){if(Qa(t),t.stateNode===null){var c=pn,g=a.contextType;typeof g=="object"&&g!==null&&(c=rt(g)),c=new a(n,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Cr,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=n,c.state=t.memoizedState,c.refs={},lr(t),g=a.contextType,c.context=typeof g=="object"&&g!==null?rt(g):pn,c.state=t.memoizedState,g=a.getDerivedStateFromProps,typeof g=="function"&&(Nr(t,a,g,n),c.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(g=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),g!==c.state&&Cr.enqueueReplaceState(c,c.state,null),di(t,n,c,s),ui(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){c=t.stateNode;var b=t.memoizedProps,x=Ja(a,b);c.props=x;var R=c.context,L=a.contextType;g=pn,typeof L=="object"&&L!==null&&(g=rt(L));var U=a.getDerivedStateFromProps;L=typeof U=="function"||typeof c.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,L||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(b||R!==g)&&Zu(t,c,n,g),fa=!1;var q=t.memoizedState;c.state=q,di(t,n,c,s),ui(),R=t.memoizedState,b||q!==R||fa?(typeof U=="function"&&(Nr(t,a,U,n),R=t.memoizedState),(x=fa||Ku(t,a,x,n,q,R,g))?(L||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=R),c.props=n,c.state=R,c.context=g,n=x):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{c=t.stateNode,sr(e,t),g=t.memoizedProps,L=Ja(a,g),c.props=L,U=t.pendingProps,q=c.context,R=a.contextType,x=pn,typeof R=="object"&&R!==null&&(x=rt(R)),b=a.getDerivedStateFromProps,(R=typeof b=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(g!==U||q!==x)&&Zu(t,c,n,x),fa=!1,q=t.memoizedState,c.state=q,di(t,n,c,s),ui();var D=t.memoizedState;g!==U||q!==D||fa||e!==null&&e.dependencies!==null&&dl(e.dependencies)?(typeof b=="function"&&(Nr(t,a,b,n),D=t.memoizedState),(L=fa||Ku(t,a,L,n,q,D,x)||e!==null&&e.dependencies!==null&&dl(e.dependencies))?(R||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(n,D,x),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(n,D,x)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=D),c.props=n,c.state=D,c.context=x,n=L):(typeof c.componentDidUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),n=!1)}return c=n,ql(e,t),n=(t.flags&128)!==0,c||n?(c=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&n?(t.child=En(t,e.child,null,s),t.child=En(t,null,a,s)):at(e,t,a,s),t.memoizedState=c.state,e=t.child):e=aa(e,t,s),e}function md(e,t,a,n){return ai(),t.flags|=256,at(e,t,a,n),t.child}var Dr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Or(e){return{baseLanes:e,cachePool:Fc()}}function Ir(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Lt),e}function fd(e,t,a){var n=t.pendingProps,s=!1,c=(t.flags&128)!==0,g;if((g=c)||(g=e!==null&&e.memoizedState===null?!1:(Xe.current&2)!==0),g&&(s=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(Te){if(s?ha(t):ba(),Te){var b=Be,x;if(x=b){e:{for(x=b,b=$t;x.nodeType!==8;){if(!b){b=null;break e}if(x=Ht(x.nextSibling),x===null){b=null;break e}}b=x}b!==null?(t.memoizedState={dehydrated:b,treeContext:Ha!==null?{id:Kt,overflow:Zt}:null,retryLane:536870912,hydrationErrors:null},x=At(18,null,null,0),x.stateNode=b,x.return=t,t.child=x,ut=t,Be=null,x=!0):x=!1}x||Ba(t)}if(b=t.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return ho(b)?t.lanes=32:t.lanes=536870912,null;ta(t)}return b=n.children,n=n.fallback,s?(ba(),s=t.mode,b=Dl({mode:"hidden",children:b},s),n=wa(n,s,a,null),b.return=t,n.return=t,b.sibling=n,t.child=b,s=t.child,s.memoizedState=Or(a),s.childLanes=Ir(e,g,a),t.memoizedState=Dr,n):(ha(t),jr(t,b))}if(x=e.memoizedState,x!==null&&(b=x.dehydrated,b!==null)){if(c)t.flags&256?(ha(t),t.flags&=-257,t=Lr(e,t,a)):t.memoizedState!==null?(ba(),t.child=e.child,t.flags|=128,t=null):(ba(),s=n.fallback,b=t.mode,n=Dl({mode:"visible",children:n.children},b),s=wa(s,b,a,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,En(t,e.child,null,a),n=t.child,n.memoizedState=Or(a),n.childLanes=Ir(e,g,a),t.memoizedState=Dr,t=s);else if(ha(t),ho(b)){if(g=b.nextSibling&&b.nextSibling.dataset,g)var R=g.dgst;g=R,n=Error(r(419)),n.stack="",n.digest=g,ni({value:n,source:null,stack:null}),t=Lr(e,t,a)}else if(Ze||ii(e,t,a,!1),g=(a&e.childLanes)!==0,Ze||g){if(g=Le,g!==null&&(n=a&-a,n=(n&42)!==0?1:hs(n),n=(n&(g.suspendedLanes|a))!==0?0:n,n!==0&&n!==x.retryLane))throw x.retryLane=n,fn(e,n),_t(g,e,n),id;b.data==="$?"||Fr(),t=Lr(e,t,a)}else b.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=x.treeContext,Be=Ht(b.nextSibling),ut=t,Te=!0,$a=null,$t=!1,e!==null&&(Ot[It++]=Kt,Ot[It++]=Zt,Ot[It++]=Ha,Kt=e.id,Zt=e.overflow,Ha=t),t=jr(t,n.children),t.flags|=4096);return t}return s?(ba(),s=n.fallback,b=t.mode,x=e.child,R=x.sibling,n=Xt(x,{mode:"hidden",children:n.children}),n.subtreeFlags=x.subtreeFlags&65011712,R!==null?s=Xt(R,s):(s=wa(s,b,a,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,b=e.child.memoizedState,b===null?b=Or(a):(x=b.cachePool,x!==null?(R=Pe._currentValue,x=x.parent!==R?{parent:R,pool:R}:x):x=Fc(),b={baseLanes:b.baseLanes|a,cachePool:x}),s.memoizedState=b,s.childLanes=Ir(e,g,a),t.memoizedState=Dr,n):(ha(t),a=e.child,e=a.sibling,a=Xt(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=a,t.memoizedState=null,a)}function jr(e,t){return t=Dl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Dl(e,t){return e=At(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Lr(e,t,a){return En(t,e.child,null,a),e=jr(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pd(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Fs(e.return,t,a)}function Gr(e,t,a,n,s){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:s}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=n,c.tail=a,c.tailMode=s)}function gd(e,t,a){var n=t.pendingProps,s=n.revealOrder,c=n.tail;if(at(e,t,n.children,a),n=Xe.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pd(e,a,t);else if(e.tag===19)pd(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(Q(Xe,n),s){case"forwards":for(a=t.child,s=null;a!==null;)e=a.alternate,e!==null&&Nl(e)===null&&(s=a),a=a.sibling;a=s,a===null?(s=t.child,t.child=null):(s=a.sibling,a.sibling=null),Gr(t,!1,s,a,c);break;case"backwards":for(a=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Nl(e)===null){t.child=s;break}e=s.sibling,s.sibling=a,a=s,s=e}Gr(t,!0,a,null,c);break;case"together":Gr(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function aa(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Ma|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(ii(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,a=Xt(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Xt(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Ur(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&dl(e)))}function Zp(e,t,a){switch(t.tag){case 3:we(t,t.stateNode.containerInfo),ma(t,Pe,e.memoizedState.cache),ai();break;case 27:case 5:ms(t);break;case 4:we(t,t.stateNode.containerInfo);break;case 10:ma(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(ha(t),t.flags|=128,null):(a&t.child.childLanes)!==0?fd(e,t,a):(ha(t),e=aa(e,t,a),e!==null?e.sibling:null);ha(t);break;case 19:var s=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(ii(e,t,a,!1),n=(a&t.childLanes)!==0),s){if(n)return gd(e,t,a);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Q(Xe,Xe.current),n)break;return null;case 22:case 23:return t.lanes=0,od(e,t,a);case 24:ma(t,Pe,e.memoizedState.cache)}return aa(e,t,a)}function yd(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ze=!0;else{if(!Ur(e,a)&&(t.flags&128)===0)return Ze=!1,Zp(e,t,a);Ze=(e.flags&131072)!==0}else Ze=!1,Te&&(t.flags&1048576)!==0&&Vc(t,ul,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,s=n._init;if(n=s(n._payload),t.type=n,typeof n=="function")Vs(n)?(e=Ja(n,e),t.tag=1,t=dd(null,t,n,e,a)):(t.tag=0,t=qr(null,t,n,e,a));else{if(n!=null){if(s=n.$$typeof,s===se){t.tag=11,t=ld(null,t,n,e,a);break e}else if(s===Oe){t.tag=14,t=sd(null,t,n,e,a);break e}}throw t=te(n)||n,Error(r(306,t,""))}}return t;case 0:return qr(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,s=Ja(n,t.pendingProps),dd(e,t,n,s,a);case 3:e:{if(we(t,t.stateNode.containerInfo),e===null)throw Error(r(387));n=t.pendingProps;var c=t.memoizedState;s=c.element,sr(e,t),di(t,n,null,a);var g=t.memoizedState;if(n=g.cache,ma(t,Pe,n),n!==c.cache&&er(t,[Pe],a,!0),ui(),n=g.element,c.isDehydrated)if(c={element:n,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){t=md(e,t,n,a);break e}else if(n!==s){s=qt(Error(r(424)),t),ni(s),t=md(e,t,n,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Be=Ht(e.firstChild),ut=t,Te=!0,$a=null,$t=!0,a=Pu(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ai(),n===s){t=aa(e,t,a);break e}at(e,t,n,a)}t=t.child}return t;case 26:return ql(e,t),e===null?(a=xm(t.type,null,t.pendingProps,null))?t.memoizedState=a:Te||(a=t.type,e=t.pendingProps,n=Yl(ce.current).createElement(a),n[st]=t,n[dt]=e,it(n,a,e),Ke(n),t.stateNode=n):t.memoizedState=xm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ms(t),e===null&&Te&&(n=t.stateNode=hm(t.type,t.pendingProps,ce.current),ut=t,$t=!0,s=Be,Na(t.type)?(bo=s,Be=Ht(n.firstChild)):Be=s),at(e,t,t.pendingProps.children,a),ql(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Te&&((s=n=Be)&&(n=Tg(n,t.type,t.pendingProps,$t),n!==null?(t.stateNode=n,ut=t,Be=Ht(n.firstChild),$t=!1,s=!0):s=!1),s||Ba(t)),ms(t),s=t.type,c=t.pendingProps,g=e!==null?e.memoizedProps:null,n=c.children,po(s,c)?n=null:g!==null&&po(s,g)&&(t.flags|=32),t.memoizedState!==null&&(s=mr(e,t,zp,null,null,a),Ii._currentValue=s),ql(e,t),at(e,t,n,a),t.child;case 6:return e===null&&Te&&((e=a=Be)&&(a=_g(a,t.pendingProps,$t),a!==null?(t.stateNode=a,ut=t,Be=null,e=!0):e=!1),e||Ba(t)),null;case 13:return fd(e,t,a);case 4:return we(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=En(t,null,n,a):at(e,t,n,a),t.child;case 11:return ld(e,t,t.type,t.pendingProps,a);case 7:return at(e,t,t.pendingProps,a),t.child;case 8:return at(e,t,t.pendingProps.children,a),t.child;case 12:return at(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,ma(t,t.type,n.value),at(e,t,n.children,a),t.child;case 9:return s=t.type._context,n=t.pendingProps.children,Qa(t),s=rt(s),n=n(s),t.flags|=1,at(e,t,n,a),t.child;case 14:return sd(e,t,t.type,t.pendingProps,a);case 15:return rd(e,t,t.type,t.pendingProps,a);case 19:return gd(e,t,a);case 31:return n=t.pendingProps,a=t.mode,n={mode:n.mode,children:n.children},e===null?(a=Dl(n,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=Xt(e.child,n),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return od(e,t,a);case 24:return Qa(t),n=rt(Pe),e===null?(s=nr(),s===null&&(s=Le,c=tr(),s.pooledCache=c,c.refCount++,c!==null&&(s.pooledCacheLanes|=a),s=c),t.memoizedState={parent:n,cache:s},lr(t),ma(t,Pe,s)):((e.lanes&a)!==0&&(sr(e,t),di(t,null,null,a),ui()),s=e.memoizedState,c=t.memoizedState,s.parent!==n?(s={parent:n,cache:n},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),ma(t,Pe,n)):(n=c.cache,ma(t,Pe,n),n!==s.cache&&er(t,[Pe],a,!0))),at(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function na(e){e.flags|=4}function hd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Tm(t)){if(t=jt.current,t!==null&&((ve&4194048)===ve?Bt!==null:(ve&62914560)!==ve&&(ve&536870912)===0||t!==Bt))throw oi=ir,eu;e.flags|=8192}}function Ol(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Xo():536870912,e.lanes|=t,Cn|=t)}function bi(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function $e(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var s=e.child;s!==null;)a|=s.lanes|s.childLanes,n|=s.subtreeFlags&65011712,n|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)a|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function Wp(e,t,a){var n=t.pendingProps;switch(Ks(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(t),null;case 1:return $e(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ft(Pe),oa(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ti(t)?na(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Xc())),$e(t),null;case 26:return a=t.memoizedState,e===null?(na(t),a!==null?($e(t),hd(t,a)):($e(t),t.flags&=-16777217)):a?a!==e.memoizedState?(na(t),$e(t),hd(t,a)):($e(t),t.flags&=-16777217):(e.memoizedProps!==n&&na(t),$e(t),t.flags&=-16777217),null;case 27:zi(t),a=ce.current;var s=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==n&&na(t);else{if(!n){if(t.stateNode===null)throw Error(r(166));return $e(t),null}e=ae.current,ti(t)?Jc(t):(e=hm(s,n,a),t.stateNode=e,na(t))}return $e(t),null;case 5:if(zi(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&na(t);else{if(!n){if(t.stateNode===null)throw Error(r(166));return $e(t),null}if(e=ae.current,ti(t))Jc(t);else{switch(s=Yl(ce.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof n.is=="string"?s.createElement("select",{is:n.is}):s.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e=typeof n.is=="string"?s.createElement(a,{is:n.is}):s.createElement(a)}}e[st]=t,e[dt]=n;e:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(it(e,a,n),a){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&na(t)}}return $e(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&na(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(r(166));if(e=ce.current,ti(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,s=ut,s!==null)switch(s.tag){case 27:case 5:n=s.memoizedProps}e[st]=t,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||um(e.nodeValue,a)),e||Ba(t)}else e=Yl(e).createTextNode(n),e[st]=t,t.stateNode=e}return $e(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=ti(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(r(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));s[st]=t}else ai(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;$e(t),s=!1}else s=Xc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(ta(t),t):(ta(t),null)}if(ta(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=n!==null,e=e!==null&&e.memoizedState!==null,a){n=t.child,s=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(s=n.alternate.memoizedState.cachePool.pool);var c=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==s&&(n.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),Ol(t,t.updateQueue),$e(t),null;case 4:return oa(),e===null&&oo(t.stateNode.containerInfo),$e(t),null;case 10:return Ft(t.type),$e(t),null;case 19:if(V(Xe),s=t.memoizedState,s===null)return $e(t),null;if(n=(t.flags&128)!==0,c=s.rendering,c===null)if(n)bi(s,!1);else{if(ze!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=Nl(e),c!==null){for(t.flags|=128,bi(s,!1),e=c.updateQueue,t.updateQueue=e,Ol(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Yc(a,e),a=a.sibling;return Q(Xe,Xe.current&1|2),t.child}e=e.sibling}s.tail!==null&&kt()>Ll&&(t.flags|=128,n=!0,bi(s,!1),t.lanes=4194304)}else{if(!n)if(e=Nl(c),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,Ol(t,e),bi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!c.alternate&&!Te)return $e(t),null}else 2*kt()-s.renderingStartTime>Ll&&a!==536870912&&(t.flags|=128,n=!0,bi(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(e=s.last,e!==null?e.sibling=c:t.child=c,s.last=c)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=kt(),t.sibling=null,e=Xe.current,Q(Xe,n?e&1|2:e&1),t):($e(t),null);case 22:case 23:return ta(t),ur(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&($e(t),t.subtreeFlags&6&&(t.flags|=8192)):$e(t),a=t.updateQueue,a!==null&&Ol(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&V(Ya),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Ft(Pe),$e(t),null;case 25:return null;case 30:return null}throw Error(r(156,t.tag))}function Fp(e,t){switch(Ks(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ft(Pe),oa(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return zi(t),null;case 13:if(ta(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));ai()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return V(Xe),null;case 4:return oa(),null;case 10:return Ft(t.type),null;case 22:case 23:return ta(t),ur(),e!==null&&V(Ya),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ft(Pe),null;case 25:return null;default:return null}}function bd(e,t){switch(Ks(t),t.tag){case 3:Ft(Pe),oa();break;case 26:case 27:case 5:zi(t);break;case 4:oa();break;case 13:ta(t);break;case 19:V(Xe);break;case 10:Ft(t.type);break;case 22:case 23:ta(t),ur(),e!==null&&V(Ya);break;case 24:Ft(Pe)}}function vi(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var s=n.next;a=s;do{if((a.tag&e)===e){n=void 0;var c=a.create,g=a.inst;n=c(),g.destroy=n}a=a.next}while(a!==s)}}catch(b){Ie(t,t.return,b)}}function va(e,t,a){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var c=s.next;n=c;do{if((n.tag&e)===e){var g=n.inst,b=g.destroy;if(b!==void 0){g.destroy=void 0,s=t;var x=a,R=b;try{R()}catch(L){Ie(s,x,L)}}}n=n.next}while(n!==c)}}catch(L){Ie(t,t.return,L)}}function vd(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{su(t,a)}catch(n){Ie(e,e.return,n)}}}function xd(e,t,a){a.props=Ja(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){Ie(e,t,n)}}function xi(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(s){Ie(e,t,s)}}function zt(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(s){Ie(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(s){Ie(e,t,s)}else a.current=null}function Ad(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(s){Ie(e,e.return,s)}}function wr(e,t,a){try{var n=e.stateNode;xg(n,e.type,a,t),n[dt]=t}catch(s){Ie(e,e.return,s)}}function Sd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Na(e.type)||e.tag===4}function Hr(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Na(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kr(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Ql));else if(n!==4&&(n===27&&Na(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(kr(e,t,a),e=e.sibling;e!==null;)kr(e,t,a),e=e.sibling}function Il(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(n===27&&Na(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Il(e,t,a),e=e.sibling;e!==null;)Il(e,t,a),e=e.sibling}function Md(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);it(t,n,a),t[st]=e,t[dt]=a}catch(c){Ie(e,e.return,c)}}var ia=!1,Ye=!1,$r=!1,Ed=typeof WeakSet=="function"?WeakSet:Set,We=null;function eg(e,t){if(e=e.containerInfo,mo=Zl,e=Lc(e),Hs(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var s=n.anchorOffset,c=n.focusNode;n=n.focusOffset;try{a.nodeType,c.nodeType}catch{a=null;break e}var g=0,b=-1,x=-1,R=0,L=0,U=e,q=null;t:for(;;){for(var D;U!==a||s!==0&&U.nodeType!==3||(b=g+s),U!==c||n!==0&&U.nodeType!==3||(x=g+n),U.nodeType===3&&(g+=U.nodeValue.length),(D=U.firstChild)!==null;)q=U,U=D;for(;;){if(U===e)break t;if(q===a&&++R===s&&(b=g),q===c&&++L===n&&(x=g),(D=U.nextSibling)!==null)break;U=q,q=U.parentNode}U=D}a=b===-1||x===-1?null:{start:b,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(fo={focusedElem:e,selectionRange:a},Zl=!1,We=t;We!==null;)if(t=We,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,We=e;else for(;We!==null;){switch(t=We,c=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,a=t,s=c.memoizedProps,c=c.memoizedState,n=a.stateNode;try{var re=Ja(a.type,s,a.elementType===a.type);e=n.getSnapshotBeforeUpdate(re,c),n.__reactInternalSnapshotBeforeUpdate=e}catch(ne){Ie(a,a.return,ne)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)yo(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":yo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=t.sibling,e!==null){e.return=t.return,We=e;break}We=t.return}}function Td(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:xa(e,a),n&4&&vi(5,a);break;case 1:if(xa(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(g){Ie(a,a.return,g)}else{var s=Ja(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Ie(a,a.return,g)}}n&64&&vd(a),n&512&&xi(a,a.return);break;case 3:if(xa(e,a),n&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{su(e,t)}catch(g){Ie(a,a.return,g)}}break;case 27:t===null&&n&4&&Md(a);case 26:case 5:xa(e,a),t===null&&n&4&&Ad(a),n&512&&xi(a,a.return);break;case 12:xa(e,a);break;case 13:xa(e,a),n&4&&Cd(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=cg.bind(null,a),Ng(e,a))));break;case 22:if(n=a.memoizedState!==null||ia,!n){t=t!==null&&t.memoizedState!==null||Ye,s=ia;var c=Ye;ia=n,(Ye=t)&&!c?Aa(e,a,(a.subtreeFlags&8772)!==0):xa(e,a),ia=s,Ye=c}break;case 30:break;default:xa(e,a)}}function _d(e){var t=e.alternate;t!==null&&(e.alternate=null,_d(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&xs(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var He=null,pt=!1;function la(e,t,a){for(a=a.child;a!==null;)Nd(e,t,a),a=a.sibling}function Nd(e,t,a){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount($n,a)}catch{}switch(a.tag){case 26:Ye||zt(a,t),la(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ye||zt(a,t);var n=He,s=pt;Na(a.type)&&(He=a.stateNode,pt=!1),la(e,t,a),Ri(a.stateNode),He=n,pt=s;break;case 5:Ye||zt(a,t);case 6:if(n=He,s=pt,He=null,la(e,t,a),He=n,pt=s,He!==null)if(pt)try{(He.nodeType===9?He.body:He.nodeName==="HTML"?He.ownerDocument.body:He).removeChild(a.stateNode)}catch(c){Ie(a,t,c)}else try{He.removeChild(a.stateNode)}catch(c){Ie(a,t,c)}break;case 18:He!==null&&(pt?(e=He,gm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ui(e)):gm(He,a.stateNode));break;case 4:n=He,s=pt,He=a.stateNode.containerInfo,pt=!0,la(e,t,a),He=n,pt=s;break;case 0:case 11:case 14:case 15:Ye||va(2,a,t),Ye||va(4,a,t),la(e,t,a);break;case 1:Ye||(zt(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&xd(a,t,n)),la(e,t,a);break;case 21:la(e,t,a);break;case 22:Ye=(n=Ye)||a.memoizedState!==null,la(e,t,a),Ye=n;break;default:la(e,t,a)}}function Cd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ui(e)}catch(a){Ie(t,t.return,a)}}function tg(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ed),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ed),t;default:throw Error(r(435,e.tag))}}function Br(e,t){var a=tg(e);t.forEach(function(n){var s=ug.bind(null,e,n);a.has(n)||(a.add(n),n.then(s,s))})}function St(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var s=a[n],c=e,g=t,b=g;e:for(;b!==null;){switch(b.tag){case 27:if(Na(b.type)){He=b.stateNode,pt=!1;break e}break;case 5:He=b.stateNode,pt=!1;break e;case 3:case 4:He=b.stateNode.containerInfo,pt=!0;break e}b=b.return}if(He===null)throw Error(r(160));Nd(c,g,s),He=null,pt=!1,c=s.alternate,c!==null&&(c.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Rd(t,e),t=t.sibling}var wt=null;function Rd(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:St(t,e),Mt(e),n&4&&(va(3,e,e.return),vi(3,e),va(5,e,e.return));break;case 1:St(t,e),Mt(e),n&512&&(Ye||a===null||zt(a,a.return)),n&64&&ia&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var s=wt;if(St(t,e),Mt(e),n&512&&(Ye||a===null||zt(a,a.return)),n&4){var c=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,s=s.ownerDocument||s;t:switch(n){case"title":c=s.getElementsByTagName("title")[0],(!c||c[Qn]||c[st]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=s.createElement(n),s.head.insertBefore(c,s.querySelector("head > title"))),it(c,n,a),c[st]=e,Ke(c),n=c;break e;case"link":var g=Mm("link","href",s).get(n+(a.href||""));if(g){for(var b=0;b<g.length;b++)if(c=g[b],c.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&c.getAttribute("rel")===(a.rel==null?null:a.rel)&&c.getAttribute("title")===(a.title==null?null:a.title)&&c.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){g.splice(b,1);break t}}c=s.createElement(n),it(c,n,a),s.head.appendChild(c);break;case"meta":if(g=Mm("meta","content",s).get(n+(a.content||""))){for(b=0;b<g.length;b++)if(c=g[b],c.getAttribute("content")===(a.content==null?null:""+a.content)&&c.getAttribute("name")===(a.name==null?null:a.name)&&c.getAttribute("property")===(a.property==null?null:a.property)&&c.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&c.getAttribute("charset")===(a.charSet==null?null:a.charSet)){g.splice(b,1);break t}}c=s.createElement(n),it(c,n,a),s.head.appendChild(c);break;default:throw Error(r(468,n))}c[st]=e,Ke(c),n=c}e.stateNode=n}else Em(s,e.type,e.stateNode);else e.stateNode=Sm(s,n,e.memoizedProps);else c!==n?(c===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):c.count--,n===null?Em(s,e.type,e.stateNode):Sm(s,n,e.memoizedProps)):n===null&&e.stateNode!==null&&wr(e,e.memoizedProps,a.memoizedProps)}break;case 27:St(t,e),Mt(e),n&512&&(Ye||a===null||zt(a,a.return)),a!==null&&n&4&&wr(e,e.memoizedProps,a.memoizedProps);break;case 5:if(St(t,e),Mt(e),n&512&&(Ye||a===null||zt(a,a.return)),e.flags&32){s=e.stateNode;try{sn(s,"")}catch(D){Ie(e,e.return,D)}}n&4&&e.stateNode!=null&&(s=e.memoizedProps,wr(e,s,a!==null?a.memoizedProps:s)),n&1024&&($r=!0);break;case 6:if(St(t,e),Mt(e),n&4){if(e.stateNode===null)throw Error(r(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(D){Ie(e,e.return,D)}}break;case 3:if(Pl=null,s=wt,wt=Vl(t.containerInfo),St(t,e),wt=s,Mt(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{Ui(t.containerInfo)}catch(D){Ie(e,e.return,D)}$r&&($r=!1,qd(e));break;case 4:n=wt,wt=Vl(e.stateNode.containerInfo),St(t,e),Mt(e),wt=n;break;case 12:St(t,e),Mt(e);break;case 13:St(t,e),Mt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Pr=kt()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Br(e,n)));break;case 22:s=e.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,R=ia,L=Ye;if(ia=R||s,Ye=L||x,St(t,e),Ye=L,ia=R,Mt(e),n&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(a===null||x||ia||Ye||Pa(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){x=a=t;try{if(c=x.stateNode,s)g=c.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{b=x.stateNode;var U=x.memoizedProps.style,q=U!=null&&U.hasOwnProperty("display")?U.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(D){Ie(x,x.return,D)}}}else if(t.tag===6){if(a===null){x=t;try{x.stateNode.nodeValue=s?"":x.memoizedProps}catch(D){Ie(x,x.return,D)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,Br(e,a))));break;case 19:St(t,e),Mt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Br(e,n)));break;case 30:break;case 21:break;default:St(t,e),Mt(e)}}function Mt(e){var t=e.flags;if(t&2){try{for(var a,n=e.return;n!==null;){if(Sd(n)){a=n;break}n=n.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var s=a.stateNode,c=Hr(e);Il(e,c,s);break;case 5:var g=a.stateNode;a.flags&32&&(sn(g,""),a.flags&=-33);var b=Hr(e);Il(e,b,g);break;case 3:case 4:var x=a.stateNode.containerInfo,R=Hr(e);kr(e,R,x);break;default:throw Error(r(161))}}catch(L){Ie(e,e.return,L)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qd(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;qd(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function xa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Td(e,t.alternate,t),t=t.sibling}function Pa(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:va(4,t,t.return),Pa(t);break;case 1:zt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&xd(t,t.return,a),Pa(t);break;case 27:Ri(t.stateNode);case 26:case 5:zt(t,t.return),Pa(t);break;case 22:t.memoizedState===null&&Pa(t);break;case 30:Pa(t);break;default:Pa(t)}e=e.sibling}}function Aa(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,s=e,c=t,g=c.flags;switch(c.tag){case 0:case 11:case 15:Aa(s,c,a),vi(4,c);break;case 1:if(Aa(s,c,a),n=c,s=n.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(R){Ie(n,n.return,R)}if(n=c,s=n.updateQueue,s!==null){var b=n.stateNode;try{var x=s.shared.hiddenCallbacks;if(x!==null)for(s.shared.hiddenCallbacks=null,s=0;s<x.length;s++)lu(x[s],b)}catch(R){Ie(n,n.return,R)}}a&&g&64&&vd(c),xi(c,c.return);break;case 27:Md(c);case 26:case 5:Aa(s,c,a),a&&n===null&&g&4&&Ad(c),xi(c,c.return);break;case 12:Aa(s,c,a);break;case 13:Aa(s,c,a),a&&g&4&&Cd(s,c);break;case 22:c.memoizedState===null&&Aa(s,c,a),xi(c,c.return);break;case 30:break;default:Aa(s,c,a)}t=t.sibling}}function zr(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&li(a))}function Qr(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&li(e))}function Qt(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Dd(e,t,a,n),t=t.sibling}function Dd(e,t,a,n){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Qt(e,t,a,n),s&2048&&vi(9,t);break;case 1:Qt(e,t,a,n);break;case 3:Qt(e,t,a,n),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&li(e)));break;case 12:if(s&2048){Qt(e,t,a,n),e=t.stateNode;try{var c=t.memoizedProps,g=c.id,b=c.onPostCommit;typeof b=="function"&&b(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(x){Ie(t,t.return,x)}}else Qt(e,t,a,n);break;case 13:Qt(e,t,a,n);break;case 23:break;case 22:c=t.stateNode,g=t.alternate,t.memoizedState!==null?c._visibility&2?Qt(e,t,a,n):Ai(e,t):c._visibility&2?Qt(e,t,a,n):(c._visibility|=2,Tn(e,t,a,n,(t.subtreeFlags&10256)!==0)),s&2048&&zr(g,t);break;case 24:Qt(e,t,a,n),s&2048&&Qr(t.alternate,t);break;default:Qt(e,t,a,n)}}function Tn(e,t,a,n,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var c=e,g=t,b=a,x=n,R=g.flags;switch(g.tag){case 0:case 11:case 15:Tn(c,g,b,x,s),vi(8,g);break;case 23:break;case 22:var L=g.stateNode;g.memoizedState!==null?L._visibility&2?Tn(c,g,b,x,s):Ai(c,g):(L._visibility|=2,Tn(c,g,b,x,s)),s&&R&2048&&zr(g.alternate,g);break;case 24:Tn(c,g,b,x,s),s&&R&2048&&Qr(g.alternate,g);break;default:Tn(c,g,b,x,s)}t=t.sibling}}function Ai(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,s=n.flags;switch(n.tag){case 22:Ai(a,n),s&2048&&zr(n.alternate,n);break;case 24:Ai(a,n),s&2048&&Qr(n.alternate,n);break;default:Ai(a,n)}t=t.sibling}}var Si=8192;function _n(e){if(e.subtreeFlags&Si)for(e=e.child;e!==null;)Od(e),e=e.sibling}function Od(e){switch(e.tag){case 26:_n(e),e.flags&Si&&e.memoizedState!==null&&kg(wt,e.memoizedState,e.memoizedProps);break;case 5:_n(e);break;case 3:case 4:var t=wt;wt=Vl(e.stateNode.containerInfo),_n(e),wt=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Si,Si=16777216,_n(e),Si=t):_n(e));break;default:_n(e)}}function Id(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Mi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];We=n,Ld(n,e)}Id(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)jd(e),e=e.sibling}function jd(e){switch(e.tag){case 0:case 11:case 15:Mi(e),e.flags&2048&&va(9,e,e.return);break;case 3:Mi(e);break;case 12:Mi(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,jl(e)):Mi(e);break;default:Mi(e)}}function jl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];We=n,Ld(n,e)}Id(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:va(8,t,t.return),jl(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,jl(t));break;default:jl(t)}e=e.sibling}}function Ld(e,t){for(;We!==null;){var a=We;switch(a.tag){case 0:case 11:case 15:va(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:li(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,We=n;else e:for(a=e;We!==null;){n=We;var s=n.sibling,c=n.return;if(_d(n),n===a){We=null;break e}if(s!==null){s.return=c,We=s;break e}We=c}}}var ag={getCacheForType:function(e){var t=rt(Pe),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},ng=typeof WeakMap=="function"?WeakMap:Map,_e=0,Le=null,ye=null,ve=0,Ne=0,Et=null,Sa=!1,Nn=!1,Yr=!1,sa=0,ze=0,Ma=0,Xa=0,Vr=0,Lt=0,Cn=0,Ei=null,gt=null,Jr=!1,Pr=0,Ll=1/0,Gl=null,Ea=null,nt=0,Ta=null,Rn=null,qn=0,Xr=0,Kr=null,Gd=null,Ti=0,Zr=null;function Tt(){if((_e&2)!==0&&ve!==0)return ve&-ve;if(O.T!==null){var e=hn;return e!==0?e:io()}return Wo()}function Ud(){Lt===0&&(Lt=(ve&536870912)===0||Te?Po():536870912);var e=jt.current;return e!==null&&(e.flags|=32),Lt}function _t(e,t,a){(e===Le&&(Ne===2||Ne===9)||e.cancelPendingCommit!==null)&&(Dn(e,0),_a(e,ve,Lt,!1)),zn(e,a),((_e&2)===0||e!==Le)&&(e===Le&&((_e&2)===0&&(Xa|=a),ze===4&&_a(e,ve,Lt,!1)),Yt(e))}function wd(e,t,a){if((_e&6)!==0)throw Error(r(327));var n=!a&&(t&124)===0&&(t&e.expiredLanes)===0||Bn(e,t),s=n?sg(e,t):eo(e,t,!0),c=n;do{if(s===0){Nn&&!n&&_a(e,t,0,!1);break}else{if(a=e.current.alternate,c&&!ig(a)){s=eo(e,t,!1),c=!1;continue}if(s===2){if(c=t,e.errorRecoveryDisabledLanes&c)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var b=e;s=Ei;var x=b.current.memoizedState.isDehydrated;if(x&&(Dn(b,g).flags|=256),g=eo(b,g,!1),g!==2){if(Yr&&!x){b.errorRecoveryDisabledLanes|=c,Xa|=c,s=4;break e}c=gt,gt=s,c!==null&&(gt===null?gt=c:gt.push.apply(gt,c))}s=g}if(c=!1,s!==2)continue}}if(s===1){Dn(e,0),_a(e,t,0,!0);break}e:{switch(n=e,c=s,c){case 0:case 1:throw Error(r(345));case 4:if((t&4194048)!==t)break;case 6:_a(n,t,Lt,!Sa);break e;case 2:gt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((t&62914560)===t&&(s=Pr+300-kt(),10<s)){if(_a(n,t,Lt,!Sa),Ji(n,0,!0)!==0)break e;n.timeoutHandle=fm(Hd.bind(null,n,a,gt,Gl,Jr,t,Lt,Xa,Cn,Sa,c,2,-0,0),s);break e}Hd(n,a,gt,Gl,Jr,t,Lt,Xa,Cn,Sa,c,0,-0,0)}}break}while(!0);Yt(e)}function Hd(e,t,a,n,s,c,g,b,x,R,L,U,q,D){if(e.timeoutHandle=-1,U=t.subtreeFlags,(U&8192||(U&16785408)===16785408)&&(Oi={stylesheets:null,count:0,unsuspend:Hg},Od(t),U=$g(),U!==null)){e.cancelPendingCommit=U(Vd.bind(null,e,t,c,a,n,s,g,b,x,L,1,q,D)),_a(e,c,g,!R);return}Vd(e,t,c,a,n,s,g,b,x)}function ig(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var s=a[n],c=s.getSnapshot;s=s.value;try{if(!xt(c(),s))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _a(e,t,a,n){t&=~Vr,t&=~Xa,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var s=t;0<s;){var c=31-vt(s),g=1<<c;n[c]=-1,s&=~g}a!==0&&Ko(e,a,t)}function Ul(){return(_e&6)===0?(_i(0),!1):!0}function Wr(){if(ye!==null){if(Ne===0)var e=ye.return;else e=ye,Wt=za=null,gr(e),Mn=null,yi=0,e=ye;for(;e!==null;)bd(e.alternate,e),e=e.return;ye=null}}function Dn(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Sg(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Wr(),Le=e,ye=a=Xt(e.current,null),ve=t,Ne=0,Et=null,Sa=!1,Nn=Bn(e,t),Yr=!1,Cn=Lt=Vr=Xa=Ma=ze=0,gt=Ei=null,Jr=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var s=31-vt(n),c=1<<s;t|=e[s],n&=~c}return sa=t,ll(),a}function kd(e,t){me=null,O.H=El,t===ri||t===pl?(t=nu(),Ne=3):t===eu?(t=nu(),Ne=4):Ne=t===id?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Et=t,ye===null&&(ze=1,Rl(e,qt(t,e.current)))}function $d(){var e=O.H;return O.H=El,e===null?El:e}function Bd(){var e=O.A;return O.A=ag,e}function Fr(){ze=4,Sa||(ve&4194048)!==ve&&jt.current!==null||(Nn=!0),(Ma&134217727)===0&&(Xa&134217727)===0||Le===null||_a(Le,ve,Lt,!1)}function eo(e,t,a){var n=_e;_e|=2;var s=$d(),c=Bd();(Le!==e||ve!==t)&&(Gl=null,Dn(e,t)),t=!1;var g=ze;e:do try{if(Ne!==0&&ye!==null){var b=ye,x=Et;switch(Ne){case 8:Wr(),g=6;break e;case 3:case 2:case 9:case 6:jt.current===null&&(t=!0);var R=Ne;if(Ne=0,Et=null,On(e,b,x,R),a&&Nn){g=0;break e}break;default:R=Ne,Ne=0,Et=null,On(e,b,x,R)}}lg(),g=ze;break}catch(L){kd(e,L)}while(!0);return t&&e.shellSuspendCounter++,Wt=za=null,_e=n,O.H=s,O.A=c,ye===null&&(Le=null,ve=0,ll()),g}function lg(){for(;ye!==null;)zd(ye)}function sg(e,t){var a=_e;_e|=2;var n=$d(),s=Bd();Le!==e||ve!==t?(Gl=null,Ll=kt()+500,Dn(e,t)):Nn=Bn(e,t);e:do try{if(Ne!==0&&ye!==null){t=ye;var c=Et;t:switch(Ne){case 1:Ne=0,Et=null,On(e,t,c,1);break;case 2:case 9:if(tu(c)){Ne=0,Et=null,Qd(t);break}t=function(){Ne!==2&&Ne!==9||Le!==e||(Ne=7),Yt(e)},c.then(t,t);break e;case 3:Ne=7;break e;case 4:Ne=5;break e;case 7:tu(c)?(Ne=0,Et=null,Qd(t)):(Ne=0,Et=null,On(e,t,c,7));break;case 5:var g=null;switch(ye.tag){case 26:g=ye.memoizedState;case 5:case 27:var b=ye;if(!g||Tm(g)){Ne=0,Et=null;var x=b.sibling;if(x!==null)ye=x;else{var R=b.return;R!==null?(ye=R,wl(R)):ye=null}break t}}Ne=0,Et=null,On(e,t,c,5);break;case 6:Ne=0,Et=null,On(e,t,c,6);break;case 8:Wr(),ze=6;break e;default:throw Error(r(462))}}rg();break}catch(L){kd(e,L)}while(!0);return Wt=za=null,O.H=n,O.A=s,_e=a,ye!==null?0:(Le=null,ve=0,ll(),ze)}function rg(){for(;ye!==null&&!Rf();)zd(ye)}function zd(e){var t=yd(e.alternate,e,sa);e.memoizedProps=e.pendingProps,t===null?wl(e):ye=t}function Qd(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=ud(a,t,t.pendingProps,t.type,void 0,ve);break;case 11:t=ud(a,t,t.pendingProps,t.type.render,t.ref,ve);break;case 5:gr(t);default:bd(a,t),t=ye=Yc(t,sa),t=yd(a,t,sa)}e.memoizedProps=e.pendingProps,t===null?wl(e):ye=t}function On(e,t,a,n){Wt=za=null,gr(t),Mn=null,yi=0;var s=t.return;try{if(Kp(e,s,t,a,ve)){ze=1,Rl(e,qt(a,e.current)),ye=null;return}}catch(c){if(s!==null)throw ye=s,c;ze=1,Rl(e,qt(a,e.current)),ye=null;return}t.flags&32768?(Te||n===1?e=!0:Nn||(ve&536870912)!==0?e=!1:(Sa=e=!0,(n===2||n===9||n===3||n===6)&&(n=jt.current,n!==null&&n.tag===13&&(n.flags|=16384))),Yd(t,e)):wl(t)}function wl(e){var t=e;do{if((t.flags&32768)!==0){Yd(t,Sa);return}e=t.return;var a=Wp(t.alternate,t,sa);if(a!==null){ye=a;return}if(t=t.sibling,t!==null){ye=t;return}ye=t=e}while(t!==null);ze===0&&(ze=5)}function Yd(e,t){do{var a=Fp(e.alternate,e);if(a!==null){a.flags&=32767,ye=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ye=e;return}ye=e=a}while(e!==null);ze=6,ye=null}function Vd(e,t,a,n,s,c,g,b,x){e.cancelPendingCommit=null;do Hl();while(nt!==0);if((_e&6)!==0)throw Error(r(327));if(t!==null){if(t===e.current)throw Error(r(177));if(c=t.lanes|t.childLanes,c|=Qs,Hf(e,a,c,g,b,x),e===Le&&(ye=Le=null,ve=0),Rn=t,Ta=e,qn=a,Xr=c,Kr=s,Gd=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,dg(Qi,function(){return Zd(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=O.T,O.T=null,s=$.p,$.p=2,g=_e,_e|=4;try{eg(e,t,a)}finally{_e=g,$.p=s,O.T=n}}nt=1,Jd(),Pd(),Xd()}}function Jd(){if(nt===1){nt=0;var e=Ta,t=Rn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=O.T,O.T=null;var n=$.p;$.p=2;var s=_e;_e|=4;try{Rd(t,e);var c=fo,g=Lc(e.containerInfo),b=c.focusedElem,x=c.selectionRange;if(g!==b&&b&&b.ownerDocument&&jc(b.ownerDocument.documentElement,b)){if(x!==null&&Hs(b)){var R=x.start,L=x.end;if(L===void 0&&(L=R),"selectionStart"in b)b.selectionStart=R,b.selectionEnd=Math.min(L,b.value.length);else{var U=b.ownerDocument||document,q=U&&U.defaultView||window;if(q.getSelection){var D=q.getSelection(),re=b.textContent.length,ne=Math.min(x.start,re),qe=x.end===void 0?ne:Math.min(x.end,re);!D.extend&&ne>qe&&(g=qe,qe=ne,ne=g);var _=Ic(b,ne),M=Ic(b,qe);if(_&&M&&(D.rangeCount!==1||D.anchorNode!==_.node||D.anchorOffset!==_.offset||D.focusNode!==M.node||D.focusOffset!==M.offset)){var C=U.createRange();C.setStart(_.node,_.offset),D.removeAllRanges(),ne>qe?(D.addRange(C),D.extend(M.node,M.offset)):(C.setEnd(M.node,M.offset),D.addRange(C))}}}}for(U=[],D=b;D=D.parentNode;)D.nodeType===1&&U.push({element:D,left:D.scrollLeft,top:D.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<U.length;b++){var G=U[b];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}Zl=!!mo,fo=mo=null}finally{_e=s,$.p=n,O.T=a}}e.current=t,nt=2}}function Pd(){if(nt===2){nt=0;var e=Ta,t=Rn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=O.T,O.T=null;var n=$.p;$.p=2;var s=_e;_e|=4;try{Td(e,t.alternate,t)}finally{_e=s,$.p=n,O.T=a}}nt=3}}function Xd(){if(nt===4||nt===3){nt=0,qf();var e=Ta,t=Rn,a=qn,n=Gd;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?nt=5:(nt=0,Rn=Ta=null,Kd(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(Ea=null),bs(a),t=t.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot($n,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=O.T,s=$.p,$.p=2,O.T=null;try{for(var c=e.onRecoverableError,g=0;g<n.length;g++){var b=n[g];c(b.value,{componentStack:b.stack})}}finally{O.T=t,$.p=s}}(qn&3)!==0&&Hl(),Yt(e),s=e.pendingLanes,(a&4194090)!==0&&(s&42)!==0?e===Zr?Ti++:(Ti=0,Zr=e):Ti=0,_i(0)}}function Kd(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,li(t)))}function Hl(e){return Jd(),Pd(),Xd(),Zd()}function Zd(){if(nt!==5)return!1;var e=Ta,t=Xr;Xr=0;var a=bs(qn),n=O.T,s=$.p;try{$.p=32>a?32:a,O.T=null,a=Kr,Kr=null;var c=Ta,g=qn;if(nt=0,Rn=Ta=null,qn=0,(_e&6)!==0)throw Error(r(331));var b=_e;if(_e|=4,jd(c.current),Dd(c,c.current,g,a),_e=b,_i(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot($n,c)}catch{}return!0}finally{$.p=s,O.T=n,Kd(e,t)}}function Wd(e,t,a){t=qt(a,t),t=Rr(e.stateNode,t,2),e=ga(e,t,2),e!==null&&(zn(e,2),Yt(e))}function Ie(e,t,a){if(e.tag===3)Wd(e,e,a);else for(;t!==null;){if(t.tag===3){Wd(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ea===null||!Ea.has(n))){e=qt(a,e),a=ad(2),n=ga(t,a,2),n!==null&&(nd(a,n,t,e),zn(n,2),Yt(n));break}}t=t.return}}function to(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new ng;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(a)||(Yr=!0,s.add(a),e=og.bind(null,e,t,a),t.then(e,e))}function og(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Le===e&&(ve&a)===a&&(ze===4||ze===3&&(ve&62914560)===ve&&300>kt()-Pr?(_e&2)===0&&Dn(e,0):Vr|=a,Cn===ve&&(Cn=0)),Yt(e)}function Fd(e,t){t===0&&(t=Xo()),e=fn(e,t),e!==null&&(zn(e,t),Yt(e))}function cg(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Fd(e,a)}function ug(e,t){var a=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(a=s.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(r(314))}n!==null&&n.delete(t),Fd(e,a)}function dg(e,t){return ps(e,t)}var kl=null,In=null,ao=!1,$l=!1,no=!1,Ka=0;function Yt(e){e!==In&&e.next===null&&(In===null?kl=In=e:In=In.next=e),$l=!0,ao||(ao=!0,fg())}function _i(e,t){if(!no&&$l){no=!0;do for(var a=!1,n=kl;n!==null;){if(e!==0){var s=n.pendingLanes;if(s===0)var c=0;else{var g=n.suspendedLanes,b=n.pingedLanes;c=(1<<31-vt(42|e)+1)-1,c&=s&~(g&~b),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(a=!0,nm(n,c))}else c=ve,c=Ji(n,n===Le?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(c&3)===0||Bn(n,c)||(a=!0,nm(n,c));n=n.next}while(a);no=!1}}function mg(){em()}function em(){$l=ao=!1;var e=0;Ka!==0&&(Ag()&&(e=Ka),Ka=0);for(var t=kt(),a=null,n=kl;n!==null;){var s=n.next,c=tm(n,t);c===0?(n.next=null,a===null?kl=s:a.next=s,s===null&&(In=a)):(a=n,(e!==0||(c&3)!==0)&&($l=!0)),n=s}_i(e)}function tm(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var g=31-vt(c),b=1<<g,x=s[g];x===-1?((b&a)===0||(b&n)!==0)&&(s[g]=wf(b,t)):x<=t&&(e.expiredLanes|=b),c&=~b}if(t=Le,a=ve,a=Ji(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===t&&(Ne===2||Ne===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&gs(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Bn(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&gs(n),bs(a)){case 2:case 8:a=Vo;break;case 32:a=Qi;break;case 268435456:a=Jo;break;default:a=Qi}return n=am.bind(null,e),a=ps(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&gs(n),e.callbackPriority=2,e.callbackNode=null,2}function am(e,t){if(nt!==0&&nt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Hl()&&e.callbackNode!==a)return null;var n=ve;return n=Ji(e,e===Le?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(wd(e,n,t),tm(e,kt()),e.callbackNode!=null&&e.callbackNode===a?am.bind(null,e):null)}function nm(e,t){if(Hl())return null;wd(e,t,!0)}function fg(){Mg(function(){(_e&6)!==0?ps(Yo,mg):em()})}function io(){return Ka===0&&(Ka=Po()),Ka}function im(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Wi(""+e)}function lm(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function pg(e,t,a,n,s){if(t==="submit"&&a&&a.stateNode===s){var c=im((s[dt]||null).action),g=n.submitter;g&&(t=(t=g[dt]||null)?im(t.formAction):g.getAttribute("formAction"),t!==null&&(c=t,g=null));var b=new al("action","action",null,n,s);e.push({event:b,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Ka!==0){var x=g?lm(s,g):new FormData(s);Er(a,{pending:!0,data:x,method:s.method,action:c},null,x)}}else typeof c=="function"&&(b.preventDefault(),x=g?lm(s,g):new FormData(s),Er(a,{pending:!0,data:x,method:s.method,action:c},c,x))},currentTarget:s}]})}}for(var lo=0;lo<zs.length;lo++){var so=zs[lo],gg=so.toLowerCase(),yg=so[0].toUpperCase()+so.slice(1);Ut(gg,"on"+yg)}Ut(wc,"onAnimationEnd"),Ut(Hc,"onAnimationIteration"),Ut(kc,"onAnimationStart"),Ut("dblclick","onDoubleClick"),Ut("focusin","onFocus"),Ut("focusout","onBlur"),Ut(Ip,"onTransitionRun"),Ut(jp,"onTransitionStart"),Ut(Lp,"onTransitionCancel"),Ut($c,"onTransitionEnd"),an("onMouseEnter",["mouseout","mouseover"]),an("onMouseLeave",["mouseout","mouseover"]),an("onPointerEnter",["pointerout","pointerover"]),an("onPointerLeave",["pointerout","pointerover"]),ja("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ja("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ja("onBeforeInput",["compositionend","keypress","textInput","paste"]),ja("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ja("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ja("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ni));function sm(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],s=n.event;n=n.listeners;e:{var c=void 0;if(t)for(var g=n.length-1;0<=g;g--){var b=n[g],x=b.instance,R=b.currentTarget;if(b=b.listener,x!==c&&s.isPropagationStopped())break e;c=b,s.currentTarget=R;try{c(s)}catch(L){Cl(L)}s.currentTarget=null,c=x}else for(g=0;g<n.length;g++){if(b=n[g],x=b.instance,R=b.currentTarget,b=b.listener,x!==c&&s.isPropagationStopped())break e;c=b,s.currentTarget=R;try{c(s)}catch(L){Cl(L)}s.currentTarget=null,c=x}}}}function he(e,t){var a=t[vs];a===void 0&&(a=t[vs]=new Set);var n=e+"__bubble";a.has(n)||(rm(t,e,2,!1),a.add(n))}function ro(e,t,a){var n=0;t&&(n|=4),rm(a,e,n,t)}var Bl="_reactListening"+Math.random().toString(36).slice(2);function oo(e){if(!e[Bl]){e[Bl]=!0,ec.forEach(function(a){a!=="selectionchange"&&(hg.has(a)||ro(a,!1,e),ro(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bl]||(t[Bl]=!0,ro("selectionchange",!1,t))}}function rm(e,t,a,n){switch(Dm(t)){case 2:var s=Qg;break;case 8:s=Yg;break;default:s=Mo}a=s.bind(null,t,a,e),s=void 0,!qs||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,a,{capture:!0,passive:s}):e.addEventListener(t,a,!0):s!==void 0?e.addEventListener(t,a,{passive:s}):e.addEventListener(t,a,!1)}function co(e,t,a,n,s){var c=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var g=n.tag;if(g===3||g===4){var b=n.stateNode.containerInfo;if(b===s)break;if(g===4)for(g=n.return;g!==null;){var x=g.tag;if((x===3||x===4)&&g.stateNode.containerInfo===s)return;g=g.return}for(;b!==null;){if(g=Fa(b),g===null)return;if(x=g.tag,x===5||x===6||x===26||x===27){n=c=g;continue e}b=b.parentNode}}n=n.return}pc(function(){var R=c,L=Cs(a),U=[];e:{var q=Bc.get(e);if(q!==void 0){var D=al,re=e;switch(e){case"keypress":if(el(a)===0)break e;case"keydown":case"keyup":D=dp;break;case"focusin":re="focus",D=js;break;case"focusout":re="blur",D=js;break;case"beforeblur":case"afterblur":D=js;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=hc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=Ff;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=pp;break;case wc:case Hc:case kc:D=ap;break;case $c:D=yp;break;case"scroll":case"scrollend":D=Zf;break;case"wheel":D=bp;break;case"copy":case"cut":case"paste":D=ip;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=vc;break;case"toggle":case"beforetoggle":D=xp}var ne=(t&4)!==0,qe=!ne&&(e==="scroll"||e==="scrollend"),_=ne?q!==null?q+"Capture":null:q;ne=[];for(var M=R,C;M!==null;){var G=M;if(C=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||C===null||_===null||(G=Vn(M,_),G!=null&&ne.push(Ci(M,G,C))),qe)break;M=M.return}0<ne.length&&(q=new D(q,re,null,a,L),U.push({event:q,listeners:ne}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",D=e==="mouseout"||e==="pointerout",q&&a!==Ns&&(re=a.relatedTarget||a.fromElement)&&(Fa(re)||re[Wa]))break e;if((D||q)&&(q=L.window===L?L:(q=L.ownerDocument)?q.defaultView||q.parentWindow:window,D?(re=a.relatedTarget||a.toElement,D=R,re=re?Fa(re):null,re!==null&&(qe=u(re),ne=re.tag,re!==qe||ne!==5&&ne!==27&&ne!==6)&&(re=null)):(D=null,re=R),D!==re)){if(ne=hc,G="onMouseLeave",_="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(ne=vc,G="onPointerLeave",_="onPointerEnter",M="pointer"),qe=D==null?q:Yn(D),C=re==null?q:Yn(re),q=new ne(G,M+"leave",D,a,L),q.target=qe,q.relatedTarget=C,G=null,Fa(L)===R&&(ne=new ne(_,M+"enter",re,a,L),ne.target=C,ne.relatedTarget=qe,G=ne),qe=G,D&&re)t:{for(ne=D,_=re,M=0,C=ne;C;C=jn(C))M++;for(C=0,G=_;G;G=jn(G))C++;for(;0<M-C;)ne=jn(ne),M--;for(;0<C-M;)_=jn(_),C--;for(;M--;){if(ne===_||_!==null&&ne===_.alternate)break t;ne=jn(ne),_=jn(_)}ne=null}else ne=null;D!==null&&om(U,q,D,ne,!1),re!==null&&qe!==null&&om(U,qe,re,ne,!0)}}e:{if(q=R?Yn(R):window,D=q.nodeName&&q.nodeName.toLowerCase(),D==="select"||D==="input"&&q.type==="file")var K=Nc;else if(Tc(q))if(Cc)K=qp;else{K=Cp;var fe=Np}else D=q.nodeName,!D||D.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?R&&_s(R.elementType)&&(K=Nc):K=Rp;if(K&&(K=K(e,R))){_c(U,K,a,L);break e}fe&&fe(e,q,R),e==="focusout"&&R&&q.type==="number"&&R.memoizedProps.value!=null&&Ts(q,"number",q.value)}switch(fe=R?Yn(R):window,e){case"focusin":(Tc(fe)||fe.contentEditable==="true")&&(un=fe,ks=R,ei=null);break;case"focusout":ei=ks=un=null;break;case"mousedown":$s=!0;break;case"contextmenu":case"mouseup":case"dragend":$s=!1,Gc(U,a,L);break;case"selectionchange":if(Op)break;case"keydown":case"keyup":Gc(U,a,L)}var ee;if(Gs)e:{switch(e){case"compositionstart":var le="onCompositionStart";break e;case"compositionend":le="onCompositionEnd";break e;case"compositionupdate":le="onCompositionUpdate";break e}le=void 0}else cn?Mc(e,a)&&(le="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(le="onCompositionStart");le&&(xc&&a.locale!=="ko"&&(cn||le!=="onCompositionStart"?le==="onCompositionEnd"&&cn&&(ee=gc()):(da=L,Ds="value"in da?da.value:da.textContent,cn=!0)),fe=zl(R,le),0<fe.length&&(le=new bc(le,e,null,a,L),U.push({event:le,listeners:fe}),ee?le.data=ee:(ee=Ec(a),ee!==null&&(le.data=ee)))),(ee=Sp?Mp(e,a):Ep(e,a))&&(le=zl(R,"onBeforeInput"),0<le.length&&(fe=new bc("onBeforeInput","beforeinput",null,a,L),U.push({event:fe,listeners:le}),fe.data=ee)),pg(U,e,R,a,L)}sm(U,t)})}function Ci(e,t,a){return{instance:e,listener:t,currentTarget:a}}function zl(e,t){for(var a=t+"Capture",n=[];e!==null;){var s=e,c=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||c===null||(s=Vn(e,a),s!=null&&n.unshift(Ci(e,s,c)),s=Vn(e,t),s!=null&&n.push(Ci(e,s,c))),e.tag===3)return n;e=e.return}return[]}function jn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function om(e,t,a,n,s){for(var c=t._reactName,g=[];a!==null&&a!==n;){var b=a,x=b.alternate,R=b.stateNode;if(b=b.tag,x!==null&&x===n)break;b!==5&&b!==26&&b!==27||R===null||(x=R,s?(R=Vn(a,c),R!=null&&g.unshift(Ci(a,R,x))):s||(R=Vn(a,c),R!=null&&g.push(Ci(a,R,x)))),a=a.return}g.length!==0&&e.push({event:t,listeners:g})}var bg=/\r\n?/g,vg=/\u0000|\uFFFD/g;function cm(e){return(typeof e=="string"?e:""+e).replace(bg,`
`).replace(vg,"")}function um(e,t){return t=cm(t),cm(e)===t}function Ql(){}function Re(e,t,a,n,s,c){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||sn(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&sn(e,""+n);break;case"className":Xi(e,"class",n);break;case"tabIndex":Xi(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Xi(e,a,n);break;case"style":mc(e,n,c);break;case"data":if(t!=="object"){Xi(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=Wi(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(a==="formAction"?(t!=="input"&&Re(e,t,"name",s.name,s,null),Re(e,t,"formEncType",s.formEncType,s,null),Re(e,t,"formMethod",s.formMethod,s,null),Re(e,t,"formTarget",s.formTarget,s,null)):(Re(e,t,"encType",s.encType,s,null),Re(e,t,"method",s.method,s,null),Re(e,t,"target",s.target,s,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=Wi(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=Ql);break;case"onScroll":n!=null&&he("scroll",e);break;case"onScrollEnd":n!=null&&he("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(r(61));if(a=n.__html,a!=null){if(s.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=Wi(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":he("beforetoggle",e),he("toggle",e),Pi(e,"popover",n);break;case"xlinkActuate":Jt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Jt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Jt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Jt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Jt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Jt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Jt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Jt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Jt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":Pi(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Xf.get(a)||a,Pi(e,a,n))}}function uo(e,t,a,n,s,c){switch(a){case"style":mc(e,n,c);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(r(61));if(a=n.__html,a!=null){if(s.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof n=="string"?sn(e,n):(typeof n=="number"||typeof n=="bigint")&&sn(e,""+n);break;case"onScroll":n!=null&&he("scroll",e);break;case"onScrollEnd":n!=null&&he("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Ql);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tc.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(s=a.endsWith("Capture"),t=a.slice(2,s?a.length-7:void 0),c=e[dt]||null,c=c!=null?c[a]:null,typeof c=="function"&&e.removeEventListener(t,c,s),typeof n=="function")){typeof c!="function"&&c!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,s);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):Pi(e,a,n)}}}function it(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":he("error",e),he("load",e);var n=!1,s=!1,c;for(c in a)if(a.hasOwnProperty(c)){var g=a[c];if(g!=null)switch(c){case"src":n=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Re(e,t,c,g,a,null)}}s&&Re(e,t,"srcSet",a.srcSet,a,null),n&&Re(e,t,"src",a.src,a,null);return;case"input":he("invalid",e);var b=c=g=s=null,x=null,R=null;for(n in a)if(a.hasOwnProperty(n)){var L=a[n];if(L!=null)switch(n){case"name":s=L;break;case"type":g=L;break;case"checked":x=L;break;case"defaultChecked":R=L;break;case"value":c=L;break;case"defaultValue":b=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(137,t));break;default:Re(e,t,n,L,a,null)}}oc(e,c,b,x,R,g,s,!1),Ki(e);return;case"select":he("invalid",e),n=g=c=null;for(s in a)if(a.hasOwnProperty(s)&&(b=a[s],b!=null))switch(s){case"value":c=b;break;case"defaultValue":g=b;break;case"multiple":n=b;default:Re(e,t,s,b,a,null)}t=c,a=g,e.multiple=!!n,t!=null?ln(e,!!n,t,!1):a!=null&&ln(e,!!n,a,!0);return;case"textarea":he("invalid",e),c=s=n=null;for(g in a)if(a.hasOwnProperty(g)&&(b=a[g],b!=null))switch(g){case"value":n=b;break;case"defaultValue":s=b;break;case"children":c=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:Re(e,t,g,b,a,null)}uc(e,n,s,c),Ki(e);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(n=a[x],n!=null))switch(x){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Re(e,t,x,n,a,null)}return;case"dialog":he("beforetoggle",e),he("toggle",e),he("cancel",e),he("close",e);break;case"iframe":case"object":he("load",e);break;case"video":case"audio":for(n=0;n<Ni.length;n++)he(Ni[n],e);break;case"image":he("error",e),he("load",e);break;case"details":he("toggle",e);break;case"embed":case"source":case"link":he("error",e),he("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in a)if(a.hasOwnProperty(R)&&(n=a[R],n!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Re(e,t,R,n,a,null)}return;default:if(_s(t)){for(L in a)a.hasOwnProperty(L)&&(n=a[L],n!==void 0&&uo(e,t,L,n,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(n=a[b],n!=null&&Re(e,t,b,n,a,null))}function xg(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,c=null,g=null,b=null,x=null,R=null,L=null;for(D in a){var U=a[D];if(a.hasOwnProperty(D)&&U!=null)switch(D){case"checked":break;case"value":break;case"defaultValue":x=U;default:n.hasOwnProperty(D)||Re(e,t,D,null,n,U)}}for(var q in n){var D=n[q];if(U=a[q],n.hasOwnProperty(q)&&(D!=null||U!=null))switch(q){case"type":c=D;break;case"name":s=D;break;case"checked":R=D;break;case"defaultChecked":L=D;break;case"value":g=D;break;case"defaultValue":b=D;break;case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(137,t));break;default:D!==U&&Re(e,t,q,D,n,U)}}Es(e,g,b,x,R,L,c,s);return;case"select":D=g=b=q=null;for(c in a)if(x=a[c],a.hasOwnProperty(c)&&x!=null)switch(c){case"value":break;case"multiple":D=x;default:n.hasOwnProperty(c)||Re(e,t,c,null,n,x)}for(s in n)if(c=n[s],x=a[s],n.hasOwnProperty(s)&&(c!=null||x!=null))switch(s){case"value":q=c;break;case"defaultValue":b=c;break;case"multiple":g=c;default:c!==x&&Re(e,t,s,c,n,x)}t=b,a=g,n=D,q!=null?ln(e,!!a,q,!1):!!n!=!!a&&(t!=null?ln(e,!!a,t,!0):ln(e,!!a,a?[]:"",!1));return;case"textarea":D=q=null;for(b in a)if(s=a[b],a.hasOwnProperty(b)&&s!=null&&!n.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Re(e,t,b,null,n,s)}for(g in n)if(s=n[g],c=a[g],n.hasOwnProperty(g)&&(s!=null||c!=null))switch(g){case"value":q=s;break;case"defaultValue":D=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(r(91));break;default:s!==c&&Re(e,t,g,s,n,c)}cc(e,q,D);return;case"option":for(var re in a)if(q=a[re],a.hasOwnProperty(re)&&q!=null&&!n.hasOwnProperty(re))switch(re){case"selected":e.selected=!1;break;default:Re(e,t,re,null,n,q)}for(x in n)if(q=n[x],D=a[x],n.hasOwnProperty(x)&&q!==D&&(q!=null||D!=null))switch(x){case"selected":e.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Re(e,t,x,q,n,D)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ne in a)q=a[ne],a.hasOwnProperty(ne)&&q!=null&&!n.hasOwnProperty(ne)&&Re(e,t,ne,null,n,q);for(R in n)if(q=n[R],D=a[R],n.hasOwnProperty(R)&&q!==D&&(q!=null||D!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,t));break;default:Re(e,t,R,q,n,D)}return;default:if(_s(t)){for(var qe in a)q=a[qe],a.hasOwnProperty(qe)&&q!==void 0&&!n.hasOwnProperty(qe)&&uo(e,t,qe,void 0,n,q);for(L in n)q=n[L],D=a[L],!n.hasOwnProperty(L)||q===D||q===void 0&&D===void 0||uo(e,t,L,q,n,D);return}}for(var _ in a)q=a[_],a.hasOwnProperty(_)&&q!=null&&!n.hasOwnProperty(_)&&Re(e,t,_,null,n,q);for(U in n)q=n[U],D=a[U],!n.hasOwnProperty(U)||q===D||q==null&&D==null||Re(e,t,U,q,n,D)}var mo=null,fo=null;function Yl(e){return e.nodeType===9?e:e.ownerDocument}function dm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function po(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var go=null;function Ag(){var e=window.event;return e&&e.type==="popstate"?e===go?!1:(go=e,!0):(go=null,!1)}var fm=typeof setTimeout=="function"?setTimeout:void 0,Sg=typeof clearTimeout=="function"?clearTimeout:void 0,pm=typeof Promise=="function"?Promise:void 0,Mg=typeof queueMicrotask=="function"?queueMicrotask:typeof pm<"u"?function(e){return pm.resolve(null).then(e).catch(Eg)}:fm;function Eg(e){setTimeout(function(){throw e})}function Na(e){return e==="head"}function gm(e,t){var a=t,n=0,s=0;do{var c=a.nextSibling;if(e.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(0<n&&8>n){a=n;var g=e.ownerDocument;if(a&1&&Ri(g.documentElement),a&2&&Ri(g.body),a&4)for(a=g.head,Ri(a),g=a.firstChild;g;){var b=g.nextSibling,x=g.nodeName;g[Qn]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&g.rel.toLowerCase()==="stylesheet"||a.removeChild(g),g=b}}if(s===0){e.removeChild(c),Ui(t);return}s--}else a==="$"||a==="$?"||a==="$!"?s++:n=a.charCodeAt(0)-48;else n=0;a=c}while(a);Ui(t)}function yo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":yo(a),xs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Tg(e,t,a,n){for(;e.nodeType===1;){var s=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[Qn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var c=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=Ht(e.nextSibling),e===null)break}return null}function _g(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ht(e.nextSibling),e===null))return null;return e}function ho(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Ng(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Ht(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var bo=null;function ym(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function hm(e,t,a){switch(t=Yl(a),e){case"html":if(e=t.documentElement,!e)throw Error(r(452));return e;case"head":if(e=t.head,!e)throw Error(r(453));return e;case"body":if(e=t.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Ri(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);xs(e)}var Gt=new Map,bm=new Set;function Vl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ra=$.d;$.d={f:Cg,r:Rg,D:qg,C:Dg,L:Og,m:Ig,X:Lg,S:jg,M:Gg};function Cg(){var e=ra.f(),t=Ul();return e||t}function Rg(e){var t=en(e);t!==null&&t.tag===5&&t.type==="form"?wu(t):ra.r(e)}var Ln=typeof document>"u"?null:document;function vm(e,t,a){var n=Ln;if(n&&typeof t=="string"&&t){var s=Rt(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof a=="string"&&(s+='[crossorigin="'+a+'"]'),bm.has(s)||(bm.add(s),e={rel:e,crossOrigin:a,href:t},n.querySelector(s)===null&&(t=n.createElement("link"),it(t,"link",e),Ke(t),n.head.appendChild(t)))}}function qg(e){ra.D(e),vm("dns-prefetch",e,null)}function Dg(e,t){ra.C(e,t),vm("preconnect",e,t)}function Og(e,t,a){ra.L(e,t,a);var n=Ln;if(n&&e&&t){var s='link[rel="preload"][as="'+Rt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(s+='[imagesrcset="'+Rt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(s+='[imagesizes="'+Rt(a.imageSizes)+'"]')):s+='[href="'+Rt(e)+'"]';var c=s;switch(t){case"style":c=Gn(e);break;case"script":c=Un(e)}Gt.has(c)||(e=v({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Gt.set(c,e),n.querySelector(s)!==null||t==="style"&&n.querySelector(qi(c))||t==="script"&&n.querySelector(Di(c))||(t=n.createElement("link"),it(t,"link",e),Ke(t),n.head.appendChild(t)))}}function Ig(e,t){ra.m(e,t);var a=Ln;if(a&&e){var n=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+Rt(n)+'"][href="'+Rt(e)+'"]',c=s;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=Un(e)}if(!Gt.has(c)&&(e=v({rel:"modulepreload",href:e},t),Gt.set(c,e),a.querySelector(s)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Di(c)))return}n=a.createElement("link"),it(n,"link",e),Ke(n),a.head.appendChild(n)}}}function jg(e,t,a){ra.S(e,t,a);var n=Ln;if(n&&e){var s=tn(n).hoistableStyles,c=Gn(e);t=t||"default";var g=s.get(c);if(!g){var b={loading:0,preload:null};if(g=n.querySelector(qi(c)))b.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Gt.get(c))&&vo(e,a);var x=g=n.createElement("link");Ke(x),it(x,"link",e),x._p=new Promise(function(R,L){x.onload=R,x.onerror=L}),x.addEventListener("load",function(){b.loading|=1}),x.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Jl(g,t,n)}g={type:"stylesheet",instance:g,count:1,state:b},s.set(c,g)}}}function Lg(e,t){ra.X(e,t);var a=Ln;if(a&&e){var n=tn(a).hoistableScripts,s=Un(e),c=n.get(s);c||(c=a.querySelector(Di(s)),c||(e=v({src:e,async:!0},t),(t=Gt.get(s))&&xo(e,t),c=a.createElement("script"),Ke(c),it(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},n.set(s,c))}}function Gg(e,t){ra.M(e,t);var a=Ln;if(a&&e){var n=tn(a).hoistableScripts,s=Un(e),c=n.get(s);c||(c=a.querySelector(Di(s)),c||(e=v({src:e,async:!0,type:"module"},t),(t=Gt.get(s))&&xo(e,t),c=a.createElement("script"),Ke(c),it(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},n.set(s,c))}}function xm(e,t,a,n){var s=(s=ce.current)?Vl(s):null;if(!s)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Gn(a.href),a=tn(s).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Gn(a.href);var c=tn(s).hoistableStyles,g=c.get(e);if(g||(s=s.ownerDocument||s,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,g),(c=s.querySelector(qi(e)))&&!c._p&&(g.instance=c,g.state.loading=5),Gt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Gt.set(e,a),c||Ug(s,e,a,g.state))),t&&n===null)throw Error(r(528,""));return g}if(t&&n!==null)throw Error(r(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Un(a),a=tn(s).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Gn(e){return'href="'+Rt(e)+'"'}function qi(e){return'link[rel="stylesheet"]['+e+"]"}function Am(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function Ug(e,t,a,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),it(t,"link",a),Ke(t),e.head.appendChild(t))}function Un(e){return'[src="'+Rt(e)+'"]'}function Di(e){return"script[async]"+e}function Sm(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+Rt(a.href)+'"]');if(n)return t.instance=n,Ke(n),n;var s=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),Ke(n),it(n,"style",s),Jl(n,a.precedence,e),t.instance=n;case"stylesheet":s=Gn(a.href);var c=e.querySelector(qi(s));if(c)return t.state.loading|=4,t.instance=c,Ke(c),c;n=Am(a),(s=Gt.get(s))&&vo(n,s),c=(e.ownerDocument||e).createElement("link"),Ke(c);var g=c;return g._p=new Promise(function(b,x){g.onload=b,g.onerror=x}),it(c,"link",n),t.state.loading|=4,Jl(c,a.precedence,e),t.instance=c;case"script":return c=Un(a.src),(s=e.querySelector(Di(c)))?(t.instance=s,Ke(s),s):(n=a,(s=Gt.get(c))&&(n=v({},a),xo(n,s)),e=e.ownerDocument||e,s=e.createElement("script"),Ke(s),it(s,"link",n),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(r(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,Jl(n,a.precedence,e));return t.instance}function Jl(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=n.length?n[n.length-1]:null,c=s,g=0;g<n.length;g++){var b=n[g];if(b.dataset.precedence===t)c=b;else if(c!==s)break}c?c.parentNode.insertBefore(e,c.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function vo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function xo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Pl=null;function Mm(e,t,a){if(Pl===null){var n=new Map,s=Pl=new Map;s.set(a,n)}else s=Pl,n=s.get(a),n||(n=new Map,s.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),s=0;s<a.length;s++){var c=a[s];if(!(c[Qn]||c[st]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var g=c.getAttribute(t)||"";g=e+g;var b=n.get(g);b?b.push(c):n.set(g,[c])}}return n}function Em(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function wg(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Tm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Oi=null;function Hg(){}function kg(e,t,a){if(Oi===null)throw Error(r(475));var n=Oi;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var s=Gn(a.href),c=e.querySelector(qi(s));if(c){e=c._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(n.count++,n=Xl.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=c,Ke(c);return}c=e.ownerDocument||e,a=Am(a),(s=Gt.get(s))&&vo(a,s),c=c.createElement("link"),Ke(c);var g=c;g._p=new Promise(function(b,x){g.onload=b,g.onerror=x}),it(c,"link",a),t.instance=c}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(n.count++,t=Xl.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}function $g(){if(Oi===null)throw Error(r(475));var e=Oi;return e.stylesheets&&e.count===0&&Ao(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&Ao(e,e.stylesheets),e.unsuspend){var n=e.unsuspend;e.unsuspend=null,n()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Xl(){if(this.count--,this.count===0){if(this.stylesheets)Ao(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Kl=null;function Ao(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Kl=new Map,t.forEach(Bg,e),Kl=null,Xl.call(e))}function Bg(e,t){if(!(t.state.loading&4)){var a=Kl.get(e);if(a)var n=a.get(null);else{a=new Map,Kl.set(e,a);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<s.length;c++){var g=s[c];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(a.set(g.dataset.precedence,g),n=g)}n&&a.set(null,n)}s=t.instance,g=s.getAttribute("data-precedence"),c=a.get(g)||n,c===n&&a.set(null,s),a.set(g,s),this.count++,n=Xl.bind(this),s.addEventListener("load",n),s.addEventListener("error",n),c?c.parentNode.insertBefore(s,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var Ii={$$typeof:oe,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function zg(e,t,a,n,s,c,g,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ys(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ys(0),this.hiddenUpdates=ys(null),this.identifierPrefix=n,this.onUncaughtError=s,this.onCaughtError=c,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function _m(e,t,a,n,s,c,g,b,x,R,L,U){return e=new zg(e,t,a,g,b,x,R,U),t=1,c===!0&&(t|=24),c=At(3,null,null,t),e.current=c,c.stateNode=e,t=tr(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:n,isDehydrated:a,cache:t},lr(c),e}function Nm(e){return e?(e=pn,e):pn}function Cm(e,t,a,n,s,c){s=Nm(s),n.context===null?n.context=s:n.pendingContext=s,n=pa(t),n.payload={element:a},c=c===void 0?null:c,c!==null&&(n.callback=c),a=ga(e,n,t),a!==null&&(_t(a,e,t),ci(a,e,t))}function Rm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function So(e,t){Rm(e,t),(e=e.alternate)&&Rm(e,t)}function qm(e){if(e.tag===13){var t=fn(e,67108864);t!==null&&_t(t,e,67108864),So(e,67108864)}}var Zl=!0;function Qg(e,t,a,n){var s=O.T;O.T=null;var c=$.p;try{$.p=2,Mo(e,t,a,n)}finally{$.p=c,O.T=s}}function Yg(e,t,a,n){var s=O.T;O.T=null;var c=$.p;try{$.p=8,Mo(e,t,a,n)}finally{$.p=c,O.T=s}}function Mo(e,t,a,n){if(Zl){var s=Eo(n);if(s===null)co(e,t,n,Wl,a),Om(e,n);else if(Jg(s,e,t,a,n))n.stopPropagation();else if(Om(e,n),t&4&&-1<Vg.indexOf(e)){for(;s!==null;){var c=en(s);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var g=Ia(c.pendingLanes);if(g!==0){var b=c;for(b.pendingLanes|=2,b.entangledLanes|=2;g;){var x=1<<31-vt(g);b.entanglements[1]|=x,g&=~x}Yt(c),(_e&6)===0&&(Ll=kt()+500,_i(0))}}break;case 13:b=fn(c,2),b!==null&&_t(b,c,2),Ul(),So(c,2)}if(c=Eo(n),c===null&&co(e,t,n,Wl,a),c===s)break;s=c}s!==null&&n.stopPropagation()}else co(e,t,n,null,a)}}function Eo(e){return e=Cs(e),To(e)}var Wl=null;function To(e){if(Wl=null,e=Fa(e),e!==null){var t=u(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=m(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Wl=e,null}function Dm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Df()){case Yo:return 2;case Vo:return 8;case Qi:case Of:return 32;case Jo:return 268435456;default:return 32}default:return 32}}var _o=!1,Ca=null,Ra=null,qa=null,ji=new Map,Li=new Map,Da=[],Vg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Om(e,t){switch(e){case"focusin":case"focusout":Ca=null;break;case"dragenter":case"dragleave":Ra=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":ji.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Li.delete(t.pointerId)}}function Gi(e,t,a,n,s,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:c,targetContainers:[s]},t!==null&&(t=en(t),t!==null&&qm(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Jg(e,t,a,n,s){switch(t){case"focusin":return Ca=Gi(Ca,e,t,a,n,s),!0;case"dragenter":return Ra=Gi(Ra,e,t,a,n,s),!0;case"mouseover":return qa=Gi(qa,e,t,a,n,s),!0;case"pointerover":var c=s.pointerId;return ji.set(c,Gi(ji.get(c)||null,e,t,a,n,s)),!0;case"gotpointercapture":return c=s.pointerId,Li.set(c,Gi(Li.get(c)||null,e,t,a,n,s)),!0}return!1}function Im(e){var t=Fa(e.target);if(t!==null){var a=u(t);if(a!==null){if(t=a.tag,t===13){if(t=m(a),t!==null){e.blockedOn=t,kf(e.priority,function(){if(a.tag===13){var n=Tt();n=hs(n);var s=fn(a,n);s!==null&&_t(s,a,n),So(a,n)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Eo(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);Ns=n,a.target.dispatchEvent(n),Ns=null}else return t=en(a),t!==null&&qm(t),e.blockedOn=a,!1;t.shift()}return!0}function jm(e,t,a){Fl(e)&&a.delete(t)}function Pg(){_o=!1,Ca!==null&&Fl(Ca)&&(Ca=null),Ra!==null&&Fl(Ra)&&(Ra=null),qa!==null&&Fl(qa)&&(qa=null),ji.forEach(jm),Li.forEach(jm)}function es(e,t){e.blockedOn===t&&(e.blockedOn=null,_o||(_o=!0,f.unstable_scheduleCallback(f.unstable_NormalPriority,Pg)))}var ts=null;function Lm(e){ts!==e&&(ts=e,f.unstable_scheduleCallback(f.unstable_NormalPriority,function(){ts===e&&(ts=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],s=e[t+2];if(typeof n!="function"){if(To(n||a)===null)continue;break}var c=en(a);c!==null&&(e.splice(t,3),t-=3,Er(c,{pending:!0,data:s,method:a.method,action:n},n,s))}}))}function Ui(e){function t(x){return es(x,e)}Ca!==null&&es(Ca,e),Ra!==null&&es(Ra,e),qa!==null&&es(qa,e),ji.forEach(t),Li.forEach(t);for(var a=0;a<Da.length;a++){var n=Da[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Da.length&&(a=Da[0],a.blockedOn===null);)Im(a),a.blockedOn===null&&Da.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var s=a[n],c=a[n+1],g=s[dt]||null;if(typeof c=="function")g||Lm(a);else if(g){var b=null;if(c&&c.hasAttribute("formAction")){if(s=c,g=c[dt]||null)b=g.formAction;else if(To(s)!==null)continue}else b=g.action;typeof b=="function"?a[n+1]=b:(a.splice(n,3),n-=3),Lm(a)}}}function No(e){this._internalRoot=e}as.prototype.render=No.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));var a=t.current,n=Tt();Cm(a,n,e,t,null,null)},as.prototype.unmount=No.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Cm(e.current,2,null,e,null,null),Ul(),t[Wa]=null}};function as(e){this._internalRoot=e}as.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wo();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Da.length&&t!==0&&t<Da[a].priority;a++);Da.splice(a,0,e),a===0&&Im(e)}};var Gm=i.version;if(Gm!=="19.1.0")throw Error(r(527,Gm,"19.1.0"));$.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(t),e=e!==null?h(e):null,e=e===null?null:e.stateNode,e};var Xg={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ns=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ns.isDisabled&&ns.supportsFiber)try{$n=ns.inject(Xg),bt=ns}catch{}}return Hi.createRoot=function(e,t){if(!o(e))throw Error(r(299));var a=!1,n="",s=Wu,c=Fu,g=ed,b=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(c=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(b=t.unstable_transitionCallbacks)),t=_m(e,1,!1,null,null,a,n,s,c,g,b,null),e[Wa]=t.current,oo(e),new No(t)},Hi.hydrateRoot=function(e,t,a){if(!o(e))throw Error(r(299));var n=!1,s="",c=Wu,g=Fu,b=ed,x=null,R=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(s=a.identifierPrefix),a.onUncaughtError!==void 0&&(c=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(x=a.unstable_transitionCallbacks),a.formState!==void 0&&(R=a.formState)),t=_m(e,1,!0,t,a??null,n,s,c,g,b,x,R),t.context=Nm(null),a=t.current,n=Tt(),n=hs(n),s=pa(n),s.callback=null,ga(a,s,n),a=n,t.current.lanes=a,zn(t,a),Yt(t),e[Wa]=t.current,oo(e),new as(t)},Hi.version="19.1.0",Hi}var Jm;function oy(){if(Jm)return qo.exports;Jm=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(i){console.error(i)}}return f(),qo.exports=ry(),qo.exports}var cy=oy();const uy="modulepreload",dy=function(f){return"/DefenseMagnate/"+f},Pm={},my=function(i,l,r){let o=Promise.resolve();if(l&&l.length>0){let m=function(h){return Promise.all(h.map(v=>Promise.resolve(v).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),y=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=m(l.map(h=>{if(h=dy(h),h in Pm)return;Pm[h]=!0;const v=h.endsWith(".css"),A=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${A}`))return;const T=document.createElement("link");if(T.rel=v?"stylesheet":uy,v||(T.as="script"),T.crossOrigin="",T.href=h,y&&T.setAttribute("nonce",y),document.head.appendChild(T),v)return new Promise((N,I)=>{T.addEventListener("load",N),T.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${h}`)))})}))}function u(m){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=m,window.dispatchEvent(p),!p.defaultPrevented)throw m}return o.then(m=>{for(const p of m||[])p.status==="rejected"&&u(p.reason);return i().catch(u)})},Xm=f=>{let i;const l=new Set,r=(h,v)=>{const A=typeof h=="function"?h(i):h;if(!Object.is(A,i)){const T=i;i=v??(typeof A!="object"||A===null)?A:Object.assign({},i,A),l.forEach(N=>N(i,T))}},o=()=>i,p={setState:r,getState:o,getInitialState:()=>y,subscribe:h=>(l.add(h),()=>l.delete(h))},y=i=f(r,o,p);return p},fy=f=>f?Xm(f):Xm,py=f=>f;function gy(f,i=py){const l=$m.useSyncExternalStore(f.subscribe,()=>i(f.getState()),()=>i(f.getInitialState()));return $m.useDebugValue(l),l}const Km=f=>{const i=fy(f),l=r=>gy(i,r);return Object.assign(l,i),l},yy=f=>f?Km(f):Km;function hy(f){console.log("createGarage called with name:",f);const i={id:`facility-${Date.now()}`,name:f,type:"garage_workshop",description:"A small garage workshop, suitable for basic manufacturing",production_lines:1,max_item_size:"small",storage_capacity:1e3,floor_space:50,used_floor_space:0,purchase_cost:0,operating_cost_per_day:10,current_value:500,traits:[],can_refurbish:["scrap_metal"],manufacturing_bonus:{hand_weapons:1,basic_components:.8},upgrades:[],equipment:[],equipment_capacity:new Map,active_production:[{id:"line-1",productId:null,startGameTime:0,durationHours:0,materials_loaded:!1,labor_assigned:0}],current_storage:{steel:20,plastic:15,aluminum:2,"mechanical-component":30,"small-tube":5,"small-casing":5,"mechanical-assembly":3,damaged_basic_sidearm:3,low_tech_spares:20,basic_electronics:3,machined_parts:5,cleaning_supplies:10},pending_upgrades:[],condition:"operational",utilization_rate:0,last_maintenance:0};return console.log("createGarage returning:",i),i}var z=(f=>(f.RAW_MATERIAL="raw_material",f.SHAPED_MATERIAL="shaped_material",f.ASSEMBLY="assembly",f))(z||{}),xe=(f=>(f.SHAPING="shaping",f.ASSEMBLY="assembly",f.DISASSEMBLY="disassembly",f))(xe||{}),j=(f=>(f.BASIC_MANIPULATION="basic_manipulation",f.PRECISION_MANIPULATION="precision_manipulation",f.HEAVY_MANIPULATION="heavy_manipulation",f.TURNING="turning",f.MILLING="milling",f.DRILLING="drilling",f.BORING="boring",f.GRINDING="grinding",f.CUTTING="cutting",f.WELDING="welding",f.FORMING="forming",f.SURFACE="surface",f.STORAGE="storage",f.HOLDING="holding",f.MEASURING="measuring",f.COOLING="cooling",f.HEATING="heating",f.POWERED="powered",f.MANUAL="manual",f.AUTOMATED="automated",f.COMPUTER_CONTROLLED="computer_controlled",f.CLEAN_ROOM="clean_room",f.HAZMAT="hazmat",f.TEMPERATURE_CONTROLLED="temperature_controlled",f.VACUUM_CAPABLE="vacuum_capable",f.HEAVY_LIFTING="heavy_lifting",f.PRECISION_PLACEMENT="precision_placement",f.MATERIAL_FEED="material_feed",f.QUALITY_CONTROL="quality_control",f.DIMENSIONAL_INSPECTION="dimensional_inspection",f.MATERIAL_TESTING="material_testing",f.CALIBRATION="calibration",f.ELECTRONICS_ASSEMBLY="electronics_assembly",f.SOLDERING="soldering",f.CIRCUIT_TESTING="circuit_testing",f.FIRMWARE_PROGRAMMING="firmware_programming",f.INJECTION_MOLDING="injection_molding",f.CASTING="casting",f.EXTRUSION="extrusion",f.STAMPING="stamping",f.FORGING="forging",f.COMPOSITE_LAYUP="composite_layup",f.CHEMICAL_PROCESSING="chemical_processing",f.CRYSTALLINE_GROWTH="crystalline_growth",f.NANO_FABRICATION="nano_fabrication",f.OPTICS_HANDLING="optics_handling",f.VIBRATION_ISOLATION="vibration_isolation",f))(j||{}),yt=(f=>(f[f.LOW=0]="LOW",f[f.NORMAL=1]="NORMAL",f[f.HIGH=2]="HIGH",f[f.RUSH=3]="RUSH",f[f.CRITICAL=4]="CRITICAL",f))(yt||{}),tt=(f=>(f.IMPROVISED="improvised",f.BASIC="basic",f.STANDARD="standard",f.ADVANCED="advanced",f.CUTTING_EDGE="cutting_edge",f.EXPERIMENTAL="experimental",f))(tt||{}),bf=(f=>(f.AVAILABLE="available",f.RESERVED="reserved",f.IN_USE="in_use",f.MAINTENANCE="maintenance",f.BROKEN="broken",f))(bf||{});function rs(f,i){const l=new Map;for(const r of f){const o=i.get(r.equipmentId);if(!o)continue;const u=r.condition/100;for(const m of o.tags)if(typeof m.value=="number"){const p=l.get(m.category)||0,y=m.value*u;m.consumable?l.set(m.category,p+y):l.set(m.category,Math.max(p,y))}else typeof m.value=="boolean"&&m.value&&l.set(m.category,1)}return l}var ie=(f=>(f.MATERIAL="material",f.PRODUCT="product",f.COMPONENT="component",f))(ie||{}),E=(f=>(f.DAMAGED="damaged",f.JUNK="junk",f.RESTORED="restored",f.FORGED="forged",f.HAND_FORGED="hand_forged",f.MILITARY_GRADE="military_grade",f.TITANIUM="titanium",f.STEEL="steel",f.COMPOSITE="composite",f.SALVAGED="salvaged",f.STANDARD="standard",f.PREMIUM="premium",f.ROUGH="rough",f.PRECISION="precision",f.ASSEMBLY="assembly",f.CASING="casing",f.LOW_TECH="low-tech",f.REINFORCED="reinforced",f.LIGHTWEIGHT="lightweight",f.POLISHED="polished",f.MODULAR="modular",f.FIELD_SERVICEABLE="field_serviceable",f.COMPETITION_GRADE="competition_grade",f.TACTICAL="tactical",f.FIELD_READY="field_ready",f.DRENCHED="drenched",f.CORRODED="corroded",f.HEAT_DAMAGED="heat_damaged",f.CONTAMINATED="contaminated",f.FROZEN="frozen",f.RADIATION_EXPOSED="radiation_exposed",f.IMPACT_DAMAGED="impact_damaged",f.WORN="worn",f.PROTOTYPE="prototype",f.CUSTOM="custom",f.REFURBISHED="refurbished",f.ANTIQUE="antique",f))(E||{});const $i={steel:{id:"steel",name:"Steel",category:ie.MATERIAL,baseValue:12,description:"High-strength carbon steel alloy, primary construction material",stackable:!0,defaultTags:[],manufacturingType:z.RAW_MATERIAL},aluminum:{id:"aluminum",name:"Aluminum",category:ie.MATERIAL,baseValue:8,description:"Lightweight aluminum alloy, corrosion resistant",stackable:!0,defaultTags:[],manufacturingType:z.RAW_MATERIAL},plastic:{id:"plastic",name:"Polymer Plastic",category:ie.MATERIAL,baseValue:3,description:"High-density polymer plastic for grips and housings",stackable:!0,defaultTags:[],manufacturingType:z.RAW_MATERIAL},titanium:{id:"titanium",name:"Titanium",category:ie.MATERIAL,baseValue:45,description:"Premium titanium alloy, exceptional strength-to-weight ratio",stackable:!0,defaultTags:[],manufacturingType:z.RAW_MATERIAL},basic_electronics:{id:"basic_electronics",name:"Basic Electronics",category:ie.COMPONENT,baseValue:15,description:"Basic electronic components and circuitry",stackable:!0,defaultTags:[],manufacturingType:z.SHAPED_MATERIAL,materialSource:"industrial_chemicals"},advanced_electronics:{id:"advanced_electronics",name:"Advanced Electronics",category:ie.COMPONENT,baseValue:65,description:"Sophisticated electronic systems and targeting components",stackable:!0,defaultTags:[],manufacturingType:z.SHAPED_MATERIAL,materialSource:"industrial_chemicals"},machined_parts:{id:"machined_parts",name:"Machined Parts",category:ie.COMPONENT,baseValue:25,description:"Precision machined mechanical components",stackable:!0,defaultTags:[],manufacturingType:z.SHAPED_MATERIAL,materialSource:"steel"},low_tech_spares:{id:"low_tech_spares",name:"Low-Tech Spares",category:ie.COMPONENT,baseValue:8,description:"Simple mechanical parts and hardware",stackable:!0,defaultTags:[],manufacturingType:z.SHAPED_MATERIAL,materialSource:"steel"},precision_spares:{id:"precision_spares",name:"Precision Spares",category:ie.COMPONENT,baseValue:35,description:"High-precision mechanical components",stackable:!0,defaultTags:[],manufacturingType:z.SHAPED_MATERIAL,materialSource:"steel"},"small-steel-billet":{id:"small-steel-billet",name:"Small Steel Billet",category:ie.COMPONENT,baseValue:2,description:"Small formed steel billet ready for machining",stackable:!0,defaultTags:[],manufacturingType:z.SHAPED_MATERIAL,materialSource:"steel"},"small-steel-cylinder":{id:"small-steel-cylinder",name:"Small Steel Cylinder",category:ie.COMPONENT,baseValue:2,description:"Small turned steel cylinder for further processing",stackable:!0,defaultTags:[],manufacturingType:z.SHAPED_MATERIAL,materialSource:"steel"},"mechanical-component":{id:"mechanical-component",name:"Mechanical Component",category:ie.COMPONENT,baseValue:5,description:"Basic mechanical component with rough finishing",stackable:!0,defaultTags:[E.ROUGH,E.LOW_TECH],manufacturingType:z.SHAPED_MATERIAL,materialSource:"small-steel-billet"},"small-tube":{id:"small-tube",name:"Small Tube",category:ie.COMPONENT,baseValue:8,description:"Small bored tube for mechanical assemblies",stackable:!0,defaultTags:[],manufacturingType:z.SHAPED_MATERIAL,materialSource:"small-steel-cylinder"},"small-casing":{id:"small-casing",name:"Small Casing",category:ie.COMPONENT,baseValue:3,description:"Small plastic casing for external protection",stackable:!0,defaultTags:[],manufacturingType:z.SHAPED_MATERIAL,materialSource:"plastic"},"mechanical-assembly":{id:"mechanical-assembly",name:"Mechanical Assembly",category:ie.COMPONENT,baseValue:60,description:"Assembly of mechanical components with low-tech finish",stackable:!0,defaultTags:[E.LOW_TECH],manufacturingType:z.ASSEMBLY,assemblyComponents:[{componentId:"mechanical-component",quantity:10,requiredTags:[E.ROUGH,E.LOW_TECH]}]},basic_sidearm:{id:"basic_sidearm",name:"Basic Sidearm",category:ie.PRODUCT,baseValue:180,description:"Standard-issue sidearm pistol with low-tech components",stackable:!1,defaultTags:[E.LOW_TECH],manufacturingType:z.ASSEMBLY,assemblyComponents:[{componentId:"mechanical-assembly",quantity:1,requiredTags:[E.LOW_TECH]},{componentId:"small-tube",quantity:1},{componentId:"small-casing",quantity:1}]},"plastic-scrap":{id:"plastic-scrap",name:"Plastic Scrap",category:ie.MATERIAL,baseValue:1,description:"Recovered plastic fragments from disassembly",stackable:!0,defaultTags:[],manufacturingType:z.RAW_MATERIAL},"steel-scrap":{id:"steel-scrap",name:"Steel Scrap",category:ie.MATERIAL,baseValue:4,description:"Recovered steel fragments from disassembly",stackable:!0,defaultTags:[],manufacturingType:z.RAW_MATERIAL},tactical_knife:{id:"tactical_knife",name:"Tactical Knife",category:ie.PRODUCT,baseValue:85,description:"Military-grade combat knife with versatile blade design",stackable:!1,defaultTags:[],manufacturingType:z.ASSEMBLY,assemblyComponents:[{componentId:"blade-finished",quantity:1},{componentId:"knife-handle",quantity:1}]},heavy_rifle:{id:"heavy_rifle",name:"Heavy Rifle",category:ie.PRODUCT,baseValue:650,description:"High-powered military rifle for long-range combat",stackable:!1,defaultTags:[],manufacturingType:z.ASSEMBLY,assemblyComponents:[{componentId:"heavy-barrel",quantity:1},{componentId:"rifle-assembly",quantity:1},{componentId:"composite-stock",quantity:1}]},damaged_basic_sidearm:{id:"damaged_basic_sidearm",name:"Damaged Basic Sidearm",category:ie.PRODUCT,baseValue:25,description:"Broken sidearm requiring restoration to functional condition",stackable:!1,defaultTags:[E.DAMAGED],manufacturingType:z.ASSEMBLY,assemblyComponents:[{componentId:"mechanical-assembly",quantity:1,requiredTags:[E.ASSEMBLY,E.DAMAGED]},{componentId:"plastic-scrap",quantity:1,requiredTags:[E.SALVAGED]}]},drenched_tactical_knife:{id:"drenched_tactical_knife",name:"Water-Damaged Tactical Knife",category:ie.PRODUCT,baseValue:35,description:"Tactical knife with severe water damage, needs drying treatment",stackable:!1,defaultTags:[E.DRENCHED],manufacturingType:z.ASSEMBLY,assemblyComponents:[{componentId:"blade-finished",quantity:1},{componentId:"knife-handle",quantity:1}]},corroded_mechanical_assembly:{id:"corroded_mechanical_assembly",name:"Corroded Mechanical Assembly",category:ie.COMPONENT,baseValue:25,description:"Mechanical assembly with heavy corrosion, needs chemical treatment",stackable:!0,defaultTags:[E.CORRODED,E.ASSEMBLY],manufacturingType:z.ASSEMBLY,assemblyComponents:[{componentId:"mechanical-component",quantity:8,requiredTags:[E.ROUGH,E.LOW_TECH]}]},heat_damaged_sidearm:{id:"heat_damaged_sidearm",name:"Heat-Damaged Sidearm",category:ie.PRODUCT,baseValue:45,description:"Sidearm exposed to extreme heat, metal structure compromised",stackable:!1,defaultTags:[E.HEAT_DAMAGED],manufacturingType:z.ASSEMBLY,assemblyComponents:[{componentId:"mechanical-assembly",quantity:1,requiredTags:[E.LOW_TECH]},{componentId:"small-tube",quantity:1},{componentId:"small-casing",quantity:1}]},contaminated_electronics:{id:"contaminated_electronics",name:"Contaminated Electronics",category:ie.COMPONENT,baseValue:8,description:"Electronic components with chemical contamination",stackable:!0,defaultTags:[E.CONTAMINATED],manufacturingType:z.SHAPED_MATERIAL,materialSource:"industrial_chemicals"},radiation_exposed_rifle:{id:"radiation_exposed_rifle",name:"Radiation-Exposed Rifle",category:ie.PRODUCT,baseValue:150,description:"Heavy rifle contaminated with radioactive material",stackable:!1,defaultTags:[E.RADIATION_EXPOSED],manufacturingType:z.ASSEMBLY,assemblyComponents:[{componentId:"heavy-barrel",quantity:1},{componentId:"rifle-assembly",quantity:1},{componentId:"composite-stock",quantity:1}]},impact_damaged_components:{id:"impact_damaged_components",name:"Impact-Damaged Components",category:ie.COMPONENT,baseValue:12,description:"Mechanical components with structural damage from impact",stackable:!0,defaultTags:[E.IMPACT_DAMAGED],manufacturingType:z.SHAPED_MATERIAL,materialSource:"steel"},damaged_tactical_knife:{id:"damaged_tactical_knife",name:"Damaged Tactical Knife",category:ie.PRODUCT,baseValue:12,description:"Damaged knife with chipped blade, needs restoration",stackable:!1,defaultTags:[E.DAMAGED],manufacturingType:z.ASSEMBLY,assemblyComponents:[{componentId:"blade-damaged",quantity:1},{componentId:"knife-handle",quantity:1}]},dull_tactical_knife:{id:"dull_tactical_knife",name:"Dull Tactical Knife",category:ie.PRODUCT,baseValue:35,description:"Functional knife with dull edge, needs sharpening",stackable:!1,defaultTags:[],manufacturingType:z.ASSEMBLY,assemblyComponents:[{componentId:"blade-dull",quantity:1},{componentId:"knife-handle",quantity:1}]},composite_materials:{id:"composite_materials",name:"Composite Materials",category:ie.MATERIAL,baseValue:28,description:"Advanced composite materials for specialized applications",stackable:!0,defaultTags:[],manufacturingType:z.RAW_MATERIAL},industrial_chemicals:{id:"industrial_chemicals",name:"Industrial Chemicals",category:ie.MATERIAL,baseValue:18,description:"Chemical compounds for manufacturing processes",stackable:!0,defaultTags:[],manufacturingType:z.RAW_MATERIAL},absorbent_materials:{id:"absorbent_materials",name:"Absorbent Materials",category:ie.MATERIAL,baseValue:5,description:"Drying cloths and absorbent compounds for moisture removal",stackable:!0,defaultTags:[],manufacturingType:z.RAW_MATERIAL},rust_remover:{id:"rust_remover",name:"Rust Remover",category:ie.MATERIAL,baseValue:12,description:"Chemical rust removal compounds and corrosion inhibitors",stackable:!0,defaultTags:[],manufacturingType:z.RAW_MATERIAL},protective_coating:{id:"protective_coating",name:"Protective Coating",category:ie.MATERIAL,baseValue:8,description:"Anti-corrosion protective coatings and sealants",stackable:!0,defaultTags:[],manufacturingType:z.RAW_MATERIAL},decontamination_solution:{id:"decontamination_solution",name:"Decontamination Solution",category:ie.MATERIAL,baseValue:25,description:"Specialized solutions for chemical decontamination",stackable:!0,defaultTags:[],manufacturingType:z.RAW_MATERIAL},neutralizing_agent:{id:"neutralizing_agent",name:"Neutralizing Agent",category:ie.MATERIAL,baseValue:15,description:"Chemical neutralization compounds for contaminant treatment",stackable:!0,defaultTags:[],manufacturingType:z.RAW_MATERIAL},thermal_protection:{id:"thermal_protection",name:"Thermal Protection",category:ie.MATERIAL,baseValue:10,description:"Thermal shock prevention materials and insulators",stackable:!0,defaultTags:[],manufacturingType:z.RAW_MATERIAL},tempering_compounds:{id:"tempering_compounds",name:"Tempering Compounds",category:ie.MATERIAL,baseValue:20,description:"Heat treatment materials for metal tempering and repair",stackable:!0,defaultTags:[],manufacturingType:z.RAW_MATERIAL},lubricants:{id:"lubricants",name:"Precision Lubricants",category:ie.MATERIAL,baseValue:8,description:"High-quality lubricants and cleaners for mechanical parts",stackable:!0,defaultTags:[],manufacturingType:z.RAW_MATERIAL},replacement_parts:{id:"replacement_parts",name:"Small Replacement Parts",category:ie.MATERIAL,baseValue:15,description:"Assorted small mechanical parts for repairs and maintenance",stackable:!0,defaultTags:[],manufacturingType:z.RAW_MATERIAL},cleaning_supplies:{id:"cleaning_supplies",name:"Cleaning Supplies",category:ie.MATERIAL,baseValue:6,description:"General cleaning compounds and solvents",stackable:!0,defaultTags:[],manufacturingType:z.RAW_MATERIAL},"blade-finished":{id:"blade-finished",name:"Finished Blade",category:ie.COMPONENT,baseValue:45,description:"Properly sharpened and finished tactical blade",stackable:!0,defaultTags:[],manufacturingType:z.SHAPED_MATERIAL,materialSource:"steel"},"knife-handle":{id:"knife-handle",name:"Knife Handle",category:ie.COMPONENT,baseValue:15,description:"Ergonomic handle for tactical knife",stackable:!0,defaultTags:[],manufacturingType:z.SHAPED_MATERIAL,materialSource:"plastic"},"blade-damaged":{id:"blade-damaged",name:"Damaged Blade",category:ie.COMPONENT,baseValue:8,description:"Chipped or damaged blade requiring restoration",stackable:!0,defaultTags:[E.DAMAGED],manufacturingType:z.SHAPED_MATERIAL,materialSource:"steel"},"blade-dull":{id:"blade-dull",name:"Dull Blade",category:ie.COMPONENT,baseValue:35,description:"Functional but dull blade needing sharpening",stackable:!0,defaultTags:[],manufacturingType:z.SHAPED_MATERIAL,materialSource:"steel"},"heavy-barrel":{id:"heavy-barrel",name:"Heavy Barrel",category:ie.COMPONENT,baseValue:180,description:"Precision-machined heavy rifle barrel",stackable:!0,defaultTags:[],manufacturingType:z.SHAPED_MATERIAL,materialSource:"steel"},"rifle-assembly":{id:"rifle-assembly",name:"Rifle Assembly",category:ie.COMPONENT,baseValue:220,description:"Complete mechanical assembly for heavy rifle",stackable:!0,defaultTags:[],manufacturingType:z.ASSEMBLY,assemblyComponents:[{componentId:"machined_parts",quantity:15},{componentId:"advanced_electronics",quantity:2}]},"composite-stock":{id:"composite-stock",name:"Composite Stock",category:ie.COMPONENT,baseValue:85,description:"Lightweight composite rifle stock",stackable:!0,defaultTags:[],manufacturingType:z.SHAPED_MATERIAL,materialSource:"composite_materials"}};function W(f){return $i[f]}function vf(f){return f in $i}function by(f){const i=[];if(f.assemblyComponents)for(const l of f.assemblyComponents)vf(l.componentId)||i.push(l.componentId);return{valid:i.length===0,missingComponents:i}}const vy=Object.freeze(Object.defineProperty({__proto__:null,baseItems:$i,getBaseItem:W,isValidBaseItemId:vf,validateAssemblyComponents:by},Symbol.toStringTag,{value:"Module"})),xf={[E.DAMAGED]:{tag:E.DAMAGED,qualityMultiplier:.15,qualityCap:25,valueMultiplier:.12,description:"Severely damaged condition, non-functional without repair"},[E.JUNK]:{tag:E.JUNK,qualityMultiplier:.8,qualityCap:45,valueMultiplier:.35,description:"Cobbled together from scrap materials, limited quality potential"},[E.RESTORED]:{tag:E.RESTORED,qualityMultiplier:.9,qualityCap:75,valueMultiplier:.7,description:"Repaired from damaged condition, functional but not pristine"},[E.FORGED]:{tag:E.FORGED,qualityMultiplier:1,valueMultiplier:1,description:"Manufactured from raw materials using standard processes"},[E.HAND_FORGED]:{tag:E.HAND_FORGED,qualityMultiplier:1.15,valueMultiplier:1.4,description:"Artisan-crafted with superior workmanship and attention to detail"},[E.MILITARY_GRADE]:{tag:E.MILITARY_GRADE,qualityMultiplier:1.1,valueMultiplier:1.6,description:"Meets military specifications for durability and performance"},[E.TITANIUM]:{tag:E.TITANIUM,qualityMultiplier:1.2,valueMultiplier:2.1,description:"Lightweight titanium construction, premium performance"},[E.STEEL]:{tag:E.STEEL,qualityMultiplier:1,valueMultiplier:1,description:"Standard steel construction, reliable and cost-effective"},[E.COMPOSITE]:{tag:E.COMPOSITE,qualityMultiplier:1.15,valueMultiplier:1.7,description:"Advanced composite materials for specialized applications"},[E.SALVAGED]:{tag:E.SALVAGED,qualityMultiplier:.85,qualityCap:70,valueMultiplier:.6,description:"Recycled materials with potential quality variations"},[E.STANDARD]:{tag:E.STANDARD,qualityMultiplier:1,valueMultiplier:1,description:"Standard grade materials meeting basic specifications"},[E.PREMIUM]:{tag:E.PREMIUM,qualityMultiplier:1.1,valueMultiplier:1.3,description:"High grade materials with superior properties"},[E.PROTOTYPE]:{tag:E.PROTOTYPE,qualityMultiplier:1.25,valueMultiplier:2.5,description:"Experimental technology with unique performance characteristics"},[E.CUSTOM]:{tag:E.CUSTOM,qualityMultiplier:1.1,valueMultiplier:1.5,description:"Player-customized with personalized modifications"},[E.REFURBISHED]:{tag:E.REFURBISHED,qualityMultiplier:.95,valueMultiplier:.8,description:"Professionally restored to like-new condition"},[E.ANTIQUE]:{tag:E.ANTIQUE,qualityMultiplier:.8,valueMultiplier:3,description:"Historical items with significant collector and cultural value"},[E.ROUGH]:{tag:E.ROUGH,qualityMultiplier:.7,valueMultiplier:.4,description:"Unfinished mechanical component requiring additional processing"},[E.PRECISION]:{tag:E.PRECISION,qualityMultiplier:1.1,valueMultiplier:1.2,description:"Precision-machined component meeting tight tolerances"},[E.ASSEMBLY]:{tag:E.ASSEMBLY,qualityMultiplier:1,valueMultiplier:1.5,description:"Assembled mechanical unit combining multiple components"},[E.CASING]:{tag:E.CASING,qualityMultiplier:1,valueMultiplier:.8,description:"Protective housing for mechanical assemblies"},[E.LOW_TECH]:{tag:E.LOW_TECH,qualityMultiplier:.9,valueMultiplier:.7,description:"Basic technology level using conventional manufacturing methods"},[E.REINFORCED]:{tag:E.REINFORCED,qualityMultiplier:1.15,valueMultiplier:1.3,description:"Reinforced construction for enhanced durability"},[E.LIGHTWEIGHT]:{tag:E.LIGHTWEIGHT,qualityMultiplier:1.05,valueMultiplier:1.25,description:"Weight-optimized design without compromising strength"},[E.POLISHED]:{tag:E.POLISHED,qualityMultiplier:1.08,valueMultiplier:1.2,description:"High-quality surface finish and appearance"},[E.MODULAR]:{tag:E.MODULAR,qualityMultiplier:1,valueMultiplier:1.4,description:"Modular design for easy maintenance and upgrades"},[E.FIELD_SERVICEABLE]:{tag:E.FIELD_SERVICEABLE,qualityMultiplier:1,valueMultiplier:1.35,description:"Designed for tool-free field maintenance"},[E.COMPETITION_GRADE]:{tag:E.COMPETITION_GRADE,qualityMultiplier:1.2,valueMultiplier:1.8,description:"Tournament-grade precision and performance"},[E.TACTICAL]:{tag:E.TACTICAL,qualityMultiplier:1.12,valueMultiplier:1.5,description:"Military/tactical configuration for operational use"},[E.FIELD_READY]:{tag:E.FIELD_READY,qualityMultiplier:1.08,valueMultiplier:1.3,description:"Ready for immediate field deployment"},[E.DRENCHED]:{tag:E.DRENCHED,qualityMultiplier:.7,valueMultiplier:.4,description:"Water damage affecting performance, needs drying treatment"},[E.CORRODED]:{tag:E.CORRODED,qualityMultiplier:.6,valueMultiplier:.3,description:"Corrosion damage affecting structural integrity"},[E.HEAT_DAMAGED]:{tag:E.HEAT_DAMAGED,qualityMultiplier:.65,valueMultiplier:.35,description:"Heat damage compromising material properties"},[E.CONTAMINATED]:{tag:E.CONTAMINATED,qualityMultiplier:.8,valueMultiplier:.25,description:"Chemical contamination requiring specialized treatment"},[E.FROZEN]:{tag:E.FROZEN,qualityMultiplier:.75,valueMultiplier:.6,description:"Cold damage causing material brittleness"},[E.RADIATION_EXPOSED]:{tag:E.RADIATION_EXPOSED,qualityMultiplier:.5,valueMultiplier:.1,description:"Radioactive contamination posing serious health risks"},[E.IMPACT_DAMAGED]:{tag:E.IMPACT_DAMAGED,qualityMultiplier:.55,valueMultiplier:.3,description:"Physical trauma affecting structural integrity"},[E.WORN]:{tag:E.WORN,qualityMultiplier:.85,valueMultiplier:.7,description:"General wear and tear from extended use"}};function xy(f,i){let l=f,r;for(const o of i){const u=xf[o];u&&(l*=u.qualityMultiplier,u.qualityCap!==void 0&&(r=r===void 0?u.qualityCap:Math.min(r,u.qualityCap)))}return r!==void 0&&(l=Math.min(l,r)),Math.round(Math.max(0,Math.min(100,l)))}function Ay(f,i,l){let r=1;for(const u of l){const m=xf[u];m&&(r*=m.valueMultiplier)}const o=.1+i/100*.9;return Math.round(f*r*o)}function Za(f){const i=W(f.baseItemId);if(!i)throw new Error(`Invalid base item ID: ${f.baseItemId}`);const l=f.tags||[...i.defaultTags],r=f.quality||85,o=f.quantity||1,u=xy(r,l);return{id:Sy(),baseItemId:f.baseItemId,tags:l,quality:u,quantity:o,acquiredAt:Date.now(),lastModified:Date.now(),metadata:f.metadata||{}}}function Sy(){return`item-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function Zm(f){const i=W(f.baseItemId);return i?Ay(i.baseValue,f.quality,f.tags):0}function Wm(f){const i=W(f.baseItemId);if(!i)return"Unknown Item";const l=f.tags.filter(p=>[E.MILITARY_GRADE,E.HAND_FORGED,E.FORGED,E.RESTORED,E.JUNK,E.DAMAGED].includes(p)),r=f.tags.filter(p=>[E.TITANIUM,E.COMPOSITE,E.PREMIUM,E.STANDARD,E.SALVAGED].includes(p)),u=[...f.tags.filter(p=>[E.PROTOTYPE,E.CUSTOM,E.ANTIQUE].includes(p)),...r,...l];return u.length===0?i.name:`${u.map(p=>p.charAt(0).toUpperCase()+p.slice(1).replace("_"," ")).join(" ")} ${i.name}`}function My(f){if(f.length===0)return[];const i=new Map;for(const r of f){const o=W(r.baseItemId);if(!o||!o.stackable){const p=r.id;i.set(p,[r]);continue}const u=[...r.tags].sort().join(","),m=`${r.baseItemId}:${u}`;i.has(m)||i.set(m,[]),i.get(m).push(r)}const l=[];for(const r of i.values())if(r.length===1)l.push(r[0]);else{const o=r.reduce((p,y)=>p+y.quantity,0),u=r.reduce((p,y)=>p+y.quality*y.quantity,0)/o,m={...r[0],quantity:o,quality:Math.round(u),lastModified:Date.now()};l.push(m)}return l}function Fm(f){return f>=95?"Pristine":f>=85?"Excellent":f>=75?"Good":f>=60?"Fair":f>=45?"Poor":f>=25?"Damaged":"Broken"}class Ey{cleanInventoryUndefinedItems(i){let l=0;const r=[];console.log("🧹 Cleaning inventory: removing undefined items...");for(const[o,u]of i.groups){const m=[];for(const p of u.slots){const y=p.stack.instances.filter(h=>W(h.baseItemId)?!0:(console.log(`❌ Removing undefined item: ${h.baseItemId} (${h.quantity}x)`),l+=h.quantity,r.includes(h.baseItemId)||r.push(h.baseItemId),!1));y.length>0&&(p.stack.instances=y,p.stack.totalQuantity=y.reduce((h,v)=>h+v.quantity,0),m.push(p))}u.slots=m,u.totalItems=m.reduce((p,y)=>p+y.stack.totalQuantity,0),u.totalValue=m.reduce((p,y)=>p+y.stack.instances.reduce((h,v)=>{const A=W(v.baseItemId);return h+(A?A.baseValue*v.quantity:0)},0),0)}return i.totalItems=Array.from(i.groups.values()).reduce((o,u)=>o+u.totalItems,0),i.totalValue=Array.from(i.groups.values()).reduce((o,u)=>o+u.totalValue,0),i.usedCapacity=i.totalItems,console.log(`🧹 Inventory cleanup complete: removed ${l} undefined items`),r.length>0&&console.log(`🧹 Removed item types: ${r.join(", ")}`),{removedCount:l,removedItems:r}}cleanLegacyStorageUndefinedItems(i){let l=0;const r=[];console.log("🧹 Cleaning legacy storage: removing undefined items...");for(const[o,u]of Object.entries(i))W(o)||(console.log(`❌ Removing undefined item from legacy storage: ${o} (${u}x)`),l+=u,r.push(o),delete i[o]);return console.log(`🧹 Legacy storage cleanup complete: removed ${l} undefined items`),r.length>0&&console.log(`🧹 Removed item types: ${r.join(", ")}`),{removedCount:l,removedItems:r}}createEmptyInventory(i=1e3){const l=new Map;for(const r of Object.values(ie))l.set(r,{category:r,slots:[],totalItems:0,totalValue:0});return{groups:l,totalItems:0,totalValue:0,lastUpdated:Date.now(),storageCapacity:i,usedCapacity:0}}addItem(i,l){try{const r=W(l.baseItemId);if(!r)return console.error(`Invalid base item ID: ${l.baseItemId}`),!1;if(i.usedCapacity+l.quantity>i.storageCapacity)return console.warn(`⚠️ INSUFFICIENT STORAGE: Cannot add ${l.quantity}x ${l.baseItemId}. Used: ${i.usedCapacity}/${i.storageCapacity}, would become: ${i.usedCapacity+l.quantity}/${i.storageCapacity}`),!1;const o=i.groups.get(r.category);if(!o)return console.error(`No group found for category: ${r.category}`),!1;if(typeof l.quality!="number"||isNaN(l.quality))return console.error(`Invalid quality value: ${l.quality} (type: ${typeof l.quality})`),!1;if(typeof l.quantity!="number"||isNaN(l.quantity)||l.quantity<=0)return console.error(`Invalid quantity value: ${l.quantity} (type: ${typeof l.quantity})`),!1;if(!Array.isArray(l.tags))return console.error(`Invalid tags value: ${l.tags} (type: ${typeof l.tags})`),!1;let u=o.slots.find(m=>m.baseItemId===l.baseItemId);if(u||(u=this.createEmptySlot(l.baseItemId),o.slots.push(u)),r.stackable){const m=u.stack.instances.find(p=>this.areInstancesCompatible(p,l));m?(m.quantity+=l.quantity,m.lastModified=Date.now()):u.stack.instances.push(l)}else u.stack.instances.push(l);return this.updateSlotTotals(u),this.updateGroupTotals(o),this.updateInventoryTotals(i),i.lastUpdated=Date.now(),!0}catch(r){return console.error(`ERROR: Failed to add ${l.baseItemId} to inventory:`,r),!1}}removeItem(i,l,r){const o=this.findItemInstance(i,l);if(!o)return console.error(`Item instance not found: ${l}`),!1;const{group:u,slot:m,instance:p}=o,y=r||p.quantity;return y>p.quantity?(console.error(`Cannot remove ${y}, only ${p.quantity} available`),!1):(y===p.quantity?(m.stack.instances=m.stack.instances.filter(h=>h.id!==l),m.stack.instances.length===0&&(u.slots=u.slots.filter(h=>h.baseItemId!==m.baseItemId))):(p.quantity-=y,p.lastModified=Date.now()),this.updateSlotTotals(m),this.updateGroupTotals(u),this.updateInventoryTotals(i),i.lastUpdated=Date.now(),!0)}moveItem(i,l,r,o){return console.log("Move item operation not yet implemented"),!1}findItems(i,l){const r=[];for(const o of i.groups.values())if(!(l.categories&&!l.categories.includes(o.category)))for(const u of o.slots){const m=W(u.baseItemId);if(!m)continue;const p=u.stack.instances.filter(y=>{if(l.tags&&!l.tags.every(h=>y.tags.includes(h))||l.minQuality!==void 0&&y.quality<l.minQuality||l.maxQuality!==void 0&&y.quality>l.maxQuality)return!1;if(l.searchText){const h=l.searchText.toLowerCase(),v=m.name.toLowerCase(),A=m.description.toLowerCase();if(!v.includes(h)&&!A.includes(h))return!1}return!0});if(p.length>0){const y=p.reduce((v,A)=>v+A.quantity,0),h=p.map(v=>v.quality);r.push({slot:u,instances:p,totalQuantity:y,averageQuality:Math.round(p.reduce((v,A)=>v+A.quality*A.quantity,0)/y),bestQuality:Math.max(...h),worstQuality:Math.min(...h)})}}return r}getAvailableQuantity(i,l,r){const o=W(l);if(!o)return 0;const u=i.groups.get(o.category);if(!u)return 0;const m=u.slots.find(h=>h.baseItemId===l);if(!m)return 0;if(!r)return m.available;const y=this.findItems(i,{...r,categories:[o.category]}).find(h=>h.slot.baseItemId===l);return(y==null?void 0:y.totalQuantity)||0}getAvailableQuantityWithTags(i,l,r,o){const u=W(l);if(!u)return 0;const m=i.groups.get(u.category);if(!m)return 0;const p=m.slots.find(y=>y.baseItemId===l);return p?p.stack.instances.filter(y=>{const h=r.every(A=>y.tags.includes(A)),v=o===void 0||y.quality<=o;return h&&v}).reduce((y,h)=>y+h.quantity,0):0}getBestQualityItemsWithTags(i,l,r,o,u){const m=W(l);if(!m)return[];const p=i.groups.get(m.category);if(!p)return[];const y=p.slots.find(T=>T.baseItemId===l);if(!y)return[];const h=y.stack.instances.filter(T=>{const N=o.every(H=>T.tags.includes(H)),I=u===void 0||T.quality<=u;return N&&I}).sort((T,N)=>N.quality-T.quality),v=[];let A=r;for(const T of h){if(A<=0)break;const N=Math.min(T.quantity,A);N>0&&(v.push({...T,quantity:N}),A-=N)}return v}getBestQualityItems(i,l,r){const o=W(l);if(!o)return[];const u=i.groups.get(o.category);if(!u)return[];const m=u.slots.find(v=>v.baseItemId===l);if(!m)return[];const p=[...m.stack.instances].sort((v,A)=>A.quality-v.quality),y=[];let h=r;for(const v of p){if(h<=0)break;const A=Math.min(v.quantity,h);A===v.quantity?y.push(v):y.push({...v,id:`${v.id}-partial-${Date.now()}`,quantity:A,lastModified:Date.now()}),h-=A}return y}calculateInventoryValue(i){let l=0;for(const r of i.groups.values())for(const o of r.slots)for(const u of o.stack.instances)l+=Zm(u)*u.quantity;return l}getInventoryUsage(i){return{used:i.usedCapacity,capacity:i.storageCapacity,percentage:Math.round(i.usedCapacity/i.storageCapacity*100)}}getAllItems(i){const l=[];for(const r of i.groups.values())for(const o of r.slots)l.push(...o.stack.instances);return l}optimizeStorage(i){const l=[];for(const r of i.groups.values()){for(const o of r.slots){const u=o.stack.instances.length;o.stack.instances=My(o.stack.instances),o.stack.instances.length<u&&l.push({type:"modify",itemInstanceId:o.baseItemId,fromSlot:o.baseItemId,toSlot:o.baseItemId}),this.updateSlotTotals(o)}this.updateGroupTotals(r)}return this.updateInventoryTotals(i),l}reserveItems(i,l,r,o){const u=W(l);if(!u)return!1;const m=i.groups.get(u.category);if(!m)return!1;const p=m.slots.find(y=>y.baseItemId===l);return!p||p.available<r?!1:(p.reserved+=r,p.available=p.stack.totalQuantity-p.reserved,i.lastUpdated=Date.now(),!0)}releaseReservation(i,l){console.log(`Release reservation: ${l}`)}getReservedQuantity(i,l){const r=W(l);if(!r)return 0;const o=i.groups.get(r.category);if(!o)return 0;const u=o.slots.find(m=>m.baseItemId===l);return(u==null?void 0:u.reserved)||0}createEmptySlot(i){return{baseItemId:i,stack:{baseItemId:i,instances:[],totalQuantity:0,averageQuality:0,uniqueTags:[]},reserved:0,available:0}}areInstancesCompatible(i,l){if(i.baseItemId!==l.baseItemId||i.tags.length!==l.tags.length)return!1;const r=new Set(i.tags),o=new Set(l.tags);for(const m of r)if(!o.has(m))return!1;return!(Math.abs(i.quality-l.quality)>10)}findItemInstance(i,l){for(const r of i.groups.values())for(const o of r.slots)for(const u of o.stack.instances)if(u.id===l)return{group:r,slot:o,instance:u};return null}updateSlotTotals(i){const l=i.stack.instances;if(i.stack.totalQuantity=l.reduce((r,o)=>r+o.quantity,0),i.available=i.stack.totalQuantity-i.reserved,l.length>0){const r=l.reduce((o,u)=>o+u.quality*u.quantity,0);i.stack.averageQuality=Math.round(r/i.stack.totalQuantity),i.stack.uniqueTags=[...new Set(l.flatMap(o=>o.tags))]}else i.stack.averageQuality=0,i.stack.uniqueTags=[]}updateGroupTotals(i){i.totalItems=i.slots.reduce((l,r)=>l+r.stack.totalQuantity,0),i.totalValue=i.slots.reduce((l,r)=>l+r.stack.instances.reduce((o,u)=>o+Zm(u)*u.quantity,0),0)}updateInventoryTotals(i){i.totalItems=0,i.totalValue=0;for(const l of i.groups.values())i.totalItems+=l.totalItems,i.totalValue+=l.totalValue;i.usedCapacity=i.totalItems}}const Z=new Ey;var lt=(f=>(f.JOB_CREATED="JOB_CREATED",f.JOB_STARTED="JOB_STARTED",f.JOB_PROGRESS_UPDATED="JOB_PROGRESS_UPDATED",f.JOB_COMPLETED="JOB_COMPLETED",f.JOB_FAILED="JOB_FAILED",f.JOB_CANCELLED="JOB_CANCELLED",f.OPERATION_STARTED="OPERATION_STARTED",f.OPERATION_COMPLETED="OPERATION_COMPLETED",f.OPERATION_FAILED="OPERATION_FAILED",f.MACHINE_AVAILABLE="MACHINE_AVAILABLE",f.MACHINE_OCCUPIED="MACHINE_OCCUPIED",f.MATERIAL_ADDED="MATERIAL_ADDED",f.MATERIAL_CONSUMED="MATERIAL_CONSUMED",f.FACILITY_STATE_CHANGED="FACILITY_STATE_CHANGED",f.INVENTORY_CHANGED="INVENTORY_CHANGED",f.GAME_TIME_UPDATED="GAME_TIME_UPDATED",f.SYSTEM_INITIALIZED="SYSTEM_INITIALIZED",f))(lt||{});class Ty{constructor(){De(this,"subscribers",new Map);De(this,"eventHistory",[]);De(this,"maxHistorySize",1e3)}emit(i,l,r){const o={type:i,timestamp:Date.now(),data:l,sourceId:r};this.eventHistory.push(o),this.eventHistory.length>this.maxHistorySize&&this.eventHistory.shift();const u=this.subscribers.get(i);u&&Array.from(u).forEach(p=>{try{p(o)}catch(y){console.error(`Error in event handler for ${i}:`,y)}}),this.isDebugEnabled()&&console.log(`📡 Event: ${i}`,l)}subscribe(i,l){this.subscribers.has(i)||this.subscribers.set(i,new Set);const r=this.subscribers.get(i);return r.add(l),()=>{r.delete(l),r.size===0&&this.subscribers.delete(i)}}subscribeToMany(i,l){const r=i.map(o=>this.subscribe(o,l));return()=>{r.forEach(o=>o())}}getRecentEvents(i=50){return this.eventHistory.slice(-i)}getEventHistory(i,l=50){return this.eventHistory.filter(r=>r.type===i).slice(-l)}clearHistory(){this.eventHistory=[]}getSubscriptionStats(){const i=new Map;for(const[l,r]of this.subscribers)i.set(l,r.size);return i}isDebugEnabled(){return typeof window<"u"&&window.DEBUG_EVENTS}}const je=new Ty,Hn={createJobEventEmitter(f,i){return{created:l=>je.emit("JOB_CREATED",{jobId:f,facilityId:i,...l}),started:()=>je.emit("JOB_STARTED",{jobId:f,facilityId:i}),progressUpdated:(l,r)=>je.emit("JOB_PROGRESS_UPDATED",{jobId:f,facilityId:i,progress:l,estimatedCompletion:r}),completed:(l,r)=>je.emit("JOB_COMPLETED",{jobId:f,facilityId:i,success:l,duration:r}),failed:l=>je.emit("JOB_FAILED",{jobId:f,facilityId:i,reason:l}),cancelled:l=>je.emit("JOB_CANCELLED",{jobId:f,facilityId:i,reason:l})}},createMachineEventEmitter(f,i){return{becameAvailable:l=>je.emit("MACHINE_AVAILABLE",{machineId:f,facilityId:i,capabilities:l}),becameOccupied:l=>je.emit("MACHINE_OCCUPIED",{machineId:f,facilityId:i,jobId:l})}},createInventoryEventEmitter(f){return{materialAdded:(i,l,r,o=[])=>je.emit("MATERIAL_ADDED",{facilityId:f,itemId:i,quantity:l,quality:r,tags:o}),materialConsumed:(i,l)=>je.emit("MATERIAL_CONSUMED",{facilityId:f,itemId:i,quantity:l}),inventoryChanged:i=>je.emit("INVENTORY_CHANGED",{facilityId:f,changes:i})}}};var Vt=(f=>(f.READY_TO_START="READY_TO_START",f.BLOCKED_BY_DEPENDENCIES="BLOCKED_BY_DEPENDENCIES",f.BLOCKED_BY_MATERIALS="BLOCKED_BY_MATERIALS",f.BLOCKED_BY_EQUIPMENT="BLOCKED_BY_EQUIPMENT",f.IN_PROGRESS="IN_PROGRESS",f.COMPLETED="COMPLETED",f.FAILED="FAILED",f.CANCELLED="CANCELLED",f))(Vt||{});class _y{constructor(){De(this,"items",[])}enqueue(i,l){this.items.push({item:i,priority:l}),this.items.sort((r,o)=>o.priority-r.priority)}dequeue(){var i;return(i=this.items.shift())==null?void 0:i.item}peek(){var i;return(i=this.items[0])==null?void 0:i.item}isEmpty(){return this.items.length===0}size(){return this.items.length}clear(){this.items=[]}toArray(){return this.items.map(i=>i.item)}}class Ny{constructor(){De(this,"readyJobs",new _y);De(this,"blockedJobs",new Map);De(this,"activeJobs",new Map);De(this,"completedJobs",new Map);De(this,"jobStates",new Map);De(this,"dependencyGraph",new Map);De(this,"reverseDependencyGraph",new Map);this.initializeEventHandlers(),this.initializeBlockingReasonMaps()}initializeEventHandlers(){je.subscribe(lt.OPERATION_COMPLETED,this.onOperationCompleted.bind(this)),je.subscribe(lt.MATERIAL_ADDED,this.onMaterialAdded.bind(this)),je.subscribe(lt.MACHINE_AVAILABLE,this.onMachineAvailable.bind(this)),je.subscribe(lt.JOB_COMPLETED,this.onJobCompleted.bind(this)),je.subscribe(lt.JOB_FAILED,this.onJobFailed.bind(this))}initializeBlockingReasonMaps(){this.blockedJobs.set("DEPENDENCY",new Map),this.blockedJobs.set("MATERIAL",new Map),this.blockedJobs.set("EQUIPMENT",new Map),this.blockedJobs.set("CAPACITY",new Map)}addJob(i,l=[]){console.log(`JobStateManager: Adding job ${i.id} to management system`);const r={job:i,state:"BLOCKED_BY_DEPENDENCIES",lastEvaluated:Date.now(),dependsOn:new Set(l),blocksJobs:new Set};this.jobStates.set(i.id,r);for(const u of l)this.dependencyGraph.has(u)||this.dependencyGraph.set(u,new Set),this.dependencyGraph.get(u).add(i.id),this.reverseDependencyGraph.has(i.id)||this.reverseDependencyGraph.set(i.id,new Set),this.reverseDependencyGraph.get(i.id).add(u);Hn.createJobEventEmitter(i.id,i.facilityId).created({productId:i.productId,method:i.method,quantity:i.quantity}),this.evaluateJobState(i.id)}evaluateJobState(i){const l=this.jobStates.get(i);if(!l){console.warn(`JobStateManager: Job ${i} not found for evaluation`);return}const r=l.state,o=this.calculateJobState(l);r!==o&&(console.log(`JobStateManager: Job ${i} state changed: ${r} → ${o}`),this.removeFromQueue(i,r),l.state=o,l.lastEvaluated=Date.now(),this.addToQueue(l),this.emitJobStateChange(i,r,o))}calculateJobState(i){const{job:l,dependsOn:r}=i;if(["COMPLETED","FAILED","CANCELLED"].includes(i.state))return i.state;for(const o of r){const u=this.jobStates.get(o);if(!u||u.state!=="COMPLETED")return i.blockedReason=`Waiting for job ${o}`,"BLOCKED_BY_DEPENDENCIES"}if(l.subOperations&&l.subOperations.size>0){const o=Array.from(l.subOperations.values()),u=o.filter(y=>y.state==="in_progress"),m=o.filter(y=>{var h;if(y.operationIndex>0)for(let v=0;v<y.operationIndex;v++){const A=(h=l.subOperations)==null?void 0:h.get(v);if(!A||A.state!=="completed")return!1}return y.state==="queued"}),p=o.filter(y=>y.state==="completed");return u.length>0?(i.blockedReason=`${u.length} sub-operations in progress`,"IN_PROGRESS"):p.length===o.length?(i.blockedReason=void 0,"COMPLETED"):m.length>0?(i.blockedReason=`${m.length} sub-operations ready for assignment`,"IN_PROGRESS"):(i.blockedReason="No sub-operations ready to start","BLOCKED_BY_DEPENDENCIES")}return i.blockedReason=void 0,"READY_TO_START"}removeFromQueue(i,l){switch(l){case"READY_TO_START":const r=this.readyJobs.toArray();this.readyJobs.clear(),r.filter(o=>o.id!==i).forEach(o=>{this.readyJobs.enqueue(o,this.getJobPriority(o))});break;case"IN_PROGRESS":this.activeJobs.delete(i);break;case"COMPLETED":this.completedJobs.delete(i);break}}addToQueue(i){const{job:l,state:r}=i;switch(r){case"READY_TO_START":this.readyJobs.toArray().some(m=>m.id===l.id)?console.log(`JobStateManager: Job ${l.id} already in ready queue, skipping duplicate`):(this.readyJobs.enqueue(l,this.getJobPriority(l)),console.log(`JobStateManager: Job ${l.id} added to ready queue`),je.emit(lt.FACILITY_STATE_CHANGED,{facilityId:l.facilityId,readyJobAvailable:!0,jobId:l.id}));break;case"IN_PROGRESS":this.activeJobs.set(l.id,l),l.subOperations&&this.hasQueuedSubOperations(l)&&(console.log(`JobStateManager: Job ${l.id} has queued sub-operations, notifying coordinator`),je.emit(lt.FACILITY_STATE_CHANGED,{facilityId:l.facilityId,readyJobAvailable:!0,jobId:l.id}));break;case"COMPLETED":this.completedJobs.set(l.id,l);break;case"BLOCKED_BY_DEPENDENCIES":case"BLOCKED_BY_MATERIALS":case"BLOCKED_BY_EQUIPMENT":console.log(`JobStateManager: Job ${l.id} blocked: ${i.blockedReason}`);break}}getJobPriority(i){const r={[yt.CRITICAL]:200,[yt.RUSH]:150,[yt.HIGH]:100,[yt.NORMAL]:50,[yt.LOW]:10}[i.priority]||50,o=i.rushOrder?50:0,u=Math.max(0,(Date.now()-i.createdAt)/(1e3*60*60));return r+o+u}hasQueuedSubOperations(i){return i.subOperations?Array.from(i.subOperations.values()).some(l=>l.state==="queued"):!1}emitJobStateChange(i,l,r){je.emit(lt.FACILITY_STATE_CHANGED,{jobId:i,stateChange:{from:l,to:r,timestamp:Date.now()}})}onOperationCompleted(i){console.log(`JobStateManager: Operation completed for job ${i.data.jobId}`),this.evaluateJobState(i.data.jobId);const l=this.dependencyGraph.get(i.data.jobId);if(l)for(const r of l)this.evaluateJobState(r)}onMaterialAdded(i){console.log(`JobStateManager: Material added - ${i.data.itemId}`);for(const[l,r]of this.jobStates)r.state==="BLOCKED_BY_MATERIALS"&&this.evaluateJobState(l)}onMachineAvailable(i){console.log(`JobStateManager: Machine available - ${i.data.machineId}`);for(const[l,r]of this.jobStates)r.state==="BLOCKED_BY_EQUIPMENT"&&this.evaluateJobState(l)}onJobCompleted(i){const l=i.data.jobId;console.log(`JobStateManager: Job completed - ${l}`);const r=this.jobStates.get(l);if(r){r.state="COMPLETED",this.addToQueue(r);const o=this.dependencyGraph.get(l);if(o)for(const u of o)this.evaluateJobState(u)}}onJobFailed(i){const l=i.data.jobId;console.log(`JobStateManager: Job failed - ${l}`);const r=this.jobStates.get(l);r&&(r.state="FAILED")}getNextReadyJob(){return this.readyJobs.dequeue()}getReadyJobs(){return this.readyJobs.toArray()}getJobState(i){return this.jobStates.get(i)}markJobStarted(i,l=!1){const r=this.jobStates.get(i);r&&r.state==="READY_TO_START"&&(r.state="IN_PROGRESS",this.activeJobs.set(i,r.job),l||Hn.createJobEventEmitter(i,r.job.facilityId).started())}getJobsByState(i){return Array.from(this.jobStates.values()).filter(l=>l.state===i).map(l=>l.job)}getBlockedJobs(){return Array.from(this.jobStates.values()).filter(i=>i.state.startsWith("BLOCKED_")).map(i=>i.job)}getAllJobStates(){return Array.from(this.jobStates.values())}getStats(){const i=Array.from(this.jobStates.values()).filter(l=>l.state.startsWith("BLOCKED_")).length;return{ready:this.readyJobs.size(),active:this.activeJobs.size,completed:this.completedJobs.size,blocked:i,total:this.jobStates.size}}}const Nt=new Ny;class Cy{constructor(i){De(this,"facilities",new Map);De(this,"equipmentDefinitions",new Map);De(this,"availableMachines",new Map);De(this,"assignmentHistory",[]);this.equipmentDefinitions=i,this.initializeEventHandlers()}initializeEventHandlers(){je.subscribe(lt.FACILITY_STATE_CHANGED,this.onFacilityStateChanged.bind(this)),je.subscribe(lt.MACHINE_AVAILABLE,this.onMachineAvailable.bind(this)),je.subscribe(lt.MACHINE_OCCUPIED,this.onMachineOccupied.bind(this)),console.log("🎯 JobAssignmentCoordinator: Event handlers initialized")}setEquipmentDatabase(i){this.equipmentDefinitions=i,console.log(`🎯 JobAssignmentCoordinator: Equipment database updated with ${i.size} definitions`)}registerFacility(i){this.facilities.set(i.id,i),this.availableMachines.has(i.id)||this.availableMachines.set(i.id,new Set),console.log(`🎯 JobAssignmentCoordinator: Registered facility ${i.id}`)}hasQueuedSubOperations(i){return i.subOperations?Array.from(i.subOperations.values()).some(l=>l.state==="queued"):!1}onFacilityStateChanged(i){const{facilityId:l,readyJobAvailable:r,jobId:o}=i.data;r&&o&&(console.log(`🎯 JobAssignmentCoordinator: New ready job ${o} in facility ${l}`),this.tryAssignReadyJobs(l))}onMachineAvailable(i){const{facilityId:l,machineId:r,capabilities:o}=i.data;console.log(`🎯 JobAssignmentCoordinator: Machine ${r} available in facility ${l}`),this.availableMachines.has(l)||this.availableMachines.set(l,new Set),this.availableMachines.get(l).add(r),this.tryAssignReadyJobs(l)}onMachineOccupied(i){const{facilityId:l,machineId:r}=i.data,o=this.availableMachines.get(l);o&&o.delete(r),console.log(`🎯 JobAssignmentCoordinator: Machine ${r} now occupied`)}tryAssignReadyJobs(i){const l=this.facilities.get(i);if(!l){console.warn(`JobAssignmentCoordinator: Facility ${i} not registered`);return}const r=this.availableMachines.get(i)||new Set;if(r.size===0){console.log(`🎯 JobAssignmentCoordinator: No available machines in facility ${i}`);return}const o=Nt.getReadyJobs().filter(y=>y.facilityId===i),u=Nt.getJobsByState(Vt.IN_PROGRESS).filter(y=>y.facilityId===i).filter(y=>this.hasQueuedSubOperations(y)),m=[...o,...u];if(m.length===0){console.log(`🎯 JobAssignmentCoordinator: No assignable jobs in facility ${i}`);return}console.log(`🎯 JobAssignmentCoordinator: Attempting to assign ${m.length} assignable jobs (${o.length} ready, ${u.length} in-progress with queued sub-ops) to ${r.size} available machines`);const p=this.findOptimalAssignments(m,r,l);for(const y of p)this.executeAssignment(y)}findOptimalAssignments(i,l,r){const o=[],u=new Set,m=new Set,p=[];for(const y of i)if(y.subOperations){for(const[h,v]of y.subOperations)if(v.state==="queued")for(const A of l){if(u.has(A))continue;const T=this.calculateCompatibility(v.operation,A,r),N=r.equipment.find(H=>H.id===A),I=this.equipmentDefinitions.get((N==null?void 0:N.equipmentId)||"");console.log(`🔍 COMPATIBILITY: Machine ${A} (${(I==null?void 0:I.name)||"unknown"}) for operation "${v.operation.name}" - score: ${T.score}, duration: ${T.estimatedDuration}`),T.score>0&&p.push({jobId:y.id,machineId:A,facilityId:r.id,compatibilityScore:T.score,estimatedDuration:T.estimatedDuration})}}p.sort((y,h)=>{const v=i.find(I=>I.id===y.jobId),A=i.find(I=>I.id===h.jobId),T=this.getJobPriorityScore(v),N=this.getJobPriorityScore(A);return T!==N?N-T:h.compatibilityScore-y.compatibilityScore}),console.log("🎯 ASSIGNMENT: Sorted candidates:",p.map(y=>({jobId:y.jobId,machineId:y.machineId,score:y.compatibilityScore,duration:y.estimatedDuration})));for(const y of p){if(u.has(y.machineId)||m.has(y.jobId))continue;const h=i.find(A=>A.id===y.jobId);if(!h||!h.subOperations)continue;const v=Array.from(h.subOperations.entries()).find(([A,T])=>T.state==="queued");if(v){const[A,T]=v;o.push({jobId:y.jobId,machineId:y.machineId,facilityId:y.facilityId,subOperationIndex:A,operationName:T.operation.name,estimatedDuration:y.estimatedDuration}),u.add(y.machineId),m.add(y.jobId)}}return o}calculateCompatibility(i,l,r){const o=r.equipment.find(h=>h.id===l);if(!o)return console.log(`🔍 COMPAT: Equipment not found for machine ${l}`),{score:0,estimatedDuration:0};const u=this.equipmentDefinitions.get(o.equipmentId);if(!u)return console.log(`🔍 COMPAT: Equipment definition not found for ${o.equipmentId}`),{score:0,estimatedDuration:0};console.log(`🔍 COMPAT: Checking machine ${l} (${u.name}) for operation requiring ${i.requiredTag.category} >= ${i.requiredTag.minimum}`),console.log("🔍 COMPAT: Machine provides tags:",u.tags.map(h=>`${h.category}=${h.value}`));const m=u.tags.find(h=>h.category!==i.requiredTag.category?!1:typeof i.requiredTag.minimum=="boolean"?h.value===!0:typeof h.value=="number"&&h.value>=i.requiredTag.minimum);if(!m)return console.log(`🔍 COMPAT: No compatible tag found for ${i.requiredTag.category}`),{score:0,estimatedDuration:0};console.log(`🔍 COMPAT: Compatible tag found: ${m.category}=${m.value}`);let p=100;if(typeof m.value=="number"&&typeof i.requiredTag.minimum=="number"){const h=m.value/i.requiredTag.minimum,v=Math.min(200,h*10+Math.log2(h)*30);p+=v,console.log(`🔍 COMPAT: Efficiency: ${m.value}/${i.requiredTag.minimum} = ${h.toFixed(2)}, bonus: ${v.toFixed(1)}, total score: ${p.toFixed(1)}`)}let y=i.baseDurationMinutes||60;if(typeof m.value=="number"&&typeof i.requiredTag.minimum=="number"){const h=m.value/i.requiredTag.minimum;y=y/Math.max(.5,h)}return{score:p,estimatedDuration:y}}getJobPriorityScore(i){if(!i)return 0;const r={[yt.CRITICAL]:200,[yt.RUSH]:150,[yt.HIGH]:100,[yt.NORMAL]:50,[yt.LOW]:10}[i.priority]||50,o=i.rushOrder?50:0,u=Math.max(0,(Date.now()-i.createdAt)/(1e3*60*60));return r+o+u}executeAssignment(i){console.log(`🎯 JobAssignmentCoordinator: ASSIGNING job ${i.jobId} to machine ${i.machineId} for operation "${i.operationName}"`),je.emit(lt.JOB_STARTED,{jobId:i.jobId,machineId:i.machineId,facilityId:i.facilityId,subOperationIndex:i.subOperationIndex,operationName:i.operationName,estimatedDuration:i.estimatedDuration}),this.assignmentHistory.push(i);const l=this.availableMachines.get(i.facilityId);l&&l.delete(i.machineId)}getStats(){let i=0;for(const l of this.availableMachines.values())i+=l.size;return{totalAssignments:this.assignmentHistory.length,availableMachines:i,facilitiesRegistered:this.facilities.size}}}const ef=new Cy(new Map);class Af{constructor(i){De(this,"workspaces",new Map);De(this,"equipmentDefinitions");De(this,"currentGameTime",{totalGameHours:0,days:0,hours:0,isPaused:!1,gameSpeed:1});De(this,"onJobComplete",null);De(this,"facilities",new Map);this.equipmentDefinitions=i,ef.setEquipmentDatabase(i),this.initializeEventHandlers()}initializeEventHandlers(){je.subscribe(lt.JOB_STARTED,this.onJobStarted.bind(this)),je.subscribe(lt.OPERATION_COMPLETED,this.onOperationCompleted.bind(this)),console.log("🎯 MachineWorkspaceManager: Event handlers initialized (coordinator pattern)")}onJobStarted(i){const{jobId:l,machineId:r,facilityId:o,subOperationIndex:u,operationName:m,estimatedDuration:p}=i.data;console.log(`🎯 MachineWorkspaceManager: Executing job assignment from coordinator: ${l} → ${r}`),this.executeCoordinatorAssignment(l,r,o,u)}onOperationCompleted(i){const{jobId:l,operationIndex:r,facilityId:o}=i.data;console.log(`🎯 EVENT: Operation ${r} completed for job ${l}`)}setGameTime(i){this.currentGameTime=i}setJobCompleteCallback(i){this.onJobComplete=i}gameMinutesToHours(i){return i/60}initializeWorkspace(i){const l={facilityId:i.id,machines:new Map,jobQueue:[],completedJobs:[]};for(const r of i.equipment){const o=this.equipmentDefinitions.get(r.equipmentId);if(!o)continue;let u=!1;for(const m of o.tags)if(m.category===j.SURFACE||m.category===j.TURNING||m.category===j.MILLING||m.category===j.DRILLING||m.category===j.BASIC_MANIPULATION||m.category===j.PRECISION_MANIPULATION||m.category===j.MEASURING||m.category===j.QUALITY_CONTROL){u=!0;break}if((r.equipmentId==="shelving_basic"||r.equipmentId==="storage_industrial")&&(u=!1),u){const m={id:`slot-${r.id}`,machineId:r.id,maxCapacity:1};l.machines.set(r.id,m),console.log(`Created machine slot for ${o.name} (${r.id})`);const p=o.tags.map(h=>h.category);Hn.createMachineEventEmitter(r.id,i.id).becameAvailable(p)}}return this.workspaces.set(i.id,l),ef.registerFacility(i),console.log(`🎯 Facility ${i.id} registered with JobAssignmentCoordinator`),l}addEquipmentToWorkspace(i,l){const r=this.workspaces.get(i.id);if(!r){this.initializeWorkspace(i);return}const o=this.equipmentDefinitions.get(l.equipmentId);if(!o)return;let u=!1;for(const m of o.tags)if(m.category===j.SURFACE||m.category===j.TURNING||m.category===j.MILLING||m.category===j.DRILLING||m.category===j.BASIC_MANIPULATION||m.category===j.PRECISION_MANIPULATION){u=!0;break}if((l.equipmentId==="storage_basic"||l.equipmentId==="storage_industrial")&&(u=!1),u){const m={id:`slot-${l.id}`,machineId:l.id,maxCapacity:1};r.machines.set(l.id,m),console.log(`Added machine slot for new ${o.name} (${l.id})`);const p=o.tags.map(h=>h.category);Hn.createMachineEventEmitter(l.id,i.id).becameAvailable(p),console.log(`New equipment ${o.name} available - coordinator notified`)}}removeEquipmentFromWorkspace(i,l){const r=this.workspaces.get(i);if(!r)return;const o=r.machines.get(l);o&&(o.currentJob&&(console.log(`Moving job ${o.currentJob.id} back to queue as equipment ${l} is being removed`),o.currentJob.state="queued",o.currentJob.currentMachineId=void 0,r.jobQueue.unshift(o.currentJob)),r.machines.delete(l),console.log(`Removed machine slot for equipment ${l}`))}addJob(i,l,r,o=1,u=yt.NORMAL,m=!1,p){var N;if(!this.workspaces.get(i))throw new Error("Workspace not initialized");const h=this.facilities.get(i);if(!h)throw new Error("Facility not found");let v=r;console.log(`Creating job for ${r.name}`);const A=Z.createEmptyInventory(100),T={id:`job-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,facilityId:i,productId:l,method:v,quantity:o,priority:u,rushOrder:m,state:"queued",createdAt:Date.now(),currentOperationIndex:0,completedOperations:[],jobInventory:A,operationProducts:new Map,consumedMaterials:new Map,subOperations:new Map,enhancementSelection:p};return this.moveJobMaterials(T,h),this.initializeSubOperations(T,h),Nt.addJob(T),console.log(`Job ${T.id} added to job state manager for ${(N=T.method.operations[0])==null?void 0:N.name}`),T}initializeSubOperations(i,l){if(!i.subOperations){console.warn(`Job ${i.id} has no sub-operations map`);return}console.log(`Initializing sub-operations for job ${i.id} with ${i.method.operations.length} operations`),i.method.operations.forEach((r,o)=>{const u={id:`${i.id}_subop_${o}`,operationIndex:o,operation:r,state:"pending"};i.subOperations.set(o,u),console.log(`Created sub-operation ${o}: ${r.name} (state: pending)`)}),this.evaluateSubOperationReadiness(i,l)}evaluateSubOperationReadiness(i,l){if(!i.subOperations)return;console.log(`Evaluating sub-operation readiness for job ${i.id}`);let r=!1;for(const[o,u]of i.subOperations)u.state==="pending"&&(this.canStartSubOperation(i,u,l)?(console.log(`Sub-operation ${o} (${u.operation.name}) is ready - marking as queued`),u.state="queued",r=!0):console.log(`Sub-operation ${o} (${u.operation.name}) is not ready - missing materials`));r&&(console.log(`New sub-operations queued for job ${i.id}, notifying coordinator`),je.emit(lt.FACILITY_STATE_CHANGED,{facilityId:l.id,readyJobAvailable:!0,jobId:i.id}))}canStartSubOperation(i,l,r){var u;const o=l.operation;if(l.operationIndex>0)for(let m=0;m<l.operationIndex;m++){const p=(u=i.subOperations)==null?void 0:u.get(m);if(!p||p.state!=="completed")return console.log(`Sub-operation ${l.operationIndex} (${l.operation.name}) blocked by incomplete operation ${m}`),!1}if(!o.materialConsumption)return!0;for(const m of o.materialConsumption){const p=m.count*i.quantity;let y;m.tags&&m.tags.length>0?y=Z.getAvailableQuantityWithTags(i.jobInventory,m.itemId,m.tags,m.maxQuality):o.name.toLowerCase().includes("assembl")?y=Z.getAllItems(i.jobInventory).filter(A=>A.baseItemId===m.itemId).filter(A=>!A.tags.includes(E.DAMAGED)).reduce((A,T)=>A+T.quantity,0):y=Z.getAvailableQuantity(i.jobInventory,m.itemId);const h=W(m.itemId);if(y<p&&(h==null?void 0:h.manufacturingType)===z.RAW_MATERIAL&&r.inventory){const v=m.tags&&m.tags.length>0?Z.getAvailableQuantityWithTags(r.inventory,m.itemId,m.tags,m.maxQuality):Z.getAvailableQuantity(r.inventory,m.itemId);y+=v}if(y<p)return console.log(`Sub-operation ${l.id} lacks materials: need ${p} ${m.itemId}, have ${y}`),!1}return!0}analyzeOperationDependencies(i){const l=new Map;return i.forEach((r,o)=>{const u=r.requiredTag.category;l.has(u)||l.set(u,[]),l.get(u).push({operation:r,index:o})}),l}createIndependentSubJob(i,l,r){const o={...i.method,id:`${i.method.id}_sub_${r}`,name:`${l.name} (Sub-job)`,operations:[l]};return{id:`${i.id}_sub_${r}`,facilityId:i.facilityId,productId:i.productId,method:o,quantity:i.quantity,priority:i.priority,rushOrder:i.rushOrder,state:"queued",createdAt:Date.now(),currentOperationIndex:0,completedOperations:[],jobInventory:i.jobInventory,operationProducts:i.operationProducts,consumedMaterials:i.consumedMaterials||new Map,isParallelOperation:!0,parentJobId:i.id,originalOperationIndex:r}}moveJobMaterials(i,l){if(!l.inventory){console.warn("Facility has no inventory system");return}if(i.method.name.toLowerCase().includes("repair")){console.log(`Repair job ${i.id}: Looking for damaged item to repair`);const r=Z.getAllItems(l.inventory).filter(o=>o.baseItemId===i.productId&&(o.tags.includes(E.DAMAGED)||o.quality<50)).slice(0,i.quantity);if(r.length>0)for(const o of r)Z.removeItem(l.inventory,o.id,o.quantity),Z.addItem(i.jobInventory,o),console.log(`Moved damaged ${o.baseItemId} to repair job ${i.id}`);else console.warn(`No damaged ${i.productId} found for repair job ${i.id}`)}else if(i.method.name.toLowerCase().includes("disassembl")){console.log(`Disassembly job ${i.id}: Looking for item to disassemble`);const r=i.method.operations[0];if(r&&r.materialConsumption&&r.materialConsumption.length>0){const o=r.materialConsumption[0].itemId,u=r.materialConsumption[0].tags||[];console.log(`Disassembly job ${i.id}: Looking for ${o} with tags:`,u);const p=Z.getAllItems(l.inventory).filter(y=>{const h=y.baseItemId===o,v=u.length===0||u.every(A=>y.tags.includes(A));return h&&v}).slice(0,i.quantity);console.log(`Found ${p.length} suitable items for disassembly`);for(const y of p)Z.removeItem(l.inventory,y.id,y.quantity),Z.addItem(i.jobInventory,y),console.log(`Moved ${y.baseItemId} (tags: ${y.tags}) to disassembly job ${i.id}`);p.length===0&&console.warn(`No suitable ${o} found for disassembly job ${i.id}`)}else console.error(`Disassembly job ${i.id} has no material consumption defined in first operation`)}else console.log(`Manufacturing job ${i.id}: Materials will be moved just-in-time`)}addJobToQueue(i,l){if(l.rushOrder)i.jobQueue.unshift(l);else{const r=i.jobQueue.findIndex(o=>!o.rushOrder&&o.priority<l.priority);r===-1?i.jobQueue.push(l):i.jobQueue.splice(r,0,l)}}canStartOperation(i,l){const r=i.method.operations[i.currentOperationIndex];if(r.materialConsumption){for(const o of r.materialConsumption){const u=o.count*i.quantity;let m;{const p=W(o.itemId),y=(p==null?void 0:p.manufacturingType)===z.RAW_MATERIAL;if(o.tags&&o.tags.length>0?m=Z.getAvailableQuantityWithTags(i.jobInventory,o.itemId,o.tags,o.maxQuality):m=Z.getAvailableQuantity(i.jobInventory,o.itemId),m<u&&y&&l.inventory){const h=o.tags&&o.tags.length>0?Z.getAvailableQuantityWithTags(l.inventory,o.itemId,o.tags,o.maxQuality):Z.getAvailableQuantity(l.inventory,o.itemId);m+=h}}if(m<u)return console.log(`Job ${i.id} lacks materials: need ${u} ${o.itemId}, have ${m}`),!1}return!0}if(r.material_requirements)for(const o of r.material_requirements){const u=o.quantity*i.quantity;let m;if(o.required_tags&&o.required_tags.length>0?m=Z.getAvailableQuantityWithTags(i.jobInventory,o.material_id,o.required_tags,o.max_quality):m=Z.getAvailableQuantity(i.jobInventory,o.material_id),m<u)return console.log(`Job ${i.id} lacks materials: need ${u} ${o.material_id}, have ${m}`),!1}return!0}consumeOperationMaterials(i,l){const r=i.method.operations[i.currentOperationIndex];if(r.materialConsumption)for(const o of r.materialConsumption){const u=o.count*i.quantity,m=W(o.itemId),p=(m==null?void 0:m.manufacturingType)===z.RAW_MATERIAL;let y;if(o.tags&&o.tags.length>0?y=Z.getAvailableQuantityWithTags(i.jobInventory,o.itemId,o.tags,o.maxQuality):y=Z.getAvailableQuantity(i.jobInventory,o.itemId),y<u&&p&&l.inventory){const h=u-y;let v;o.tags&&o.tags.length>0?v=Z.getBestQualityItemsWithTags(l.inventory,o.itemId,h,o.tags,o.maxQuality):v=Z.getBestQualityItems(l.inventory,o.itemId,h);for(const A of v)Z.removeItem(l.inventory,A.id,A.quantity),Z.addItem(i.jobInventory,A);console.log(`Manufacturing v2 job ${i.id} pulled ${v.length} ${o.itemId} from facility`)}}if(r.material_requirements){for(const o of r.material_requirements)if(o.consumed_at_start){const u=o.quantity*i.quantity;let m;o.required_tags&&o.required_tags.length>0?m=Z.getBestQualityItemsWithTags(i.jobInventory,o.material_id,u,o.required_tags,o.max_quality):m=Z.getBestQualityItems(i.jobInventory,o.material_id,u);for(const y of m)Z.removeItem(i.jobInventory,y.id,y.quantity);i.consumedMaterials||(i.consumedMaterials=new Map);const p=i.consumedMaterials.get(o.material_id)||0;i.consumedMaterials.set(o.material_id,p+u),console.log(`Job ${i.id} consumed ${u} ${o.material_id} at operation start`)}}}calculateOperationDuration(i,l,r){const o=i.method.operations[i.currentOperationIndex],u=r.equipment.find(v=>v.id===l.machineId);if(!u)return 0;const m=this.equipmentDefinitions.get(u.equipmentId);if(!m)return 0;const p=m.tags.find(v=>v.category===o.requiredTag.category);let y=1;if(p&&typeof p.value=="number"){const v=o.requiredTag.optimal||o.requiredTag.minimum;y=typeof v=="number"?p.value/v:1}const h=y>1?1/y:2-y;return o.baseDurationMinutes*h}updateAllWorkspaces(i){for(const[l,r]of this.workspaces)this.updateWorkspace(r,i)}updateWorkspace(i,l){const r=this.getFacility(i.facilityId);if(r){for(const[o,u]of i.machines)if(u.currentJob&&u.currentProgress){u.currentProgress.lastUpdateTime=Date.now();const m=this.currentGameTime.totalGameHours-u.currentProgress.startTime,p=u.currentProgress.estimatedCompletion-u.currentProgress.startTime;m>=p&&this.completeOperation(i,u,r)}}}executeCoordinatorAssignment(i,l,r,o){const u=this.workspaces.get(r),m=this.getFacility(r);if(console.log(`🔍 DEBUG: executeCoordinatorAssignment for facility ${r}`),console.log(`🔍 DEBUG: workspace found: ${!!u}, facility found: ${!!m}`),console.log(`🔍 DEBUG: available workspaces: ${Array.from(this.workspaces.keys())}`),console.log(`🔍 DEBUG: available facilities: ${Array.from(this.facilities.keys())}`),!u||!m){console.error(`Cannot execute assignment: workspace or facility not found for ${r}`);return}const p=u.machines.get(l);if(!p){console.error(`Machine ${l} not found in workspace`);return}if(p.currentJob){console.warn(`Machine ${l} is already occupied, cannot assign job ${i}`);return}const y=Nt.getReadyJobs(),h=Nt.getJobsByState(Vt.IN_PROGRESS),A=[...y,...h].find(N=>N.id===i);if(!A){console.error(`Job ${i} not found in assignable jobs (ready: ${y.length}, in-progress: ${h.length})`);return}if(!A.subOperations){console.error(`Job ${i} has no sub-operations`);return}const T=A.subOperations.get(o);if(!T||T.state!=="queued"){console.error(`Sub-operation ${o} not ready for job ${i}`);return}console.log(`✅ Executing coordinator assignment: Job ${i} sub-op ${o} → Machine ${l}`),this.startSubOperationOnMachine(A,T,p,m)}tryAssignJobToMachine(i,l,r){return console.warn("⚠️  tryAssignJobToMachine called but job assignment is now handled by coordinator!"),!1}assignSubOperations(i,l,r){console.warn("⚠️  assignSubOperations called but this is now event-driven! This should not happen.");const o=[...i.jobQueue,...Array.from(i.machines.values()).map(u=>u.currentJob).filter(u=>u!==void 0)];for(const u of o)if(u.subOperations){if(r.length===0)break;this.evaluateSubOperationReadiness(u,l);for(const[m,p]of u.subOperations){if(p.state!=="queued")continue;if(r.length===0)break;const y=this.findMachineForOperation(p.operation,r,l);if(y){console.log(`Assigning sub-operation ${m} (${p.operation.name}) from job ${u.id} to machine ${y.machineId}`),this.startSubOperationOnMachine(u,p,y,l);const h=r.indexOf(y);h>-1&&r.splice(h,1)}}}}startSubOperationOnMachine(i,l,r,o){l.state="in_progress",l.assignedMachineId=r.machineId,l.startedAt=this.currentGameTime.totalGameHours,this.consumeSubOperationMaterials(i,l,o);const u=o.equipment.find(A=>A.id===r.machineId),m=u?this.equipmentDefinitions.get(u.equipmentId):null;let p=1;if(m){const A=m.tags.find(T=>T.category===l.operation.requiredTag.category);A&&typeof A.value=="number"&&(A.unit==="%"?p=Math.max(.5,100/A.value):p=Math.max(.5,1/Math.sqrt(A.value)))}const h=this.gameMinutesToHours(l.operation.baseDurationMinutes)*p;l.progress={startTime:this.currentGameTime.totalGameHours,estimatedCompletion:this.currentGameTime.totalGameHours+h,lastUpdateTime:Date.now()};const v={...i,id:l.id,method:{...i.method,operations:[l.operation]},currentOperationIndex:0,state:"in_progress"};r.currentJob=v,r.currentProgress={stepIndex:0,startTime:this.currentGameTime.totalGameHours,estimatedCompletion:this.currentGameTime.totalGameHours+h,lastUpdateTime:Date.now()},Nt.markJobStarted(i.id,!0),console.log(`Started sub-operation ${l.operation.name} on machine ${r.machineId} (duration: ${h.toFixed(2)} hours)`)}consumeSubOperationMaterials(i,l,r){if(l.operation.materialConsumption){console.log(`Consuming materials for sub-operation ${l.operation.name}`);for(const o of l.operation.materialConsumption){const u=o.count*i.quantity;let m;if(o.tags&&o.tags.length>0)m=Z.getBestQualityItemsWithTags(i.jobInventory,o.itemId,u,o.tags,o.maxQuality);else if(l.operation.name.toLowerCase().includes("assembl")){const y=Z.getAllItems(i.jobInventory).filter(v=>v.baseItemId===o.itemId&&!v.tags.includes(E.DAMAGED)).sort((v,A)=>A.quality-v.quality);m=[];let h=u;for(const v of y){if(h<=0)break;const A=Math.min(h,v.quantity);A>0&&(m.push({...v,quantity:A}),h-=A)}}else m=Z.getBestQualityItems(i.jobInventory,o.itemId,u);const p=u-m.reduce((y,h)=>y+h.quantity,0);if(p>0){const y=W(o.itemId);if((y==null?void 0:y.manufacturingType)===z.RAW_MATERIAL&&r.inventory){let h;o.tags&&o.tags.length>0?h=Z.getBestQualityItemsWithTags(r.inventory,o.itemId,p,o.tags,o.maxQuality):h=Z.getBestQualityItems(r.inventory,o.itemId,p);for(const v of h)Z.removeItem(r.inventory,v.id,v.quantity),Z.addItem(i.jobInventory,v),m.push(v)}}for(const y of m)Z.removeItem(i.jobInventory,y.id,y.quantity),console.log(`Consumed ${y.quantity} ${o.itemId} from job inventory`)}}}findMachineForOperation(i,l,r){for(const o of l){const u=r.equipment.find(y=>y.id===o.machineId);if(!u)continue;const m=this.equipmentDefinitions.get(u.equipmentId);if(!m)continue;if(m.tags.some(y=>y.category!==i.requiredTag.category?!1:typeof i.requiredTag.minimum=="boolean"?y.value===!0:typeof y.value=="number"&&y.value>=i.requiredTag.minimum))return o}return null}findAvailableMachineForJob(i,l,r){const o=i.method.operations[i.currentOperationIndex];if(!o)return console.log(`DEBUG: No operation found for job ${i.id} at index ${i.currentOperationIndex}`),null;console.log(`DEBUG: Looking for machine for operation "${o.name}"`),console.log("DEBUG: Operation requires:",o.requiredTag),console.log("DEBUG: Available machines:",l.length);for(const u of l){const m=r.equipment.find(h=>h.id===u.machineId);if(!m){console.log(`DEBUG: Machine ${u.machineId} has no equipment record`);continue}const p=this.equipmentDefinitions.get(m.equipmentId);if(!p){console.log(`DEBUG: Equipment ${m.equipmentId} has no definition`);continue}console.log(`DEBUG: Checking machine ${u.machineId} (${p.name})`),console.log("DEBUG: Equipment tags:",p.tags);const y=p.tags.some(h=>{if(console.log(`DEBUG: Comparing tag ${h.category} (value: ${h.value}) with required ${o.requiredTag.category} (min: ${o.requiredTag.minimum})`),h.category!==o.requiredTag.category)return console.log("DEBUG: Tag category mismatch"),!1;if(typeof o.requiredTag.minimum=="boolean"){const v=h.value===!0;return console.log(`DEBUG: Boolean match: ${v}`),v}else{const v=typeof h.value=="number"&&h.value>=o.requiredTag.minimum;return console.log(`DEBUG: Numeric match: tag.value (${h.value}) >= minimum (${o.requiredTag.minimum}) = ${v}`),v}});if(console.log(`DEBUG: Machine ${u.machineId} provides required tag: ${y}`),y)return console.log(`DEBUG: Selected machine ${u.machineId} for operation ${o.name}`),u}return console.log(`DEBUG: No suitable machine found for operation ${o.name}`),null}startJobOnMachine(i,l,r){l.currentJob=i,i.currentMachineId=l.machineId,i.state="in_progress";const o=this.gameMinutesToHours(this.calculateOperationDuration(i,l,r));l.currentProgress={stepIndex:i.currentOperationIndex,startTime:this.currentGameTime.totalGameHours,estimatedCompletion:this.currentGameTime.totalGameHours+o,lastUpdateTime:Date.now()},this.consumeOperationMaterials(i,r)}completeOperation(i,l,r){var p;const o=l.currentJob;if(!o){console.log("DEBUG: completeOperation called but no current job on machine");return}if(console.log(`DEBUG: Completing operation for job ${o.id}`),o.id.includes("_subop_")){console.log(`DEBUG: Job ${o.id} is a sub-operation, using sub-operation completion logic`),this.completeSubOperation(i,l,r,o);return}console.log(`DEBUG: Job ${o.id} is a regular job, using standard completion logic`);const u=o.method.operations[o.currentOperationIndex];u.can_fail&&Math.random()<u.failure_chance?(console.log(`Operation failed for job ${o.id}: ${u.name}`),u.failure_result==="scrap"?(o.state="failed",i.completedJobs.push(o)):u.failure_result==="downgrade"&&(o.finalQuality=(o.finalQuality||85)*.8)):(this.processOperationTransformation(o,u),o.completedOperations.push(u.id),o.currentOperationIndex++,console.log(`Job ${o.id} completed operation: ${u.name}`)),l.currentJob=void 0,l.currentProgress=void 0,o.currentMachineId=void 0;const m=r.equipment.find(y=>y.id===l.machineId);if(m){const y=this.equipmentDefinitions.get(m.equipmentId);if(y){const h=y.tags.map(A=>A.category);Hn.createMachineEventEmitter(l.machineId,r.id).becameAvailable(h)}}o.isParallelOperation&&o.parentJobId?(o.state="completed",o.completedAt=this.currentGameTime.totalGameHours,i.completedJobs.push(o),console.log(`Sub-job ${o.id} completed!`)):o.currentOperationIndex>=o.method.operations.length?(this.finalizeJobInventory(o,r),o.state="completed",o.completedAt=this.currentGameTime.totalGameHours,i.completedJobs.push(o),this.onJobComplete&&this.onJobComplete(o),console.log(`Job ${o.id} completed!`)):(o.state="queued",this.addJobToQueue(i,o),console.log(`Job ${o.id} returned to queue for next operation: ${(p=o.method.operations[o.currentOperationIndex])==null?void 0:p.name}`))}completeSubOperation(i,l,r,o){console.log(`DEBUG: Completing sub-operation ${o.id}`);const u=o.id.split("_subop_")[0],m=parseInt(o.id.split("_subop_")[1]);console.log(`DEBUG: Looking for parent job ${u}, sub-operation index ${m}`);const y=Nt.getAllJobStates().map(B=>B.job);console.log(`DEBUG: Searching in ${y.length} total jobs from JobStateManager`),console.log("DEBUG: Job IDs available:",y.map(B=>B.id));const h=y.find(B=>B.id===u);if(!h||!h.subOperations){console.error(`DEBUG: Could not find parent job ${u} for sub-operation ${o.id}`),console.error(`DEBUG: Parent job found: ${!!h}, has subOperations: ${h!=null&&h.subOperations?"yes":"no"}`);return}console.log(`DEBUG: Found parent job ${h.id} with ${h.subOperations.size} sub-operations`);const v=h.subOperations.get(m);if(!v){console.error(`Could not find sub-operation ${m} in parent job ${u}`);return}const A=v.operation;A.can_fail&&Math.random()<A.failure_chance?(console.log(`Sub-operation failed: ${A.name}`),v.state="failed"):(this.processSubOperationTransformation(h,v),v.state="completed",v.completedAt=this.currentGameTime.totalGameHours,console.log(`Sub-operation ${v.operation.name} completed for job ${h.id}`),this.evaluateSubOperationReadiness(h,r),Nt.evaluateJobState(h.id)),l.currentJob=void 0,l.currentProgress=void 0,je.emit(lt.OPERATION_COMPLETED,{jobId:h.id,operationIndex:m,facilityId:r.id,machineId:l.machineId,outputs:h.operationProducts.get(m)||[]});const T=Hn.createMachineEventEmitter(l.machineId,r.id),N=r.equipment.find(B=>B.id===l.machineId),I=N?this.equipmentDefinitions.get(N.equipmentId):void 0,H=I?I.tags.map(B=>B.category):[];T.becameAvailable(H),this.checkParentJobCompletion(i,h,r)}processSubOperationTransformation(i,l){const r=l.operation;if(r.name==="Component Extraction"){console.log(`Processing component extraction for ${r.name}`),this.extractComponentsToJobInventory(i,l,r);return}if(r.materialProduction)for(const o of r.materialProduction){const u=o.count*i.quantity;for(let m=0;m<u;m++){const p=Za({baseItemId:o.itemId,quantity:1,quality:o.quality||75,tags:o.tags||[]});Z.addItem(i.jobInventory,p)}console.log(`Sub-operation produced ${u} ${o.itemId}`)}}extractComponentsToJobInventory(i,l,r){if(!r.materialConsumption||r.materialConsumption.length===0){console.warn("Component extraction operation has no material consumption defined");return}const o=r.materialConsumption[0].itemId,u=W(o);if(!u||!u.assemblyComponents){console.warn(`Cannot extract components: no assembly definition for ${o}`);return}console.log(`Extracting components from ${u.name} to job inventory`);for(const m of u.assemblyComponents){const y=(Math.random()-.5)*20,h=Math.round(Math.max(5,Math.min(95,25+y))),v=[];h<30&&v.push("damaged");const A=Za({baseItemId:m.componentId,quantity:m.quantity*i.quantity,quality:h,tags:v,metadata:{source:"extraction",extractedFrom:o,extractedAt:this.currentGameTime.totalGameHours}});Z.addItem(i.jobInventory,A),console.log(`Extracted ${m.quantity}x ${m.componentId} at ${h}% quality`)}}checkParentJobCompletion(i,l,r){if(!l.subOperations)return;if(Array.from(l.subOperations.values()).every(u=>u.state==="completed"||u.state==="failed")){console.log(`All sub-operations complete for job ${l.id}`);const u=i.jobQueue.findIndex(m=>m.id===l.id);u!==-1&&i.jobQueue.splice(u,1),l.state="completed",l.completedAt=this.currentGameTime.totalGameHours,this.finalizeJobInventory(l,r),i.completedJobs.push(l),this.onJobComplete&&this.onJobComplete(l),console.log(`Manufacturing v2 job ${l.id} completed!`)}}setFacility(i){this.facilities.set(i.id,i)}getFacility(i){return this.facilities.get(i)||null}getWorkspace(i){return this.workspaces.get(i)}cancelJob(i,l){var v;const r=this.workspaces.get(i),o=this.facilities.get(i);if(!r||!o)return console.error(`Cannot cancel job ${l}: workspace or facility not found`),!1;let u,m=null,p;const y=r.jobQueue.findIndex(A=>A.id===l);if(y!==-1&&(u=r.jobQueue[y],m="queue"),!u){for(const A of r.machines.values())if(((v=A.currentJob)==null?void 0:v.id)===l){u=A.currentJob,m="machine",p=A;break}}if(!u&&r.completedJobs.findIndex(T=>T.id===l)!==-1)return console.warn(`Job ${l} is already completed and cannot be cancelled`),!1;if(!u)return console.error(`Job ${l} not found`),!1;const h=this.calculateCancellationRecovery(u);return this.finalizeJobInventory(u,o),u.state="cancelled",u.completedAt=this.currentGameTime.totalGameHours,m==="queue"?r.jobQueue.splice(y,1):m==="machine"&&p&&(p.currentJob=void 0,p.currentProgress=void 0),r.completedJobs.push(u),console.log(`Job ${l} cancelled. Recovery: ${h.totalItemsRecovered} items, ${h.estimatedValue} credits value`),!0}calculateCancellationRecovery(i){const l=[];let r=0,o=0;for(const u of i.jobInventory.groups.values())for(const m of u.slots)for(const p of m.stack.instances)l.push({itemId:p.baseItemId,quantity:p.quantity,tags:p.tags}),r+=p.quantity,o+=p.quantity*10;return{recoveredItems:l,totalItemsRecovered:r,estimatedValue:o,operationsCompleted:i.completedOperations.length,timeInvested:i.startedAt?this.currentGameTime.totalGameHours-i.startedAt:0}}processOperationTransformation(i,l){var o;const r=[];if(l.materialConsumption||l.materialProduction){if(l.materialConsumption)for(const u of l.materialConsumption){const m=u.count*i.quantity;let p;u.tags&&u.tags.length>0?p=Z.getBestQualityItemsWithTags(i.jobInventory,u.itemId,m,u.tags,u.maxQuality):p=Z.getBestQualityItems(i.jobInventory,u.itemId,m);for(const h of p)Z.removeItem(i.jobInventory,h.id,h.quantity);i.consumedMaterials||(i.consumedMaterials=new Map);const y=i.consumedMaterials.get(u.itemId)||0;i.consumedMaterials.set(u.itemId,y+m),console.log(`Job ${i.id} consumed ${m} ${u.itemId} during operation`)}if(l.materialProduction)for(const u of l.materialProduction){const m=u.count*i.quantity,p=Za({baseItemId:u.itemId,tags:u.tags||[],quality:u.quality||85,quantity:m,metadata:{source:"manufacturing",operationId:l.id,jobId:i.id,producedAt:this.currentGameTime.totalGameHours}});Z.addItem(i.jobInventory,p),r.push(p),console.log(`Job ${i.id} produced ${m} ${u.itemId} with tags [${(o=u.tags)==null?void 0:o.join(", ")}]`)}}else if(l.material_requirements){for(const u of l.material_requirements)if(!u.consumed_at_start){const m=u.quantity*i.quantity;let p;u.required_tags&&u.required_tags.length>0?p=Z.getBestQualityItemsWithTags(i.jobInventory,u.material_id,m,u.required_tags,u.max_quality):p=Z.getBestQualityItems(i.jobInventory,u.material_id,m);for(const h of p)Z.removeItem(i.jobInventory,h.id,h.quantity);i.consumedMaterials||(i.consumedMaterials=new Map);const y=i.consumedMaterials.get(u.material_id)||0;i.consumedMaterials.set(u.material_id,y+m),console.log(`Job ${i.id} consumed ${m} ${u.material_id} during operation (legacy)`)}}r.length>0&&i.operationProducts.set(i.currentOperationIndex,r)}finalizeJobInventory(i,l){if(!l.inventory){console.warn("Facility has no inventory system for job finalization");return}console.log(`Finalizing job ${i.id} - moving items from job inventory to facility`);const r=[];for(const u of i.jobInventory.groups.values())for(const m of u.slots)for(const p of m.stack.instances){const y={id:p.id,baseItemId:p.baseItemId,quantity:p.quantity,quality:p.quality,tags:[...p.tags],acquiredAt:p.acquiredAt,lastModified:Date.now(),metadata:p.metadata?{...p.metadata}:void 0};r.push(y),console.log(`Will move ${y.quantity}x ${y.baseItemId} (quality: ${y.quality}%) to facility`)}for(const u of r)Z.removeItem(i.jobInventory,u.id,u.quantity);let o=0;for(const u of r){const m=W(u.baseItemId);Z.addItem(l.inventory,u)?(o++,console.log(`Successfully moved ${u.quantity}x ${u.baseItemId} to facility inventory`)):console.error(`Failed to move ${u.quantity}x ${u.baseItemId} to facility inventory - baseItem: ${!!m}`)}console.log(`Job ${i.id} finalized - ${o}/${r.length} items successfully moved to facility inventory`)}}const tf=["Titan","Proxima","Vega","Helios","Quantum","Stellar","Nova","Orion","Centauri","Nebula","Cosmic","Galactic","Solar","Lunar","Asteroid"],af=["Mining Corp","Steel Works","Salvage Co","Industrial","Precision Parts","Systems Ltd","Manufacturing","Supply Chain","Materials Inc","Dynamics","Industries","Technologies","Solutions","Enterprises","Group"],nf=[{type:"mining",specialties:["steel","aluminum","titanium"],reputation:[60,90]},{type:"salvage",specialties:["electronics","components","damaged_weapons"],reputation:[30,70]},{type:"precision",specialties:["machined_components","aluminum","electronics"],reputation:[70,95]},{type:"industrial",specialties:["steel","plastic","rubber"],reputation:[50,80]},{type:"military",specialties:["titanium","electronics","components"],reputation:[80,100]}],lf={steel:{basePrice:4.5,variance:.8,quantityRange:[50,500],deliveryHours:[12,48],commonGrades:["standard","premium"]},aluminum:{basePrice:6.2,variance:1,quantityRange:[25,200],deliveryHours:[18,72],commonGrades:["standard","premium"]},plastic:{basePrice:2.1,variance:.5,quantityRange:[100,800],deliveryHours:[6,24],commonGrades:["salvage","standard"]},electronics:{basePrice:15,variance:3,quantityRange:[10,100],deliveryHours:[24,120],commonGrades:["salvage","standard","military"]},machined_components:{basePrice:45,variance:8,quantityRange:[5,50],deliveryHours:[48,168],commonGrades:["standard","premium","military"]},titanium:{basePrice:25,variance:5,quantityRange:[10,100],deliveryHours:[72,240],commonGrades:["premium","military"]},damaged_weapons:{basePrice:12,variance:4,quantityRange:[1,20],deliveryHours:[12,48],commonGrades:["salvage"]}};class Sf{constructor(){De(this,"suppliers",new Map);De(this,"supplierIdCounter",0);this.generateSuppliers(20)}generateSuppliers(i){for(let l=0;l<i;l++){const r=this.createRandomSupplier();this.suppliers.set(r.id,r)}}createRandomSupplier(){const i=tf[Math.floor(Math.random()*tf.length)],l=af[Math.floor(Math.random()*af.length)],r=nf[Math.floor(Math.random()*nf.length)],[o,u]=r.reputation,m=Math.floor(Math.random()*(u-o+1))+o;return{id:`supplier-${++this.supplierIdCounter}`,name:`${i} ${l}`,reputation:m,reliability:Math.max(30,m+Math.floor(Math.random()*21)-10),specialties:r.specialties}}generateMarketLots(i,l){const r=[],o=Object.keys(lf);for(let u=0;u<i;u++){const m=o[Math.floor(Math.random()*o.length)],p=lf[m],y=Array.from(this.suppliers.values()).filter(A=>A.specialties.includes(m));if(y.length===0)continue;const h=y[Math.floor(Math.random()*y.length)],v=this.createMaterialLot(h,m,p,l);r.push(v)}return r.sort((u,m)=>u.totalPrice-m.totalPrice)}createMaterialLot(i,l,r,o){const[u,m]=r.quantityRange,p=Math.floor(Math.random()*(m-u+1))+u,y=(i.reputation-50)/100,h=r.variance*(1-Math.abs(y)*.3),v=1+(Math.random()*2-1)*h,A=r.basePrice*v,T=1+y*.2,N=Math.round(A*T*100)/100,[I,H]=r.deliveryHours,B=Math.floor(Math.random()*(H-I+1))+I,P=1-i.reliability/100*.3,F=Math.ceil(B*P),oe=r.commonGrades;let se;i.reputation>=80?se=oe[Math.floor(Math.random()*Math.min(2,oe.length))+Math.max(0,oe.length-2)]:i.reputation<=40?se=oe[Math.floor(Math.random()*Math.min(2,oe.length))]:se=oe[Math.floor(Math.random()*oe.length)];const J=Math.floor(Math.random()*49)+24;return{id:`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,supplierId:i.id,materialId:l,quantity:p,pricePerUnit:N,totalPrice:Math.round(N*p),qualityGrade:se,deliveryTimeHours:F,expiresAt:o+J,description:this.generateLotDescription(i,l,se,p)}}generateLotDescription(i,l,r,o){const u=[`Fresh stock from ${i.name}`,`Limited time offer - ${o} units available`,"Direct from supplier warehouse","Bulk pricing available",`Quality ${r} grade materials`,`Fast shipping from ${i.name}`,"Surplus inventory clearance","Premium supplier quality guaranteed"];return u[Math.floor(Math.random()*u.length)]}getSupplier(i){return this.suppliers.get(i)}getAllSuppliers(){return Array.from(this.suppliers.values())}simulateMarketForces(i,l){return i.map(r=>{const o=Math.sin(l/24)*.1,u=(Math.random()-.5)*.05,m=this.getMaterialDemandMultiplier(r.materialId,l),p=1+o+u+m,y=Math.max(.1,r.pricePerUnit*p);return{...r,pricePerUnit:Math.round(y*100)/100,totalPrice:Math.round(y*r.quantity)}})}getMaterialDemandMultiplier(i,l){return{steel:Math.sin(l/72)*.15,aluminum:Math.sin(l/48)*.12,electronics:Math.sin(l/96)*.2,titanium:Math.sin(l/168)*.25,plastic:Math.sin(l/36)*.08,machined_components:Math.sin(l/120)*.18}[i]||0}removeExpiredLots(i,l){return i.filter(r=>r.expiresAt>l)}}const sf=["Free","United","Rebel","Corporate","Military","Colonial","Independent","Frontier","Outer","Inner","Northern","Southern","Eastern","Western"],rf=["Coalition","Alliance","Federation","Consortium","Guild","Syndicate","Corporation","Industries","Security","Defense Force","Militia","Guard","Collective","Union","Assembly","Council","Command","Division"],jo={military:{qualityStandards:"high",paymentReliability:[80,100],preferredProducts:["basic_sidearm","tactical_knife"],quantityRange:[20,100],paymentMultiplier:1.4,deadlineRange:[168,504]},corporate:{qualityStandards:"standard",paymentReliability:[70,95],preferredProducts:["basic_sidearm"],quantityRange:[50,200],paymentMultiplier:1.2,deadlineRange:[336,840]},rebel:{qualityStandards:"low",paymentReliability:[40,80],preferredProducts:["basic_sidearm","tactical_knife"],quantityRange:[10,80],paymentMultiplier:.9,deadlineRange:[168,672]},civilian:{qualityStandards:"standard",paymentReliability:[60,85],preferredProducts:["tactical_knife"],quantityRange:[5,30],paymentMultiplier:1,deadlineRange:[504,1344]},government:{qualityStandards:"high",paymentReliability:[90,100],preferredProducts:["basic_sidearm"],quantityRange:[100,500],paymentMultiplier:1.3,deadlineRange:[672,1680]}},Ry={basic_sidearm:{basePrice:150,qualityMultiplier:{junk:.3,functional:.7,standard:1,pristine:1.4}},tactical_knife:{basePrice:65,qualityMultiplier:{junk:.3,functional:.7,standard:1,pristine:1.4}}};class Mf{constructor(){De(this,"customers",new Map);De(this,"customerIdCounter",0);De(this,"contractIdCounter",0);this.generateCustomers(15)}generateCustomers(i){const l=Object.keys(jo);for(let r=0;r<i;r++){const o=this.createRandomCustomer(l);this.customers.set(o.id,o)}}createRandomCustomer(i){const l=i[Math.floor(Math.random()*i.length)],r=jo[l],o=sf[Math.floor(Math.random()*sf.length)],u=rf[Math.floor(Math.random()*rf.length)],[m,p]=r.paymentReliability,y=Math.floor(Math.random()*(p-m+1))+m;return{id:`customer-${++this.customerIdCounter}`,name:`${o} ${u}`,type:l,reputation:Math.floor(Math.random()*41)+60,paymentReliability:y,qualityStandards:r.qualityStandards,preferredProducts:r.preferredProducts}}generateCustomerContracts(i,l){const r=[];for(let o=0;o<i;o++){const u=this.selectRandomCustomer();if(!u)continue;const m=this.createCustomerContract(u,l);r.push(m)}return r.sort((o,u)=>u.totalPayment-o.totalPayment)}selectRandomCustomer(){const i=Array.from(this.customers.values());if(i.length!==0)return i[Math.floor(Math.random()*i.length)]}createCustomerContract(i,l){var Ae;const r=jo[i.type],o=r.preferredProducts[Math.floor(Math.random()*r.preferredProducts.length)],[u,m]=r.quantityRange,p=Math.floor(Math.random()*(m-u+1))+u,y=this.getMinimumQualityForStandard(r.qualityStandards),h=((Ae=Ry[o])==null?void 0:Ae.basePrice)||100,v=r.paymentMultiplier,A=1+(i.reputation-75)/100,T=.9+Math.random()*.2,I=Math.round(h*v*A*T)*p,[H,B]=r.deadlineRange,P=Math.floor(Math.random()*(B-H+1))+H,F=Math.random()<.15,oe=i.type!=="military"&&i.type!=="government",se=oe?Math.floor(Math.random()*21)+60:100,J={productId:o,quantity:p,minimumQuality:y,maxAcceptableDefects:Math.floor(p*.05)};return{id:`contract-${++this.contractIdCounter}`,customerId:i.id,title:this.generateContractTitle(i,o,p),description:this.generateContractDescription(i,J),requirements:[J],totalPayment:F?Math.floor(I*1.3):I,deadlineHours:F?Math.floor(P*.7):P,rushOrder:F,allowPartialFulfillment:oe,minimumFulfillmentPercent:se,penaltyRate:.05,bonusRate:F?.1:.02,status:"available"}}getMinimumQualityForStandard(i){switch(i){case"low":return 30;case"standard":return 60;case"high":return 80;case"military":return 90;default:return 50}}generateContractTitle(i,l,r){const o=l.replace("_"," ").replace(/\b\w/g,m=>m.toUpperCase()),u=[`${i.name} ${o} Order`,`${r}x ${o} Contract`,`${i.name} Procurement Request`,`${o} Supply Agreement`,`Emergency ${o} Order`];return u[Math.floor(Math.random()*u.length)]}generateContractDescription(i,l){l.productId.replace("_"," ");const r={military:"Urgent military procurement for active operations.",corporate:"Standard corporate security equipment order.",rebel:"Resistance forces require reliable equipment.",civilian:"Civilian protection and utility contract.",government:"Official government procurement contract."},o={low:"Any functional condition acceptable.",standard:"Standard quality requirements apply.",high:"High quality standards required.",military:"Military specification quality mandatory."};return`${r[i.type]} ${o[i.qualityStandards]} Payment guaranteed upon delivery verification.`}getCustomer(i){return this.customers.get(i)}getAllCustomers(){return Array.from(this.customers.values())}removeExpiredContracts(i,l){return i.filter(r=>r.status!=="available"?!0:l-(r.acceptedAt||l-168)<504)}}function ct(f){return{description:"",tier:tt.BASIC,footprint:0,powerRequirement:0,purchaseCost:0,installationCost:0,dailyOperatingCost:0,condition:{current:100,degradationRate:.5,maintenanceCost:10,failureThreshold:20},...f}}const Lo=ct({id:"hand_tools_basic",name:"Basic Hand Tools",description:"Essential hand tools for simple assembly and repair work",tier:tt.BASIC,tags:[{category:j.BASIC_MANIPULATION,value:10,unit:"%"},{category:j.MANUAL,value:!0}],footprint:0,purchaseCost:200,dailyOperatingCost:0}),Go=ct({id:"hand_tools_precision",name:"Precision Hand Tools",description:"High-quality hand tools for detailed work",tier:tt.STANDARD,tags:[{category:j.BASIC_MANIPULATION,value:15,unit:"%"},{category:j.PRECISION_MANIPULATION,value:8,unit:"%"},{category:j.MANUAL,value:!0}],footprint:.5,purchaseCost:800,dailyOperatingCost:1}),Uo=ct({id:"workbench_basic",name:"Basic Workbench",description:"Simple work surface with built-in vise",tier:tt.BASIC,tags:[{category:j.SURFACE,value:2,unit:"m²",consumable:!0},{category:j.HOLDING,value:!0},{category:j.STORAGE,value:.5,unit:"m³"}],footprint:3,purchaseCost:500,dailyOperatingCost:0}),of=ct({id:"workbench_heavy_duty",name:"Heavy-Duty Workbench",description:"Reinforced workbench for heavy components",tier:tt.STANDARD,tags:[{category:j.SURFACE,value:3,unit:"m²",consumable:!0},{category:j.HOLDING,value:!0},{category:j.STORAGE,value:1,unit:"m³"},{category:j.HEAVY_MANIPULATION,value:20,unit:"%"}],footprint:4,purchaseCost:1200,dailyOperatingCost:0,requiresFoundation:!0}),wo=ct({id:"lathe_manual",name:"Manual Lathe",description:"Traditional hand-operated lathe for turning operations",tier:tt.BASIC,tags:[{category:j.TURNING,value:8,unit:"%",consumable:!0},{category:j.MANUAL,value:!0}],footprint:3,purchaseCost:1500,dailyOperatingCost:2,minSkillLevel:20}),cf=ct({id:"lathe_benchtop",name:"Benchtop Lathe",description:"Small powered lathe for precision turning",tier:tt.STANDARD,tags:[{category:j.TURNING,value:25,unit:"%",consumable:!0},{category:j.POWERED,value:!0},{category:j.SURFACE,value:1,unit:"m²"},{category:j.HOLDING,value:!0}],footprint:2,powerRequirement:1.5,purchaseCost:4500,dailyOperatingCost:8,minSkillLevel:30}),Ho=ct({id:"mill_manual",name:"Manual Mill",description:"Hand-operated milling machine",tier:tt.BASIC,tags:[{category:j.MILLING,value:10,unit:"%",consumable:!0},{category:j.DRILLING,value:15,unit:"%",consumable:!0},{category:j.BORING,value:8,unit:"%",consumable:!0},{category:j.MANUAL,value:!0}],footprint:3,purchaseCost:2e3,dailyOperatingCost:3,minSkillLevel:25}),uf=ct({id:"mill_benchtop",name:"Benchtop Mill",description:"Compact powered milling machine",tier:tt.STANDARD,tags:[{category:j.MILLING,value:30,unit:"%",consumable:!0},{category:j.DRILLING,value:35,unit:"%",consumable:!0},{category:j.POWERED,value:!0},{category:j.SURFACE,value:1.5,unit:"m²"},{category:j.HOLDING,value:!0}],footprint:2.5,powerRequirement:2,purchaseCost:6e3,dailyOperatingCost:12,minSkillLevel:35}),df=ct({id:"cnc_mill_basic",name:"Basic CNC Mill",description:"3-axis CNC milling machine",tier:tt.ADVANCED,tags:[{category:j.MILLING,value:70,unit:"%",consumable:!0},{category:j.DRILLING,value:80,unit:"%",consumable:!0},{category:j.POWERED,value:!0},{category:j.COMPUTER_CONTROLLED,value:!0},{category:j.SURFACE,value:2,unit:"m²"},{category:j.HOLDING,value:!0},{category:j.PRECISION_MANIPULATION,value:45,unit:"%"}],footprint:8,powerRequirement:5,purchaseCost:45e3,installationCost:5e3,dailyOperatingCost:50,minSkillLevel:40,requiresFoundation:!0}),mf=ct({id:"cnc_center_advanced",name:"Advanced CNC Machining Center",description:"5-axis CNC with automatic tool changer",tier:tt.CUTTING_EDGE,tags:[{category:j.MILLING,value:95,unit:"%",consumable:!0},{category:j.TURNING,value:85,unit:"%",consumable:!0},{category:j.DRILLING,value:95,unit:"%",consumable:!0},{category:j.GRINDING,value:60,unit:"%",consumable:!0},{category:j.POWERED,value:!0},{category:j.AUTOMATED,value:!0},{category:j.COMPUTER_CONTROLLED,value:!0},{category:j.SURFACE,value:4,unit:"m²"},{category:j.HOLDING,value:!0},{category:j.PRECISION_MANIPULATION,value:90,unit:"%"},{category:j.MATERIAL_FEED,value:!0}],footprint:25,powerRequirement:15,purchaseCost:35e4,installationCost:25e3,dailyOperatingCost:150,minSkillLevel:60,operatorsRequired:1,requiresFoundation:!0,requiresCoolant:!0}),ko=ct({id:"measuring_tools_basic",name:"Basic Measuring Tools",description:"Calipers, micrometers, and gauges",tier:tt.BASIC,tags:[{category:j.MEASURING,value:1,unit:"level"},{category:j.QUALITY_CONTROL,value:1,unit:"level"},{category:j.MANUAL,value:!0}],footprint:.5,purchaseCost:500,dailyOperatingCost:0}),ff=ct({id:"cmm_basic",name:"Coordinate Measuring Machine",description:"Precision measurement system for quality control",tier:tt.ADVANCED,tags:[{category:j.MEASURING,value:5,unit:"level"},{category:j.QUALITY_CONTROL,value:5,unit:"level"},{category:j.DIMENSIONAL_INSPECTION,value:3,unit:"level"},{category:j.POWERED,value:!0},{category:j.COMPUTER_CONTROLLED,value:!0},{category:j.PRECISION_MANIPULATION,value:95,unit:"%"}],footprint:6,powerRequirement:2,purchaseCost:8e4,installationCost:1e4,dailyOperatingCost:30,minSkillLevel:50,requiresFoundation:!0,requiresVentilation:!0}),$o=ct({id:"shelving_basic",name:"Basic Storage Shelving",description:"Simple metal shelving units",tier:tt.BASIC,tags:[{category:j.STORAGE,value:8,unit:"m³",consumable:!0}],footprint:2,purchaseCost:300,dailyOperatingCost:0}),pf=ct({id:"storage_industrial",name:"Industrial Storage System",description:"Heavy-duty racking with organization system",tier:tt.STANDARD,tags:[{category:j.STORAGE,value:25,unit:"m³",consumable:!0},{category:j.HEAVY_MANIPULATION,value:10,unit:"%"}],footprint:6,purchaseCost:2e3,dailyOperatingCost:1,requiresFoundation:!0}),gf=ct({id:"overhead_crane",name:"Overhead Crane System",description:"5-ton overhead crane for heavy lifting",tier:tt.STANDARD,tags:[{category:j.HEAVY_LIFTING,value:!0},{category:j.HEAVY_MANIPULATION,value:80,unit:"%"},{category:j.POWERED,value:!0}],footprint:0,powerRequirement:5,purchaseCost:25e3,installationCost:15e3,dailyOperatingCost:20,minSkillLevel:30,operatorsRequired:1,requiresFoundation:!0}),yf=ct({id:"clean_room_basic",name:"Basic Clean Room",description:"Class 10000 clean room for electronics assembly",tier:tt.ADVANCED,tags:[{category:j.CLEAN_ROOM,value:!0},{category:j.TEMPERATURE_CONTROLLED,value:!0},{category:j.SURFACE,value:20,unit:"m²"}],footprint:25,powerRequirement:10,purchaseCost:1e5,installationCost:5e4,dailyOperatingCost:100,requiresVentilation:!0}),kn=new Map([[Lo.id,Lo],[Go.id,Go],[Uo.id,Uo],[of.id,of],[wo.id,wo],[cf.id,cf],[Ho.id,Ho],[uf.id,uf],[df.id,df],[mf.id,mf],[ko.id,ko],[ff.id,ff],[$o.id,$o],[pf.id,pf],[gf.id,gf],[yf.id,yf]]),qy={garage:[Lo.id,Go.id,Uo.id,$o.id,wo.id,Ho.id,ko.id]};class Dy{static getManufacturingRules(i){const l=W(i);if(!l)throw new Error(`Unknown item: ${i}`);switch(l.manufacturingType){case z.RAW_MATERIAL:return{canDisassemble:!1,canShape:!0,canAssemble:!1,reason:"raw_material"};case z.SHAPED_MATERIAL:return{canDisassemble:!1,canShape:!0,canAssemble:!0,reason:"shaped_material"};case z.ASSEMBLY:return{canDisassemble:!0,canShape:!1,canAssemble:!0,reason:"assembly"};default:throw new Error(`Unknown manufacturing type: ${l.manufacturingType}`)}}static validateOperation(i,l){const r=this.getManufacturingRules(i);switch(l){case xe.SHAPING:return r.canShape;case xe.ASSEMBLY:return r.canAssemble;case xe.DISASSEMBLY:return r.canDisassemble;default:return!1}}static getOperationDenialReason(i,l){const r=this.getManufacturingRules(i),o=W(i);if(!o)return`Unknown item: ${i}`;switch(l){case xe.DISASSEMBLY:if(!r.canDisassemble)switch(r.reason){case"raw_material":return`${o.name} is a raw material and cannot be disassembled further`;case"shaped_material":return`${o.name} is a shaped material - it IS the raw material, just processed`;default:return`${o.name} cannot be disassembled`}break;case xe.SHAPING:if(!r.canShape)return`${o.name} cannot be shaped (it's already an assembly)`;break;case xe.ASSEMBLY:if(!r.canAssemble)return`${o.name} cannot be used in assemblies`;break}return"Operation is allowed"}static getDisassemblyComponents(i){var r;const l=W(i);return!l||!this.validateOperation(i,xe.DISASSEMBLY)?[]:((r=l.assemblyComponents)==null?void 0:r.map(o=>o.componentId))||[]}static getMaterialSource(i){const l=W(i);return!l||l.manufacturingType!==z.SHAPED_MATERIAL?null:l.materialSource||null}static validateHierarchyConsistency(){const i=[],l=require("../data/baseItems").baseItems;for(const[r,o]of Object.entries(l)){const u=o;if(u.manufacturingType===z.ASSEMBLY&&u.assemblyComponents)for(const m of u.assemblyComponents){const p=W(m.componentId);if(!p){i.push(`${r}: references unknown component ${m.componentId}`);continue}p.manufacturingType===z.RAW_MATERIAL&&i.push(`${r}: directly uses raw material ${m.componentId} (should use shaped material)`)}if(u.manufacturingType===z.SHAPED_MATERIAL&&u.materialSource){const m=W(u.materialSource);m?m.manufacturingType!==z.RAW_MATERIAL&&i.push(`${r}: material source ${u.materialSource} is not a raw material`):i.push(`${r}: references unknown material source ${u.materialSource}`)}}return i}static getItemsByManufacturingType(i){const l=require("../data/baseItems").baseItems;return Object.entries(l).filter(([r,o])=>o.manufacturingType===i).map(([r,o])=>r)}}class Oy{static analyzeItem(i){const l=W(i.baseItemId);if(!l)throw new Error(`Unknown item: ${i.baseItemId}`);const r=this.extractConditionTags(i.tags),o=this.predictComponentRecovery(i),u=this.determineTreatmentRequirements(i),m=this.assessRecoveryRisks(i);return{itemId:i.id,itemType:i.baseItemId,condition:r,estimatedRecovery:o,treatmentRequirements:u,risks:m,manufacturingType:l.manufacturingType}}static extractConditionTags(i){const l=[E.DAMAGED,E.JUNK,E.RESTORED,E.FORGED,E.HAND_FORGED,E.MILITARY_GRADE,E.SALVAGED,E.REFURBISHED,E.ANTIQUE];return i.filter(r=>l.includes(r))}static predictComponentRecovery(i){const l=W(i.baseItemId);if(!l||!Dy.validateOperation(i.baseItemId,xe.DISASSEMBLY))return[];const r=[];if(l.assemblyComponents)for(const o of l.assemblyComponents){const u=this.predictComponentRecoveryRate(i,o.componentId,o.quantity);r.push(u)}return r}static predictComponentRecoveryRate(i,l,r){const o=i.quality,u=i.tags;let m=.7,p=1,y=.8;u.includes(E.DAMAGED)&&(m*=.4,p*=.3,y=.6),u.includes(E.JUNK)&&(m*=.2,p*=.2,y=.4),u.includes(E.MILITARY_GRADE)&&(m*=1.2,p*=1.1,y=.9),(u.includes(E.FORGED)||u.includes(E.HAND_FORGED))&&(m*=1.1,p*=1.05);const h=o/100;m*=.5+.5*h;const v=Math.max(0,Math.floor(r*m)),A=Math.max(5,o*p*.8);return{componentType:l,estimatedQuantity:v,expectedQuality:Math.min(100,A),confidenceLevel:y}}static determineTreatmentRequirements(i){const l=[],r=i.tags;return r.includes(E.DAMAGED)&&l.push({id:"damage_assessment",name:"Damage Assessment",required:!0,estimatedTime:.25,materialRequirements:[],successProbability:.95,equipmentRequirements:["MEASURING"]}),r.includes(E.JUNK)&&l.push({id:"salvage_evaluation",name:"Salvage Evaluation",required:!0,estimatedTime:.33,materialRequirements:[],successProbability:.8,equipmentRequirements:["MEASURING","BASIC_MANIPULATION"]}),l}static assessRecoveryRisks(i){const l=[],r=i.quality,o=i.tags;return r<30&&l.push({description:"Very low quality may result in component destruction",probability:.3,impact:"component_loss",severity:"high"}),o.includes(E.DAMAGED)&&(l.push({description:"Damaged items may have hidden structural failures",probability:.4,impact:"component_loss",severity:"medium"}),l.push({description:"Disassembly may take longer due to stuck or broken parts",probability:.6,impact:"time_increase",severity:"low"})),o.includes(E.JUNK)&&(l.push({description:"Junk items may crumble during disassembly",probability:.5,impact:"component_loss",severity:"high"}),l.push({description:"May recover mostly scrap material instead of components",probability:.7,impact:"quality_reduction",severity:"medium"})),l}static analyzeItems(i){return i.map(l=>this.analyzeItem(l))}static getConditionSummary(i){const l=i.estimatedRecovery.reduce((p,y)=>p+y.expectedQuality,0)/Math.max(1,i.estimatedRecovery.length),r=i.estimatedRecovery.reduce((p,y)=>p+y.estimatedQuantity,0),o=i.estimatedRecovery.reduce((p,y)=>p+y.confidenceLevel,0)/Math.max(1,i.estimatedRecovery.length),u=i.risks.reduce((p,y)=>{const h={low:1,medium:2,high:3}[y.severity];return Math.max(p,h)},0),m=["No risk","Low risk","Medium risk","High risk"][u];return`Expected: ${r} components, ~${Math.round(l)}% quality, ${Math.round(o*100)}% confidence, ${m}`}}class Iy{static calculateComponentGaps(i,l,r,o){console.log(`GapAnalyzer: Calculating gaps for ${i} (quantity: ${l})`);const u=W(i);if(!u||!u.assemblyComponents)throw new Error(`${i} is not a valid assembly item`);console.log(`GapAnalyzer: ${i} has ${u.assemblyComponents.length} assembly components:`,u.assemblyComponents.map(p=>`${p.componentId} (${p.quantity})`));const m=[];for(const p of u.assemblyComponents){const y=this.calculateSingleComponentGap(p,l,r,o);console.log(`GapAnalyzer: Gap for ${p.componentId}: required=${y.required}, available=${y.available}, needToManufacture=${y.needToManufacture}`),m.push(y)}return console.log(`GapAnalyzer: Total gaps calculated: ${m.length}`),m}static calculateSingleComponentGap(i,l,r,o){const u=i.quantity*l,m=this.countAvailableComponents(i.componentId,r,i.requiredTags,i.maxQuality),p=this.countRecoverableComponents(i.componentId,o,i.requiredTags,i.maxQuality),y=Math.max(0,u-m-p);return{componentType:i.componentId,required:u,available:m,recoverable:p,needToManufacture:y}}static countAvailableComponents(i,l,r,o){return l.filter(u=>u.baseItemId===i).filter(u=>this.itemMatchesRequirements(u,r,o)).reduce((u,m)=>u+m.quantity,0)}static countRecoverableComponents(i,l,r,o){let u=0;for(const m of l)for(const p of m.estimatedRecovery)p.componentType===i&&this.recoveredComponentMeetsRequirements(p,r,o)&&(u+=p.estimatedQuantity);return u}static itemMatchesRequirements(i,l,r){return!(r!==void 0&&i.quality>r||l&&l.length>0&&!l.every(u=>i.tags.includes(u)))}static recoveredComponentMeetsRequirements(i,l,r){return!(r!==void 0&&i.expectedQuality>r)}static estimateManufacturingTime(i){let l=0;for(const r of i)if(r.needToManufacture>0){const o=this.estimateComponentManufacturingTime(r.componentType,r.needToManufacture);l+=o}return l}static estimateComponentManufacturingTime(i,l){const r=W(i);if(!r)return 0;switch(r.manufacturingType){case z.SHAPED_MATERIAL:return this.getShapingTime(i)*l;case z.ASSEMBLY:let u=.5;if(r.assemblyComponents){const m=r.assemblyComponents.map(p=>({componentType:p.componentId,required:p.quantity*l,available:0,recoverable:0,needToManufacture:p.quantity*l}));u+=this.estimateManufacturingTime(m)}return u;default:return 0}}static getShapingTime(i){return{"mechanical-component":.75,"plastic-casing":.5,machined_parts:1,precision_spares:1.25,basic_electronics:.33,advanced_electronics:1.5}[i]||.5}static identifyBottlenecks(i){return i.filter(l=>l.needToManufacture>0).sort((l,r)=>{const o=this.estimateComponentManufacturingTime(l.componentType,l.needToManufacture);return this.estimateComponentManufacturingTime(r.componentType,r.needToManufacture)-o})}static getGapSummary(i){const l=i.reduce((h,v)=>h+v.required,0),r=i.reduce((h,v)=>h+v.available,0),o=i.reduce((h,v)=>h+v.recoverable,0),u=i.reduce((h,v)=>h+v.needToManufacture,0),m=Math.round(r/l*100),p=Math.round(o/l*100),y=Math.round(u/l*100);return`Required: ${l}, Available: ${r} (${m}%), Recoverable: ${o} (${p}%), Need to make: ${u} (${y}%)`}static canFillAllGaps(i){return i.every(l=>l.needToManufacture===0)}}class ls{static generateManufacturingPlan(i,l,r,o,u,m){console.log(`WorkflowGenerator: Starting plan generation for ${i} (quantity: ${l})`);const p=Oy.analyzeItems(r);console.log(`WorkflowGenerator: Input analysis completed - ${p.length} items`);const y=Iy.calculateComponentGaps(i,l,o,p);console.log(`WorkflowGenerator: Component gaps calculated - ${y.length} gaps:`,y.map(N=>`${N.componentType}: need ${N.needToManufacture}`));const h=this.generateOperationsForGaps(y,p);console.log(`WorkflowGenerator: Generated ${h.length} operations for gaps:`,h.map(N=>N.name));const v=this.generateFinalAssemblyOperation(i,l,u);h.push(v),console.log(`WorkflowGenerator: Added final assembly operation: ${v.name}`);const A=h.reduce((N,I)=>N+I.baseDurationMinutes/60,0),T=this.calculateMaterialRequirements(h);return{targetProduct:i,targetQuantity:l,inputAnalysis:p,componentGaps:y,requiredOperations:h,estimatedDuration:A,materialRequirements:T,planningTime:Date.now(),plannerVersion:"v2.0.0",confidence:this.calculatePlanConfidence(p,y)}}static generateOperationsForGaps(i,l){const r=[];r.push(...this.generateInputProcessingOperations(l));for(const o of i)if(o.needToManufacture>0){const u=this.generateComponentManufacturingOperations(o.componentType,o.needToManufacture);r.push(...u)}return r}static generateInputProcessingOperations(i){const l=[];for(const r of i){for(const o of r.treatmentRequirements)o.required&&l.push(this.createTreatmentOperation(o,r));r.manufacturingType===z.ASSEMBLY&&l.push(this.createDisassemblyOperation(r))}return l}static generateComponentManufacturingOperations(i,l){console.log(`WorkflowGenerator: Generating operations for ${i} (quantity: ${l})`);const r=[],o=W(i);if(!o)return console.log(`WorkflowGenerator: No base item found for ${i}`),r;switch(console.log(`WorkflowGenerator: ${i} has manufacturing type: ${o.manufacturingType}`),o.manufacturingType){case z.SHAPED_MATERIAL:if(console.log(`WorkflowGenerator: Creating shaping operation for ${i}`),o.materialSource){const u=W(o.materialSource);if(u&&u.manufacturingType===z.SHAPED_MATERIAL){console.log(`WorkflowGenerator: ${i} needs prerequisite material: ${o.materialSource}`);const m=this.getShapingMethod(i),p=Math.ceil(l*m.materialRatio);console.log(`WorkflowGenerator: Need ${p} ${o.materialSource} for ${l} ${i} (ratio: ${m.materialRatio})`);const y=this.generateComponentManufacturingOperations(o.materialSource,p);r.push(...y)}}for(let u=0;u<l;u++)r.push(this.createShapingOperation(i,1));break;case z.ASSEMBLY:if(console.log(`WorkflowGenerator: Creating assembly operations for ${i}`),o.assemblyComponents){console.log(`WorkflowGenerator: ${i} has ${o.assemblyComponents.length} sub-components:`,o.assemblyComponents.map(u=>`${u.componentId} (${u.quantity})`));for(const u of o.assemblyComponents)if(u.requiredTags&&u.requiredTags.length>0){console.log(`WorkflowGenerator: Generating tag-specific operations for ${u.componentId} with tags: ${u.requiredTags}`);const m=this.generateTagSpecificOperations(u.componentId,u.quantity*l,u.requiredTags);r.push(...m)}else{console.log(`WorkflowGenerator: Recursively generating operations for ${u.componentId}`);const m=this.generateComponentManufacturingOperations(u.componentId,u.quantity*l);r.push(...m)}console.log(`WorkflowGenerator: Adding assembly operation for ${i}`),r.push(this.createAssemblyOperation(i,l))}else console.log(`WorkflowGenerator: ${i} is an assembly but has no assemblyComponents defined`);break;default:console.log(`WorkflowGenerator: Unknown manufacturing type for ${i}: ${o.manufacturingType}`);break}return console.log(`WorkflowGenerator: Generated ${r.length} operations for ${i}:`,r.map(u=>u.name)),r}static generateTagSpecificOperations(i,l,r){console.log(`WorkflowGenerator: Generating tag-specific operations for ${i} (quantity: ${l}) with tags: ${r}`);const o=[],u=W(i);if(!u||u.manufacturingType!==z.SHAPED_MATERIAL)return this.generateComponentManufacturingOperations(i,l);if(u.materialSource){const m=W(u.materialSource);if(m&&m.manufacturingType===z.SHAPED_MATERIAL){console.log(`WorkflowGenerator: ${i} needs prerequisite material: ${u.materialSource}`);const p=this.getShapingMethod(i),y=Math.ceil(l*p.materialRatio);console.log(`WorkflowGenerator: Need ${y} ${u.materialSource} for ${l} ${i} (ratio: ${p.materialRatio})`);const h=this.generateComponentManufacturingOperations(u.materialSource,y);o.push(...h)}}for(let m=0;m<l;m++){const p=this.createTagSpecificShapingOperation(i,1,r);o.push(p)}return o}static createTagSpecificShapingOperation(i,l=1,r){const o=W(i),u=(o==null?void 0:o.materialSource)||"steel";let m=i;i==="mechanical-component"&&r.includes(E.PRECISION)&&(m="mechanical-component-precision");const p=this.getShapingMethod(m);return{id:`shaping_${this.operationIdCounter++}_${i}_${r.join("_")}`,name:`${p.name} (${r.join(", ")}) (1x)`,description:`${p.description} with ${r.join(", ")} tags to create 1 ${i}`,operationType:xe.SHAPING,requiredTag:p.requiredTag,baseDurationMinutes:p.baseDuration,materialConsumption:[{itemId:u,count:p.materialRatio}],materialProduction:[{itemId:i,count:1,quality:p.outputQuality,tags:r.length>0?r:p.outputTags}],can_fail:!0,failure_chance:p.failureChance,labor_skill:p.laborSkill,generatedReason:`Manufacturing 1 ${i} with ${r.join(", ")} tags from ${u}`,isConditional:!1}}static createTreatmentOperation(i,l){return{id:`treatment_${this.operationIdCounter++}_${i.id}`,name:i.name,description:`${i.name} for ${l.itemType}`,operationType:xe.SHAPING,requiredTag:{category:j.BASIC_MANIPULATION,minimum:5},baseDurationMinutes:i.estimatedTime*60,can_fail:!0,failure_chance:1-i.successProbability,labor_skill:"skilled_technician",generatedReason:`Treatment required for ${l.condition.join(", ")} condition`,isConditional:!0}}static createDisassemblyOperation(i){const l=W(i.itemType),r=(l==null?void 0:l.name)||i.itemType;return{id:`disassembly_${this.operationIdCounter++}_${i.itemType}`,name:`Disassemble ${r}`,description:`Carefully disassemble ${r} to recover components`,operationType:xe.DISASSEMBLY,requiredTag:{category:j.BASIC_MANIPULATION,minimum:8},baseDurationMinutes:this.getDisassemblyTime(i.itemType,i.condition),materialConsumption:[{itemId:i.itemType,count:1,tags:i.condition}],materialProduction:i.estimatedRecovery.map(o=>({itemId:o.componentType,count:o.estimatedQuantity,quality:o.expectedQuality,tags:[E.SALVAGED]})),can_fail:i.risks.some(o=>o.impact==="component_loss"),failure_chance:this.calculateDisassemblyFailureChance(i),labor_skill:"skilled_technician",generatedReason:`Disassembly to recover components from ${i.condition.join(", ")} ${r}`,isConditional:!1}}static createShapingOperation(i,l=1){const r=W(i),o=(r==null?void 0:r.materialSource)||"steel",u=this.getShapingMethod(i);return{id:`shaping_${this.operationIdCounter++}_${i}`,name:`${u.name} (1x)`,description:`${u.description} to create 1 ${i}`,operationType:xe.SHAPING,requiredTag:u.requiredTag,baseDurationMinutes:u.baseDuration,materialConsumption:[{itemId:o,count:u.materialRatio}],materialProduction:[{itemId:i,count:1,quality:u.outputQuality,tags:u.outputTags}],can_fail:!0,failure_chance:u.failureChance,labor_skill:u.laborSkill,generatedReason:`Manufacturing 1 ${i} from ${o}`,isConditional:!1}}static createAssemblyOperation(i,l){const r=W(i);if(!(r!=null&&r.assemblyComponents))throw new Error(`${i} has no assembly components defined`);const o=this.getAssemblyRequirements(i);return{id:`assembly_${this.operationIdCounter++}_${i}`,name:`Assemble ${r.name}`,description:o.description,operationType:xe.ASSEMBLY,requiredTag:o.requiredTag,baseDurationMinutes:this.getAssemblyTime(i)*l,materialConsumption:r.assemblyComponents.map(u=>({itemId:u.componentId,count:u.quantity*l,tags:u.requiredTags,maxQuality:u.maxQuality})),materialProduction:[{itemId:i,count:l,tags:r.defaultTags.length>0?r.defaultTags:[E.LOW_TECH],inheritQuality:!0}],can_fail:!0,failure_chance:.02,labor_skill:o.laborSkill,generatedReason:`${o.description} - ${l} ${i}`,isConditional:!1}}static generateFinalAssemblyOperation(i,l,r){const o=this.createAssemblyOperation(i,l);return r&&r.selectedEnhancements.length>0?this.applyEnhancementsToOperation(o,r):o}static applyEnhancementsToOperation(i,l){var o;console.log(`WorkflowGenerator: Applying ${l.selectedEnhancements.length} enhancements to ${i.name}`);const r={...i,id:`${i.id}_enhanced`,name:`${i.name} [Enhanced]`,description:`${i.description} with ${l.selectedEnhancements.map(u=>u.name).join(", ")}`,baseDurationMinutes:Math.round(i.baseDurationMinutes*l.totalTimeModifier),failure_chance:Math.min(.5,(i.failure_chance||.02)*l.totalComplexityModifier),materialConsumption:[...i.materialConsumption||[],...l.additionalCosts.filter(u=>u.type==="material").map(u=>({itemId:u.itemId,count:u.quantity}))],materialProduction:((o=i.materialProduction)==null?void 0:o.map(u=>({...u,quality:Math.min(100,(u.quality||75)+l.totalQualityModifier),tags:[...u.tags||[],...l.additionalTags]})))||[],generatedReason:`${i.generatedReason} - Enhanced with: ${l.selectedEnhancements.map(u=>u.name).join(", ")}`};return console.log(`WorkflowGenerator: Enhanced operation duration: ${i.baseDurationMinutes}min → ${r.baseDurationMinutes}min`),console.log(`WorkflowGenerator: Enhanced operation quality modifier: +${l.totalQualityModifier}`),r}static getShapingMethod(i){return{"small-steel-billet":{name:"Form Steel Billet",description:"Basic steel stock preparation for component machining",requiredTag:{category:j.MILLING,minimum:5},baseDuration:15,materialRatio:.1,outputQuality:70,outputTags:[],failureChance:.02,laborSkill:"skilled_technician"},"small-steel-cylinder":{name:"Turn Steel Cylinder",description:"Round steel stock for boring operations",requiredTag:{category:j.TURNING,minimum:5},baseDuration:20,materialRatio:.1,outputQuality:70,outputTags:[],failureChance:.03,laborSkill:"skilled_technician"},"mechanical-component":{name:"Machine Components",description:"Basic machined mechanical parts",requiredTag:{category:j.MILLING,minimum:5},baseDuration:25,materialRatio:1,outputQuality:75,outputTags:[E.ROUGH,E.LOW_TECH],failureChance:.04,laborSkill:"skilled_technician"},"small-tube":{name:"Bore Tube",description:"Hollow cylindrical component created by boring",requiredTag:{category:j.BORING,minimum:5},baseDuration:30,materialRatio:1,outputQuality:80,outputTags:[],failureChance:.05,laborSkill:"skilled_technician"},"small-casing":{name:"Mill Casing",description:"Molded plastic housing component",requiredTag:{category:j.MILLING,minimum:3},baseDuration:18,materialRatio:.3,outputQuality:75,outputTags:[],failureChance:.02,laborSkill:"skilled_technician"}}[i]||{name:"Shape Material",description:"Process raw material into shaped component",requiredTag:{category:j.BASIC_MANIPULATION,minimum:5},baseDuration:30,materialRatio:1,outputQuality:70,outputTags:[E.STANDARD],failureChance:.03,laborSkill:"skilled_technician"}}static getDisassemblyTime(i,l){let r=20;return l.includes(E.DAMAGED)&&(r*=1.5),l.includes(E.JUNK)&&(r*=1.8),l.includes(E.MILITARY_GRADE)&&(r*=.8),Math.round(r)}static getAssemblyTime(i){return{"mechanical-assembly":45,basic_sidearm:35,tactical_knife:15}[i]||20}static getAssemblyRequirements(i){return{"mechanical-assembly":{requiredTag:{category:j.BASIC_MANIPULATION,minimum:8},laborSkill:"skilled_technician",description:"Assembly [Basic] - Combined mechanical components forming internal mechanism"},basic_sidearm:{requiredTag:{category:j.PRECISION_MANIPULATION,minimum:5},laborSkill:"skilled_technician",description:"Assembly [Precision] - Complete low-tech sidearm weapon"}}[i]||{requiredTag:{category:j.BASIC_MANIPULATION,minimum:5},laborSkill:"skilled_technician",description:"Standard assembly operation"}}static calculateDisassemblyFailureChance(i){let l=.02;const r=i.risks.filter(o=>o.impact==="component_loss"&&o.severity==="high");return l+=r.length*.05,Math.min(.25,l)}static calculateMaterialRequirements(i){const l=[];for(const r of i)if(r.materialConsumption)for(const o of r.materialConsumption){const u=W(o.itemId);if((u==null?void 0:u.manufacturingType)===z.RAW_MATERIAL){const m=l.find(p=>p.material_id===o.itemId);m?m.quantity+=o.count:l.push({material_id:o.itemId,quantity:o.count,consumed_at_start:!0})}}return l}static calculatePlanConfidence(i,l){let r=.9;for(const u of i){const m=u.risks.filter(p=>p.severity==="high");r-=m.length*.1}const o=l.reduce((u,m)=>u+m.needToManufacture,0)/l.reduce((u,m)=>u+m.required,1);return r-=o*.2,Math.max(.1,r)}}De(ls,"operationIdCounter",0);class os{static convertPlanToMethod(i){console.log(`ManufacturingV2Integration: Converting plan for ${i.targetProduct} with ${i.requiredOperations.length} operations`);const l=i.requiredOperations.map(u=>(console.log(`ManufacturingV2Integration: Converting operation: ${u.name}`),this.convertDynamicOperation(u)));console.log(`ManufacturingV2Integration: Converted to ${l.length} machine operations`);const r="name"in i?i.name:`Dynamic ${i.targetProduct} (v2)`,o="description"in i?i.description:`Dynamically generated workflow for ${i.targetProduct} (Manufacturing v2)`;return{id:"id"in i?i.id:`dynamic_${i.targetProduct}_${Date.now()}`,name:r,description:o,outputTags:[E.FORGED,E.LOW_TECH],qualityRange:[60,90],operations:l,output_state:"functional",output_quality_range:[60,90],labor_cost_multiplier:1,complexity_rating:Math.min(10,Math.max(1,i.requiredOperations.length)),profit_margin_modifier:1,customer_appeal:["dynamic_manufacturing","component_specialists"]}}static convertDynamicOperation(i){var l;return{id:i.id,name:i.name,description:i.description,requiredTag:i.requiredTag,baseDurationMinutes:i.baseDurationMinutes,materialConsumption:i.materialConsumption,materialProduction:i.materialProduction,material_requirements:((l=i.materialConsumption)==null?void 0:l.map(r=>({material_id:r.itemId,quantity:r.count,consumed_at_start:!0,required_tags:r.tags,max_quality:r.maxQuality})))||[],can_fail:i.can_fail,failure_chance:i.failure_chance,labor_skill:i.labor_skill}}static generateDynamicMethod(i,l=1,r=[],o=[],u,m){try{const p=ls.generateManufacturingPlan(i,l,r,o,u,m);return console.log(`Generated Manufacturing v2 plan for ${i}:`,{operationCount:p.requiredOperations.length,operations:p.requiredOperations.map(y=>y.name),estimatedDuration:p.estimatedDuration}),this.convertPlanToMethod(p)}catch(p){return console.error(`Failed to generate Manufacturing v2 plan for ${i}:`,p),{id:`fallback_${i}`,name:`Manual Craft (${i})`,description:`Simple manual crafting method for ${i} (Manufacturing v2 fallback)`,outputTags:[E.FORGED,E.LOW_TECH],qualityRange:[50,80],operations:[{id:"manual_craft",name:"Manual Crafting",description:"Basic manual crafting using available tools",requiredTag:{category:j.BASIC_MANIPULATION,minimum:5},baseDurationMinutes:60,can_fail:!0,failure_chance:.1,labor_skill:"skilled_technician"}],output_state:"functional",output_quality_range:[50,80],labor_cost_multiplier:1.2,complexity_rating:3,profit_margin_modifier:.8,customer_appeal:["manual_crafting"]}}}static canHandleProduct(i){try{return ls.generateManufacturingPlan(i,1,[],[]).requiredOperations.length>0}catch{return!1}}static getManufacturingPreview(i,l=[],r=[]){try{const o=ls.generateManufacturingPlan(i,1,l,r),u=o.materialRequirements.map(p=>`${p.quantity}x ${p.material_id}`),m=`Manufacturing v2 can create ${i} using ${o.requiredOperations.length} operations in ~${Math.round(o.estimatedDuration*60)} minutes with ${Math.round(o.confidence*100)}% confidence.`;return{canManufacture:!0,estimatedTime:o.estimatedDuration*60,requiredMaterials:u,operationCount:o.requiredOperations.length,confidence:o.confidence,summary:m}}catch(o){return{canManufacture:!1,estimatedTime:0,requiredMaterials:[],operationCount:0,confidence:0,summary:`Manufacturing v2 cannot manufacture ${i}: ${o}`}}}static createSmartMethod(i){return{id:`smart_${i}`,name:`Smart Manufacturing (${i})`,description:"Intelligent manufacturing that adapts workflow based on available inputs",outputTags:[E.FORGED,E.LOW_TECH],qualityRange:[70,95],operations:[{id:"smart_analysis",name:"Analyze Inputs & Generate Workflow",description:"Manufacturing v2 analyzes available inputs and generates optimal workflow",requiredTag:{category:j.BASIC_MANIPULATION,minimum:1},baseDurationMinutes:5,can_fail:!1,failure_chance:0,labor_skill:"unskilled"}],output_state:"functional",output_quality_range:[70,95],labor_cost_multiplier:1,complexity_rating:5,profit_margin_modifier:1.1,customer_appeal:["intelligent_manufacturing","adaptive_production"]}}}const jy=[{id:"sim_steel_1",baseItemId:"steel",quantity:20,quality:75,tags:[],acquiredAt:0,lastModified:0},{id:"sim_plastic_1",baseItemId:"plastic",quantity:15,quality:70,tags:[],acquiredAt:0,lastModified:0}],Ef={id:"basic_sidearm_test",name:"Test Manufacturing (Debug)",description:"Simple test method to verify workflow generation",outputTags:[E.FORGED,E.LOW_TECH],qualityRange:[60,80],operations:[{id:"test_form_billet",name:"Form Steel Billet",description:"Basic steel stock preparation for component machining",requiredTag:{category:j.MILLING,minimum:5},baseDurationMinutes:15,materialConsumption:[{itemId:"steel",count:.1}],materialProduction:[{itemId:"small-steel-billet",count:1,quality:70,tags:[]}],can_fail:!0,failure_chance:.02,labor_skill:"skilled_technician"},{id:"test_machine_components",name:"Machine Components (rough, low-tech)",description:"Basic machined mechanical parts",requiredTag:{category:j.MILLING,minimum:5},baseDurationMinutes:250,materialConsumption:[{itemId:"small-steel-billet",count:10}],materialProduction:[{itemId:"mechanical-component",count:10,quality:75,tags:[E.ROUGH,E.LOW_TECH]}],can_fail:!0,failure_chance:.04,labor_skill:"skilled_technician"},{id:"test_assemble_mechanical",name:"Assemble Mechanical Assembly",description:"Assembly of mechanical components with low-tech finish",requiredTag:{category:j.BASIC_MANIPULATION,minimum:8},baseDurationMinutes:45,materialConsumption:[{itemId:"mechanical-component",count:10,tags:[E.ROUGH,E.LOW_TECH]}],materialProduction:[{itemId:"mechanical-assembly",count:1,quality:75,tags:[E.LOW_TECH]}],can_fail:!0,failure_chance:.02,labor_skill:"skilled_technician"}],output_state:"functional",output_quality_range:[60,80],labor_cost_multiplier:1,complexity_rating:3,profit_margin_modifier:1,customer_appeal:["test_manufacturing"]};console.log("Generating Manufacturing v2 basic sidearm method...");const Ly=(()=>{try{const f=os.generateDynamicMethod("basic_sidearm",1,[],jy);return console.log("Generated Manufacturing v2 method with operations:",f.operations.map(i=>i.name)),f.id="basic_sidearm_forge_v2",f.name="Forge New (v2)",f.description="Intelligently manufacture a new sidearm using available materials and optimal workflow",f}catch(f){return console.error("Failed to generate Manufacturing v2 method:",f),Ef}})(),cs=os.generateDynamicMethod("basic_sidearm",1,[],[]);cs.id="basic_sidearm_restore_v2";cs.name="Restore/Repair (v2)";cs.description="Intelligently restore damaged weapons or manufacture new ones based on available inputs";const us=os.createSmartMethod("basic_sidearm_disassembly");us.id="basic_sidearm_disassemble_v2";us.name="Disassemble (v2)";us.description="Intelligently disassemble sidearms to recover maximum components based on condition";const Gy=[Ef,Ly,cs,us],Uy=[],wy={MS_PER_GAME_HOUR:60*1e3};function Hy(){return{totalGameHours:0,days:0,hours:0,isPaused:!1,gameSpeed:1}}function ky(f,i){if(f.isPaused)return f;const l=i*f.gameSpeed/wy.MS_PER_GAME_HOUR,r=f.totalGameHours+l;return{...f,totalGameHours:r,days:Math.floor(r/24),hours:Math.floor(r%24)}}function Bi(f){const i=f.days,l=Math.floor(f.hours),r=Math.floor(f.totalGameHours%1*60);return i>0?`Day ${i+1}, ${l.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`:`${l.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}function $y(f){return f===1?"Normal":f===0?"Paused":`${f}x`}const By=[{oldKey:"basic_sidearm_pristine",baseItemId:"basic_sidearm",tags:[E.FORGED],qualityRange:[90,95]},{oldKey:"basic_sidearm_standard",baseItemId:"basic_sidearm",tags:[E.FORGED],qualityRange:[75,85]},{oldKey:"basic_sidearm_functional",baseItemId:"basic_sidearm",tags:[E.RESTORED],qualityRange:[60,70]},{oldKey:"basic_sidearm_junk",baseItemId:"basic_sidearm",tags:[E.JUNK],qualityRange:[30,45]},{oldKey:"tactical_knife_pristine",baseItemId:"tactical_knife",tags:[E.FORGED],qualityRange:[90,95]},{oldKey:"tactical_knife_standard",baseItemId:"tactical_knife",tags:[E.FORGED],qualityRange:[75,85]},{oldKey:"tactical_knife_functional",baseItemId:"tactical_knife",tags:[E.RESTORED],qualityRange:[60,70]},{oldKey:"tactical_knife_junk",baseItemId:"tactical_knife",tags:[E.JUNK],qualityRange:[30,45]},{oldKey:"steel",baseItemId:"steel",tags:[E.STANDARD],qualityRange:[80,90]},{oldKey:"aluminum",baseItemId:"aluminum",tags:[E.STANDARD],qualityRange:[80,90]},{oldKey:"plastic",baseItemId:"plastic",tags:[E.STANDARD],qualityRange:[75,85]},{oldKey:"titanium",baseItemId:"titanium",tags:[E.PREMIUM],qualityRange:[90,95]},{oldKey:"basic_electronics",baseItemId:"basic_electronics",tags:[E.STANDARD],qualityRange:[70,85]},{oldKey:"advanced_electronics",baseItemId:"advanced_electronics",tags:[E.PREMIUM],qualityRange:[85,95]},{oldKey:"machined_parts",baseItemId:"machined_parts",tags:[E.STANDARD],qualityRange:[75,90]},{oldKey:"low_tech_spares",baseItemId:"low_tech_spares",tags:[E.SALVAGED],qualityRange:[50,70]},{oldKey:"precision_spares",baseItemId:"precision_spares",tags:[E.PREMIUM],qualityRange:[85,95]},{oldKey:"damaged_basic_sidearm",baseItemId:"basic_sidearm",tags:[E.DAMAGED],qualityRange:[10,25]},{oldKey:"damaged_tactical_knife",baseItemId:"tactical_knife",tags:[E.DAMAGED],qualityRange:[10,25]},{oldKey:"dull_tactical_knife",baseItemId:"tactical_knife",tags:[E.SALVAGED],qualityRange:[45,60]},{oldKey:"composite_materials",baseItemId:"composite_materials",tags:[E.PREMIUM],qualityRange:[85,95]},{oldKey:"industrial_chemicals",baseItemId:"industrial_chemicals",tags:[E.STANDARD],qualityRange:[70,85]}];class zy{convertLegacyStorage(i){const l=new Map;for(const u of Object.values(ie))l.set(u,{category:u,slots:[],totalItems:0,totalValue:0});for(const[u,m]of Object.entries(i)){if(m<=0)continue;const p=this.findMapping(u);if(!p){console.warn(`No mapping found for legacy storage key: ${u}`);continue}const y=W(p.baseItemId);if(!y){console.warn(`Base item not found: ${p.baseItemId}`);continue}const h=this.createInstancesFromLegacy(p,m),v=l.get(y.category);v&&this.addInstancesToGroup(v,h)}let r=0,o=0;for(const u of l.values())r+=u.totalItems,o+=u.totalValue;return{groups:l,totalItems:r,totalValue:o,lastUpdated:Date.now(),storageCapacity:1e3,usedCapacity:r}}findMapping(i){let l=By.find(r=>r.oldKey===i);return!l&&W(i)?{oldKey:i,baseItemId:i,tags:[E.STANDARD],qualityRange:[75,85]}:l}createInstancesFromLegacy(i,l){const r=W(i.baseItemId);if(!r)return[];if(r.stackable){const u=this.randomInRange(i.qualityRange);return[Za({baseItemId:i.baseItemId,tags:i.tags,quality:u,quantity:l,metadata:{migratedFrom:i.oldKey}})]}const o=[];for(let u=0;u<l;u++){const m=this.randomInRange(i.qualityRange);o.push(Za({baseItemId:i.baseItemId,tags:i.tags,quality:m,quantity:1,metadata:{migratedFrom:i.oldKey}}))}return o}addInstancesToGroup(i,l){if(l.length===0)return;const r=l[0].baseItemId;let o=i.slots.find(u=>u.baseItemId===r);o||(o={baseItemId:r,stack:{baseItemId:r,instances:[],totalQuantity:0,averageQuality:0,uniqueTags:[]},reserved:0,available:0},i.slots.push(o)),o.stack.instances.push(...l),this.updateSlotTotals(o),this.updateGroupTotals(i)}updateSlotTotals(i){const l=i.stack.instances;if(i.stack.totalQuantity=l.reduce((r,o)=>r+o.quantity,0),i.available=i.stack.totalQuantity-i.reserved,l.length>0){const r=l.reduce((o,u)=>o+u.quality*u.quantity,0);i.stack.averageQuality=Math.round(r/i.stack.totalQuantity),i.stack.uniqueTags=[...new Set(l.flatMap(o=>o.tags))]}else i.stack.averageQuality=0,i.stack.uniqueTags=[]}updateGroupTotals(i){i.totalItems=i.slots.reduce((l,r)=>l+r.stack.totalQuantity,0),i.totalValue=i.slots.reduce((l,r)=>{const o=W(r.baseItemId);if(!o)return l;const u=o.baseValue*(r.stack.averageQuality/100);return l+u*r.stack.totalQuantity},0)}randomInRange([i,l]){return Math.floor(Math.random()*(l-i+1))+i}migrateStorageData(i,l){const r=this.convertLegacyStorage(i);for(const[m,p]of r.groups.entries()){const y=l.groups.get(m);if(y){for(const h of p.slots){const v=y.slots.find(A=>A.baseItemId===h.baseItemId);v?(v.stack.instances.push(...h.stack.instances),this.updateSlotTotals(v)):y.slots.push(h)}this.updateGroupTotals(y)}else l.groups.set(m,p)}let o=0,u=0;for(const m of l.groups.values())o+=m.totalItems,u+=m.totalValue;l.totalItems=o,l.totalValue=u,l.usedCapacity=o,l.lastUpdated=Date.now()}validateMigration(i,l){let r=0,o=0;for(const u of Object.values(i))r+=u;for(const u of l.groups.values())for(const m of u.slots)o+=m.stack.totalQuantity;if(r!==o)return console.error(`Migration quantity mismatch: ${r} old vs ${o} new`),!1;for(const[u,m]of Object.entries(i)){if(m<=0)continue;const p=this.findMapping(u);if(!p){console.warn(`No mapping found for ${u}, migration may be incomplete`);continue}const y=W(p.baseItemId);if(!y)continue;const h=l.groups.get(y.category);if(!h)return console.error(`No group found for category ${y.category}`),!1;const v=h.slots.find(N=>N.baseItemId===p.baseItemId);if(!v)return console.error(`No slot found for base item ${p.baseItemId}`),!1;const T=v.stack.instances.filter(N=>{var I;return((I=N.metadata)==null?void 0:I.migratedFrom)===u}).reduce((N,I)=>N+I.quantity,0);if(T!==m)return console.error(`Quantity mismatch for ${u}: ${m} expected, ${T} found`),!1}return!0}}const is=new zy;class Qy{migrateFacility(i){if(i.inventory)return i;const l=is.convertLegacyStorage(i.current_storage);if(l.storageCapacity=i.storage_capacity,!is.validateMigration(i.current_storage,l))return console.error(`Migration validation failed for facility: ${i.name}`),i;const o={...i,inventory:l,current_storage:{...i.current_storage}};return console.log(`Successfully migrated facility: ${i.name}`),console.log(`- Legacy items: ${Object.keys(i.current_storage).length}`),console.log(`- New inventory groups: ${l.groups.size}`),console.log(`- Total items: ${l.totalItems}`),console.log(`- Total value: ${l.totalValue} credits`),o}migrateAllFacilities(i){return i.map(l=>this.migrateFacility(l))}needsMigration(i){return!i.inventory&&Object.keys(i.current_storage).length>0}syncLegacyToInventory(i){if(!i.inventory)return this.migrateFacility(i);const l=this.extractLegacyStorageFromInventory(i.inventory);if(this.compareLegacyStorage(i.current_storage,l)){console.log(`Detected changes in legacy storage for ${i.name}, re-migrating...`);const o=is.convertLegacyStorage(i.current_storage);return o.storageCapacity=i.inventory.storageCapacity,{...i,inventory:o}}return i}extractLegacyStorageFromInventory(i){return{}}compareLegacyStorage(i,l){const r=Object.keys(i),o=Object.keys(l);if(r.length!==o.length)return!0;for(const u of r)if(i[u]!==l[u])return!0;return!1}getMigrationStatus(i){var o,u;const l=Object.keys(i.current_storage).length>0,r=!!i.inventory;return{isMigrated:r,hasLegacyData:l,requiresSync:l&&r,itemCount:((o=i.inventory)==null?void 0:o.totalItems)||0,inventoryValue:((u=i.inventory)==null?void 0:u.totalValue)||0}}initializeDualSystemFacility(i,l=1e3){const r=is.convertLegacyStorage(i);return r.storageCapacity=l,{legacyStorage:{...i},inventory:r}}removeLegacyStorage(i){return i.inventory?(console.log(`Removing legacy storage from ${i.name}`),{...i,current_storage:{}}):(console.warn(`Cannot remove legacy storage from ${i.name}: no new inventory system present`),i)}validateFacilityInventory(i){const l=[],r=[];if(!i.inventory)return l.push("No inventory system present"),{isValid:!1,errors:l,warnings:r};let o=0,u=0;for(const m of i.inventory.groups.values()){o+=m.totalItems,u+=m.totalValue;for(const p of m.slots){const y=p.stack.instances.reduce((h,v)=>h+v.quantity,0);y!==p.stack.totalQuantity&&l.push(`Slot ${p.baseItemId}: calculated total ${y} != stored total ${p.stack.totalQuantity}`),p.available+p.reserved!==p.stack.totalQuantity&&r.push(`Slot ${p.baseItemId}: available + reserved != total quantity`)}}return o!==i.inventory.totalItems&&l.push(`Calculated total items ${o} != stored total ${i.inventory.totalItems}`),Math.abs(u-i.inventory.totalValue)>1&&r.push(`Calculated value ${u} != stored value ${i.inventory.totalValue}`),{isValid:l.length===0,errors:l,warnings:r}}}const Bo=new Qy;function Tf(f,i){return{id:`eq-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,equipmentId:f,facilityId:i,condition:100,lastMaintenance:0,totalOperatingHours:0,status:bf.AVAILABLE,utilizationHistory:[]}}const Ee=yy((f,i)=>({gameTime:{...Hy(),elapsed:0,deltaTime:0},credits:1e4,resources:{},research:{current:null,completed:[],available:[]},facilities:[],equipmentDatabase:kn,machineWorkspaceManager:new Af(kn),marketGenerator:new Sf,contractGenerator:new Mf,marketState:{availableLots:[],activePurchaseOrders:[],playerListings:[],transactionHistory:[],lastLotRefresh:0,nextRefreshAt:0},contractState:{availableCustomerContracts:[],availableSupplyContracts:[],activeCustomerContracts:[],activeSupplyContracts:[],contractProgress:new Map,completedContracts:[],contractHistory:[],lastContractRefresh:0,nextRefreshAt:0},activeTab:"manufacturing",selectedFacilityId:null,jobCompletionNotifications:[],setActiveTab:l=>f({activeTab:l}),setSelectedFacility:l=>f({selectedFacilityId:l}),updateGameTime:l=>f(r=>{const o={...ky(r.gameTime,l),elapsed:r.gameTime.elapsed+l,deltaTime:l},u=r.marketState.activePurchaseOrders.map(I=>{if(I.status==="ordered"&&o.totalGameHours>=I.deliveryAt){const H=r.facilities.find(B=>B.id===I.facilityId);if(H){const B=H.current_storage[I.materialId]||0;if(H.current_storage[I.materialId]=B+I.quantity,H.inventory)try{const P=Za({baseItemId:I.materialId,tags:[E.STANDARD],quality:Math.round(80+Math.random()*15),quantity:I.quantity,metadata:{source:"market_delivery",supplierId:I.supplierId,deliveredAt:o.totalGameHours}});Z.addItem(H.inventory,P)}catch(P){console.warn("Failed to add delivered item to new inventory system:",P)}}return{...I,status:"delivered"}}return I}),m=u.filter(I=>I.status==="delivered"),p=u.filter(I=>I.status!=="delivered"),y=m.slice(-5),h=r.marketState.playerListings.map(I=>{if(I.status!=="active"||I.soldQuantity>=I.quantity)return I;const H=.1,B=I.quantity-I.soldQuantity;if(Math.random()<H&&B>0){const P=I.soldQuantity+1,F=I.pricePerUnit;return r.credits+=F,{...I,soldQuantity:P,status:P>=I.quantity?"sold":"partially_sold"}}return I}),v=h.filter(I=>I.status==="active"||I.status==="partially_sold"),A=h.filter(I=>I.status==="sold"||I.status==="expired").slice(-3);let T=r.marketState.availableLots;const N=r.gameTime.totalGameHours;return Math.floor(o.totalGameHours/6)>Math.floor(N/6)&&(T=r.marketGenerator.simulateMarketForces(r.marketState.availableLots,o.totalGameHours)),{...r,gameTime:o,marketState:{...r.marketState,availableLots:T,activePurchaseOrders:[...p,...y],playerListings:[...v,...A]}}}),togglePause:()=>f(l=>({gameTime:{...l.gameTime,isPaused:!l.gameTime.isPaused}})),setGameSpeed:l=>f(r=>({gameTime:{...r.gameTime,gameSpeed:l}})),startResearch:l=>{},acceptContract:l=>{console.log("Legacy contract system - use acceptCustomerContract instead")},updateResource:(l,r)=>f(o=>({resources:{...o.resources,[l]:(o.resources[l]||0)+r}})),updateFacility:(l,r)=>f(o=>({facilities:o.facilities.map(u=>u.id===l?{...u,...r}:u)})),purchaseEquipment:(l,r)=>{const o=i(),u=o.equipmentDatabase.get(r),m=o.facilities.find(p=>p.id===l);!u||!m||o.credits<u.purchaseCost+u.installationCost||m.used_floor_space+u.footprint>m.floor_space||f(p=>{const y=Tf(r,l),h=p.facilities.map(A=>{if(A.id===l){const T=[...A.equipment,y],N=rs(T,p.equipmentDatabase);return{...A,equipment:T,equipment_capacity:N,used_floor_space:A.used_floor_space+u.footprint,operating_cost_per_day:A.operating_cost_per_day+u.dailyOperatingCost}}return A});let v=p.machineWorkspace;if(p.selectedFacilityId===l&&p.machineWorkspace){const A=h.find(T=>T.id===l);A&&(p.machineWorkspaceManager.setFacility(A),p.machineWorkspaceManager.addEquipmentToWorkspace(A,y),v=p.machineWorkspaceManager.getWorkspace(l))}return{facilities:h,credits:p.credits-u.purchaseCost-u.installationCost,machineWorkspace:v}})},sellEquipment:(l,r)=>{const o=i(),u=o.facilities.find(h=>h.id===l);if(!u)return;const m=u.equipment.find(h=>h.id===r);if(!m)return;const p=o.equipmentDatabase.get(m.equipmentId);if(!p)return;const y=p.purchaseCost*.5*(m.condition/100);f(h=>{const v=h.facilities.map(T=>{if(T.id===l){const N=T.equipment.filter(H=>H.id!==r),I=rs(N,h.equipmentDatabase);return{...T,equipment:N,equipment_capacity:I,used_floor_space:T.used_floor_space-p.footprint,operating_cost_per_day:T.operating_cost_per_day-p.dailyOperatingCost}}return T});let A=h.machineWorkspace;if(h.selectedFacilityId===l&&h.machineWorkspace){const T=v.find(N=>N.id===l);T&&(h.machineWorkspaceManager.setFacility(T),h.machineWorkspaceManager.removeEquipmentFromWorkspace(l,r),A=h.machineWorkspaceManager.getWorkspace(l))}return{facilities:v,credits:h.credits+y,machineWorkspace:A}})},maintainEquipment:(l,r)=>{const o=i(),u=o.facilities.find(y=>y.id===l);if(!u)return;const m=u.equipment.find(y=>y.id===r);if(!m)return;const p=o.equipmentDatabase.get(m.equipmentId);p&&(o.credits<p.condition.maintenanceCost||f(y=>({facilities:y.facilities.map(h=>h.id===l?{...h,equipment:h.equipment.map(v=>v.id===r?{...v,condition:100,lastMaintenance:y.gameTime.elapsed}:v)}:h),credits:y.credits-p.condition.maintenanceCost})))},startMachineJob:(l,r,o,u=1,m,p=!1,y)=>{const h=i(),v=h.facilities.find(I=>I.id===l);if(!v){console.error(`Cannot start job: facility ${l} not found`);return}let A=y;if(A||(A=Gy.find(I=>I.id===o),A||(A=Uy.find(I=>I.id===o))),!A){console.error(`Cannot start job: method ${o} not found`);return}let T=h.machineWorkspace;!T||T.facilityId!==l?(h.machineWorkspaceManager.setFacility(v),h.machineWorkspaceManager.setGameTime(h.gameTime),T=h.machineWorkspaceManager.initializeWorkspace(v)):h.machineWorkspaceManager.setGameTime(h.gameTime);const N=p?yt.RUSH:yt.NORMAL;h.machineWorkspaceManager.addJob(l,r,A,u,N,p,m),f({machineWorkspace:h.machineWorkspaceManager.getWorkspace(l)})},cancelMachineJob:(l,r)=>{const o=i();if(!o.facilities.find(p=>p.id===l))return console.error(`Cannot cancel job ${r}: facility ${l} not found`),!1;const m=o.machineWorkspaceManager.cancelJob(l,r);return m&&(f({machineWorkspace:o.machineWorkspaceManager.getWorkspace(l)}),console.log(`Job ${r} cancelled successfully`)),m},updateProduction:()=>{const l=i(),r=l.gameTime.deltaTime;if(!l.gameTime.isPaused&&l.machineWorkspace&&l.selectedFacilityId){const o=l.facilities.find(u=>u.id===l.selectedFacilityId);o&&(l.machineWorkspaceManager.setFacility(o),l.machineWorkspaceManager.setGameTime(l.gameTime),l.machineWorkspaceManager.updateAllWorkspaces(r),f({machineWorkspace:l.machineWorkspaceManager.getWorkspace(l.selectedFacilityId)}))}},addJobCompletionNotification:l=>f(r=>({jobCompletionNotifications:[...r.jobCompletionNotifications,{...l,id:`notif-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()}]})),dismissNotification:l=>f(r=>({jobCompletionNotifications:r.jobCompletionNotifications.filter(o=>o.id!==l)})),purchaseMarketLot:(l,r)=>{f(o=>{const u=o.marketState.availableLots.find(y=>y.id===l),m=o.facilities.find(y=>y.id===r);if(!u||!m)return console.error("Lot or facility not found:",{lotId:l,facilityId:r}),o;if(o.credits<u.totalPrice)return console.warn("Insufficient credits for purchase:",{required:u.totalPrice,available:o.credits}),o;const p={id:`order-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,lotId:u.id,supplierId:u.supplierId,materialId:u.materialId,quantity:u.quantity,totalPaid:u.totalPrice,orderedAt:o.gameTime.totalGameHours,deliveryAt:o.gameTime.totalGameHours+u.deliveryTimeHours,status:"ordered",facilityId:m.id};return{...o,credits:o.credits-u.totalPrice,marketState:{...o.marketState,availableLots:o.marketState.availableLots.filter(y=>y.id!==l),activePurchaseOrders:[...o.marketState.activePurchaseOrders,p]}}})},listProductForSale:(l,r,o,u)=>{f(m=>{const p=m.facilities.find(T=>T.id===l);if(!p)return console.error("Facility not found:",l),m;let y=0,h="standard",v=[];if(p.inventory){const T=Z.getAvailableQuantity(p.inventory,r);if(T<o)return console.warn("Insufficient products to list for sale:",{requested:o,available:T,product:r}),m;v=Z.getBestQualityItems(p.inventory,r,o),y=v.reduce((H,B)=>H+B.quantity,0);const I=v.reduce((H,B)=>H+B.quality*B.quantity,0)/y;h=I>=90?"pristine":I>=75?"functional":I>=50?"standard":"junk"}else{const T=["pristine","functional","standard","junk"];let N="";for(const I of T){const H=`${r}_${I}`,B=p.current_storage[H]||0;if(B>=o){y=B,N=H,h=I;break}}if(y<o)return console.warn("Insufficient products to list for sale:",{requested:o,available:y,product:r}),m;p.current_storage[N]=y-o}const A={id:`listing-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,productId:r,quantity:o,pricePerUnit:u,totalPrice:u*o,qualityGrade:h,listedAt:m.gameTime.totalGameHours,expiresAt:m.gameTime.totalGameHours+168,soldQuantity:0,status:"active"};if(p.inventory&&v.length>0)for(const T of v)Z.removeItem(p.inventory,T.id,T.quantity);return{...m,marketState:{...m.marketState,playerListings:[...m.marketState.playerListings,A]}}})},removePlayerListing:l=>{f(r=>{const o=r.marketState.playerListings.find(m=>m.id===l);if(!o)return console.error("Listing not found:",l),r;const u=r.facilities[0];if(u&&o.status==="active"&&o.soldQuantity<o.quantity){const m=o.quantity-o.soldQuantity;if(u.inventory){const p=o.qualityGrade==="pristine"?95:o.qualityGrade==="functional"?80:o.qualityGrade==="standard"?65:45,y=Za({baseItemId:o.productId,tags:[E.REFURBISHED],quality:p,quantity:m,metadata:{source:"market_return",originalListingId:l,returnedAt:r.gameTime.totalGameHours}});Z.addItem(u.inventory,y)}else{const p=`${o.productId}_${o.qualityGrade}`;u.current_storage[p]=(u.current_storage[p]||0)+m}}return{...r,marketState:{...r.marketState,playerListings:r.marketState.playerListings.filter(m=>m.id!==l)}}})},refreshMarketLots:()=>{f(l=>{const r=l.marketGenerator.generateMarketLots(6,l.gameTime.totalGameHours),o=l.marketGenerator.removeExpiredLots(l.marketState.availableLots,l.gameTime.totalGameHours),u=l.marketGenerator.simulateMarketForces([...o,...r],l.gameTime.totalGameHours);return{...l,marketState:{...l.marketState,availableLots:u,lastLotRefresh:l.gameTime.totalGameHours,nextRefreshAt:l.gameTime.totalGameHours+24}}})},acceptCustomerContract:l=>{f(r=>{const o=r.contractState.availableCustomerContracts.find(m=>m.id===l);if(!o)return console.error("Contract not found:",l),r;const u={...o,status:"accepted",acceptedAt:r.gameTime.totalGameHours};return{...r,contractState:{...r.contractState,availableCustomerContracts:r.contractState.availableCustomerContracts.filter(m=>m.id!==l),activeCustomerContracts:[...r.contractState.activeCustomerContracts,u]}}})},acceptSupplyContract:l=>{console.log("Supply contract acceptance not yet implemented:",l)},fulfillContract:(l,r)=>{f(o=>{const u=o.contractState.activeCustomerContracts.find(P=>P.id===l),m=o.facilities.find(P=>P.id===r);if(!u||!m)return console.error("Contract or facility not found:",{contractId:l,facilityId:r}),o;const p=u.requirements[0];if(!p)return console.error("Contract has no requirements"),o;const y=`${p.productId}_pristine`,h=m.current_storage[y]||0;if(h<p.quantity)return console.warn("Insufficient products to fulfill contract:",{required:p.quantity,available:h,product:p.productId}),o;const v=u.totalPayment,A=o.gameTime.totalGameHours,H=(u.acceptedAt||0)+u.deadlineHours-A>0?Math.floor(v*(1+u.bonusRate)):v;m.current_storage[y]=h-p.quantity;const B={...u,status:"completed",completedAt:A};return{...o,credits:o.credits+H,contractState:{...o.contractState,activeCustomerContracts:o.contractState.activeCustomerContracts.filter(P=>P.id!==l),completedContracts:[...o.contractState.completedContracts,B]}}})},refreshContracts:()=>{f(l=>{const r=l.contractGenerator.generateCustomerContracts(4,l.gameTime.totalGameHours),o=l.contractGenerator.removeExpiredContracts(l.contractState.availableCustomerContracts,l.gameTime.totalGameHours);return{...l,contractState:{...l.contractState,availableCustomerContracts:[...o,...r],lastContractRefresh:l.gameTime.totalGameHours,nextRefreshAt:l.gameTime.totalGameHours+48}}})},migrateFacilityInventory:l=>{f(r=>{const o=r.facilities.find(u=>u.id===l);if(!o)return console.error(`Facility not found: ${l}`),r;if(Bo.needsMigration(o)){const u=Bo.migrateFacility(o);return{...r,facilities:r.facilities.map(m=>m.id===l?u:m)}}return r})},addItemToInventory:(l,r)=>{const u=i().facilities.find(p=>p.id===l);if(!u||!u.inventory)return console.error(`Facility or inventory not found: ${l}`),!1;const m=Z.addItem(u.inventory,r);return m&&f(p=>({facilities:p.facilities.map(y=>y.id===l?{...y,inventory:u.inventory}:y)})),m},removeItemFromInventory:(l,r,o)=>{const m=i().facilities.find(y=>y.id===l);if(!m||!m.inventory)return console.error(`Facility or inventory not found: ${l}`),!1;const p=Z.removeItem(m.inventory,r,o);return p&&f(y=>({facilities:y.facilities.map(h=>h.id===l?{...h,inventory:m.inventory}:h)})),p},getAvailableItems:(l,r)=>{const u=i().facilities.find(m=>m.id===l);return!u||!u.inventory?(u==null?void 0:u.current_storage[r])||0:Z.getAvailableQuantity(u.inventory,r)},findBestQualityItems:(l,r,o)=>{const m=i().facilities.find(p=>p.id===l);return!m||!m.inventory?(console.warn(`Facility or inventory not found: ${l}`),[]):Z.getBestQualityItems(m.inventory,r,o)},cleanupUndefinedItems:()=>{f(l=>{console.log("🧹 Starting global cleanup of undefined items...");let r=0;const o=new Set,u=l.facilities.map(m=>{const p={...m};if(p.inventory){const h=Z.cleanInventoryUndefinedItems(p.inventory);r+=h.removedCount,h.removedItems.forEach(v=>o.add(v))}const y=Z.cleanLegacyStorageUndefinedItems(p.current_storage);return r+=y.removedCount,y.removedItems.forEach(h=>o.add(h)),p});return console.log(`🧹 Global cleanup complete: removed ${r} undefined items`),console.log(`🧹 Undefined item types removed: ${Array.from(o).join(", ")}`),{...l,facilities:u}})}})),et=hy("Starting Garage");et.equipment=qy.garage.map(f=>Tf(f,et.id));et.equipment_capacity=rs(et.equipment,kn);et.used_floor_space=et.equipment.reduce((f,i)=>{const l=kn.get(i.equipmentId);return f+((l==null?void 0:l.footprint)||0)},0);const _f={steel:20,plastic:15,aluminum:2,"mechanical-component":30,"small-tube":5,"small-casing":5,"mechanical-assembly":3,damaged_basic_sidearm:3,low_tech_spares:20,damaged_tactical_knife:2,dull_tactical_knife:4,"blade-finished":3,"knife-handle":5,basic_electronics:3,machined_parts:5,cleaning_supplies:10,drenched_tactical_knife:2,corroded_mechanical_assembly:3,heat_damaged_sidearm:2,contaminated_electronics:4,radiation_exposed_rifle:1,impact_damaged_components:5,absorbent_materials:10,rust_remover:8,decontamination_solution:6,neutralizing_agent:5,thermal_protection:4,tempering_compounds:3,protective_coating:6,lubricants:8,replacement_parts:12};et.current_storage={..._f};et.inventory=Bo.migrateFacility({...et,current_storage:_f}).inventory;et.inventory&&et.inventory.storageCapacity<1e3&&(console.log(`Upgrading facility storage capacity from ${et.inventory.storageCapacity} to 1000`),et.inventory.storageCapacity=1e3,et.storage_capacity=1e3);const ds=new Af(kn);ds.setFacility(et);const Yy=ds.initializeWorkspace(et);ds.setJobCompleteCallback(f=>{Ee.getState().addJobCompletionNotification({jobId:f.id,productId:f.productId,methodName:f.method.name,quantity:f.quantity})});const Vy=new Sf,Jy=Vy.generateMarketLots(8,0),Py=new Mf,Xy=Py.generateCustomerContracts(3,0);Ee.setState({facilities:[et],selectedFacilityId:et.id,machineWorkspaceManager:ds,machineWorkspace:Yy,marketState:{availableLots:Jy,activePurchaseOrders:[],playerListings:[],transactionHistory:[],lastLotRefresh:0,nextRefreshAt:24},contractState:{availableCustomerContracts:Xy,availableSupplyContracts:[],activeCustomerContracts:[],activeSupplyContracts:[],contractProgress:new Map,completedContracts:[],contractHistory:[],lastContractRefresh:0,nextRefreshAt:48}});setTimeout(()=>{console.log("🧹 Running startup cleanup of undefined items..."),Ee.getState().cleanupUndefinedItems()},100);typeof window<"u"&&(window.cleanupInventory=()=>{console.log("🧹 Manual inventory cleanup requested..."),Ee.getState().cleanupUndefinedItems()},window.validateMaterials=()=>{my(async()=>{const{validateAssemblyComponents:f,getBaseItem:i,baseItems:l}=await Promise.resolve().then(()=>vy);return{validateAssemblyComponents:f,getBaseItem:i,baseItems:l}},void 0).then(({validateAssemblyComponents:f,getBaseItem:i,baseItems:l})=>{console.log("🔍 Validating all material references...");let r=0;for(const[o,u]of Object.entries(l)){const m=f(u);m.valid||(console.error(`❌ ${o} has missing components: ${m.missingComponents.join(", ")}`),r+=m.missingComponents.length)}console.log(r===0?"✅ All assembly components are properly defined!":`❌ Found ${r} missing component references`)})});Ee.getState().machineWorkspaceManager.setJobCompleteCallback(f=>{const i=Ee.getState();if(i.addJobCompletionNotification({jobId:f.id,productId:f.productId,methodName:f.method.name,quantity:f.quantity}),i.selectedFacilityId){const l=i.facilities.find(r=>r.id===i.selectedFacilityId);l&&(i.machineWorkspaceManager.setFacility(l),Ee.setState({machineWorkspace:i.machineWorkspaceManager.getWorkspace(i.selectedFacilityId),facilities:[...i.facilities]}))}});const Ky=[{id:"research",label:"R&D",description:"Research & Development"},{id:"manufacturing",label:"Workshop",description:"Workshop & Production Status"},{id:"catalog",label:"Catalog",description:"Manufacturing Catalog & Job Planning"},{id:"equipment",label:"Equipment",description:"Equipment Management"},{id:"market",label:"Market",description:"Material Trading"},{id:"contracts",label:"Contracts",description:"Customer Orders"}];function Zy(){const f=Ee(l=>l.activeTab),i=Ee(l=>l.setActiveTab);return d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx("span",{className:"ascii-accent text-sm mr-4",children:"▶"}),Ky.map(l=>{const r=l.id===f;return d.jsx("button",{onClick:()=>i(l.id),className:`tab-button ${r?"active":""}`,title:l.description,children:l.label},l.id)})]})}function Wy(){const f=Ee(l=>l.research),i=Ee(l=>l.credits);return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"terminal-header",children:[d.jsx("span",{className:"ascii-accent",children:"◯"})," RESEARCH & DEVELOPMENT"]}),d.jsx("div",{className:"terminal-card border-yellow-600",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-yellow-400 font-mono text-lg mb-2",children:"⚠ NOT YET IMPLEMENTED"}),d.jsx("div",{className:"text-gray-400 text-sm",children:"Research system is planned but not yet functional. Currently showing placeholder data."})]})}),f.current&&d.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-teal-500",children:[d.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"ACTIVE PROJECT"}),d.jsx("div",{className:"text-white font-medium",children:f.current}),d.jsxs("div",{className:"mt-3",children:[d.jsx("div",{className:"progress-bar",children:d.jsx("div",{className:"progress-fill",style:{width:"40%"}})}),d.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"40% Complete • 3 turns remaining"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-mono text-gray-400 mb-4",children:"AVAILABLE PROJECTS"}),d.jsx("div",{className:"space-y-3",children:f.available.map(l=>{const r=f.completed.includes(l.id),o=f.current===l.id,u=l.prerequisites.every(h=>f.completed.includes(h))&&!r&&!o,m=i>=l.cost;let p="",y="";return r?(p="COMPLETE",y="status-good"):o?(p="IN PROGRESS",y="text-yellow-400"):u?m?(p="READY",y="status-good"):(p="INSUFFICIENT FUNDS",y="status-danger"):(p="LOCKED",y="text-gray-600"),d.jsxs("div",{className:`bg-gray-800 rounded-lg p-4 border transition-all duration-200 ${u&&m?"border-gray-600 hover:border-yellow-500 cursor-pointer":"border-gray-700"}`,onClick:()=>{},children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h4",{className:`font-medium ${u&&m?"text-yellow-400":"text-gray-400"}`,children:l.name}),d.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Cost: ",d.jsxs("span",{className:"font-mono",children:[l.cost.toLocaleString(),"cr"]})]})]}),d.jsx("div",{className:`text-xs font-mono px-2 py-1 rounded ${y}`,children:p})]}),l.prerequisites.length>0&&d.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Requires: ",l.prerequisites.join(", ")]})]},l.id)})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[d.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[d.jsx("div",{className:"text-gray-400",children:"Research Speed"}),d.jsx("div",{className:"font-mono text-teal-400",children:"10 points/turn"})]}),d.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[d.jsx("div",{className:"text-gray-400",children:"Available Funds"}),d.jsxs("div",{className:"font-mono status-good",children:[i.toLocaleString(),"cr"]})]})]})]})}function Fy(){const f=Nt.getStats();return d.jsxs("div",{className:"terminal-card border-blue-600 mb-4",children:[d.jsx("div",{className:"text-blue-400 font-mono text-sm mb-2",children:"🔍 JOB STATE MANAGER"}),d.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 text-xs",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-green-400 text-lg font-bold",children:f.ready}),d.jsx("div",{className:"text-gray-400",children:"READY"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-yellow-400 text-lg font-bold",children:f.active}),d.jsx("div",{className:"text-gray-400",children:"ACTIVE"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-orange-400 text-lg font-bold",children:f.blocked}),d.jsx("div",{className:"text-gray-400",children:"BLOCKED"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-emerald-400 text-lg font-bold",children:f.completed}),d.jsx("div",{className:"text-gray-400",children:"COMPLETED"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-teal-400 text-lg font-bold",children:f.total}),d.jsx("div",{className:"text-gray-400",children:"TOTAL"})]})]})]})}function zo(f){return f.split("_").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ")}function eh({equipmentId:f,isActive:i}){if(!i)return null;const r=(o=>{switch(o){case"workbench_basic":return{symbol:"⚒",animation:"animate-bounce",color:"text-yellow-400"};case"lathe_manual":return{symbol:"◉",animation:"animate-spin",color:"text-blue-400"};case"mill_manual":return{symbol:"⟲",animation:"animate-spin",color:"text-green-400"};case"hand_tools_basic":return{symbol:"🔧",animation:"animate-pulse",color:"text-orange-400"};case"hand_tools_precision":return{symbol:"⚙",animation:"animate-spin",color:"text-purple-400"};case"measuring_tools_basic":return{symbol:"📐",animation:"animate-pulse",color:"text-teal-400"};default:return{symbol:"⚡",animation:"animate-pulse",color:"text-yellow-400"}}})(f);return d.jsx("div",{className:`absolute top-1 right-1 text-xs ${r.color} ${r.animation}`,children:r.symbol})}function th({equipment:f,definition:i,slot:l,currentTime:r}){var B;const[o,u]=pe.useState(0),[m,p]=pe.useState("N/A"),y=pe.useRef(null),h=Ee(P=>P.gameTime),v=pe.useRef(h.gameSpeed),A=pe.useRef(null),T=P=>{const F=Math.floor(P*10),oe=10-F;return"█".repeat(F)+"░".repeat(oe)},N=pe.useCallback(()=>{if(!l.currentJob||!l.currentProgress){u(0),p("N/A");return}const P=Date.now(),F=h.gameSpeed||1;if(h.isPaused){const $=r-l.currentProgress.startTime,Y=l.currentProgress.estimatedCompletion-l.currentProgress.startTime,X=Y>0?$/Y:0,S=Math.min(1,Math.max(0,X));u(S);const w=Math.max(0,Y-$),V=Math.floor(w*60),Q=Math.floor(w*3600%60);p(`${V}m ${Q}s`);return}v.current!==F&&(v.current=F,A.current=P);const se=6e4;let J=l.currentProgress.lastUpdateTime||P;A.current&&A.current>J&&(J=A.current);const Ge=(P-J)*F/se,be=r+Ge-l.currentProgress.startTime,Ue=l.currentProgress.estimatedCompletion-l.currentProgress.startTime,ke=Ue>0?be/Ue:0,ge=Math.min(1,Math.max(0,ke));u(ge);const te=Math.max(0,Ue-be),ue=Math.floor(te*60),O=Math.floor(te*3600%60);ge>=1?p("Completing..."):!isNaN(ue)&&!isNaN(O)?p(`${ue}m ${O}s`):p("Calculating...")},[l,r,h]);pe.useEffect(()=>{if(!l.currentJob){u(0),p("N/A");return}const P=()=>{N(),y.current=requestAnimationFrame(P)};return y.current=requestAnimationFrame(P),()=>{y.current&&cancelAnimationFrame(y.current)}},[l.currentJob,N]);const I=()=>m,H=()=>o;return d.jsxs("div",{className:"border border-teal-400 bg-gray-900 p-2 relative",children:[d.jsx(eh,{equipmentId:f.equipmentId,isActive:!!l.currentJob}),d.jsxs("div",{className:"mb-2",children:[d.jsx("h3",{className:"text-teal-400 font-bold text-sm",children:i.name}),d.jsxs("span",{className:"text-xs text-gray-500",children:["Condition: ",f.condition,"%"]})]}),d.jsx("div",{className:"h-16 flex flex-col justify-between",children:l.currentJob?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"text-xs text-white mb-1",children:["Making: ",zo(l.currentJob.productId)]}),d.jsx("div",{className:"text-xs text-gray-300 mb-1",children:(B=l.currentJob.method.operations[l.currentJob.currentOperationIndex])==null?void 0:B.name}),d.jsxs("div",{children:[d.jsx("div",{className:"text-teal-400 text-xs",children:T(H())}),d.jsxs("div",{className:"text-gray-400 text-xs",children:[Math.floor(H()*100),"% - ",I()]})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"IDLE"}),d.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Waiting for work"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-gray-700 text-xs",children:"░░░░░░░░░░"}),d.jsx("div",{className:"text-gray-600 text-xs",children:"Ready"})]})]})})]})}function ah({workspace:f,facility:i,equipmentDatabase:l}){const[r,o]=pe.useState(null),[u,m]=pe.useState(new Set),p=Ee(k=>k.cancelMachineJob),y=Ee(k=>k.gameTime),h=Array.from(f.machines.values()).map(k=>k.currentJob).filter(k=>k!=null),v=Nt.getReadyJobs(),A=Nt.getBlockedJobs(),T=Nt.getJobsByState(Vt.IN_PROGRESS),N=[...v,...A,...T],I=y.totalGameHours,H=(f.completedJobs||[]).filter(k=>{if(!k||!k.completedAt)return!1;const be=5/3600*y.gameSpeed;return I-k.completedAt<=be}).slice(-5),P=[...h,...N,...H].filter(k=>k!=null).filter(k=>!(!k||!k.id||k.id.includes("_subop_"))),F=k=>{var O,$,Y;if(!k.subOperations||k.subOperations.size===0)return{completed:((O=k.completedOperations)==null?void 0:O.length)||0,inProgress:k.state==="in_progress"?1:0,queued:k.state==="queued"?1:0,pending:Math.max(0,(k.method.operations.length||0)-((($=k.completedOperations)==null?void 0:$.length)||0)-(k.state==="in_progress"?1:0)),total:k.method.operations.length||1,percentage:Math.round((((Y=k.completedOperations)==null?void 0:Y.length)||0)/(k.method.operations.length||1)*100),operationGroups:new Map,isLegacy:!0};const be=Array.from(k.subOperations.values()),Ue=be.filter(X=>X.state==="completed").length,ke=be.filter(X=>X.state==="in_progress").length,ge=be.filter(X=>X.state==="queued").length,te=be.filter(X=>X.state==="pending").length,ue=new Map;return be.forEach(X=>{const S=X.operation.name.replace(" (1x)","");ue.has(S)||ue.set(S,[]),ue.get(S).push({subOp:X,status:X.state})}),{total:be.length,completed:Ue,inProgress:ke,queued:ge,pending:te,percentage:Math.round(Ue/be.length*100),operationGroups:ue}},oe=(k,be)=>{p(be,k),o(null)},se=k=>{m(be=>{const Ue=new Set(be);return Ue.has(k)?Ue.delete(k):Ue.add(k),Ue})},J=k=>{const be=Nt.getJobState(k.id);if(be)switch(be.state){case Vt.READY_TO_START:return{statusText:"READY",statusColor:"text-green-400",borderColor:"border-green-600",bgColor:"bg-green-900"};case Vt.BLOCKED_BY_DEPENDENCIES:return{statusText:"BLOCKED (DEPS)",statusColor:"text-orange-400",borderColor:"border-orange-600",bgColor:"bg-orange-900"};case Vt.BLOCKED_BY_MATERIALS:return{statusText:"BLOCKED (MATERIALS)",statusColor:"text-red-400",borderColor:"border-red-600",bgColor:"bg-red-900"};case Vt.BLOCKED_BY_EQUIPMENT:return{statusText:"BLOCKED (EQUIPMENT)",statusColor:"text-purple-400",borderColor:"border-purple-600",bgColor:"bg-purple-900"};case Vt.IN_PROGRESS:return{statusText:"IN PROGRESS",statusColor:"text-yellow-400",borderColor:"border-yellow-600",bgColor:"bg-yellow-900"};case Vt.COMPLETED:return{statusText:"COMPLETED",statusColor:"text-emerald-400",borderColor:"border-emerald-600",bgColor:"bg-emerald-900"}}switch(k.state){case"queued":return{statusText:"QUEUED",statusColor:"text-blue-400",borderColor:"border-blue-600",bgColor:"bg-blue-900"};case"in_progress":return{statusText:"IN PROGRESS",statusColor:"text-yellow-400",borderColor:"border-yellow-600",bgColor:"bg-yellow-900"};case"completed":return{statusText:"COMPLETED",statusColor:"text-green-400",borderColor:"border-green-600",bgColor:"bg-green-900"};default:return{statusText:"UNKNOWN",statusColor:"text-gray-400",borderColor:"border-gray-600",bgColor:"bg-gray-900"}}},Ae=P.length,Oe=h.length,Ge=N.length;return d.jsxs("div",{className:"border border-gray-600 bg-gray-900 p-3 mb-4",children:[d.jsxs("h3",{className:"text-gray-400 font-bold mb-3",children:["FACILITY JOBS (",Ae,") - Active: ",Oe,", Queued: ",Ge]}),d.jsx("div",{className:"max-h-96 overflow-y-auto",children:P.length===0?d.jsx("div",{className:"text-gray-500",children:"No jobs"}):d.jsx("div",{className:"space-y-3",children:P.map(k=>{if(!k||!k.id)return null;const be=J(k),Ue=u.has(k.id),ke=k.state==="queued"||k.state==="in_progress";return d.jsxs("div",{className:`border-l-4 ${be.borderColor} pl-3 py-2 ${be.bgColor} bg-opacity-10`,children:[d.jsxs("div",{className:"flex justify-between items-start mb-1",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>se(k.id),className:"text-xs text-gray-400 hover:text-gray-200",children:Ue?"▼":"►"}),d.jsxs("div",{className:"text-sm text-white",children:[zo(k.productId)," (",k.method.name,")"]}),d.jsx("span",{className:`text-xs font-bold ${be.statusColor}`,children:be.statusText}),k.rushOrder&&d.jsx("span",{className:"text-red-400 font-bold text-xs",children:"RUSH"})]}),(()=>{const ge=F(k);return d.jsxs("div",{className:"text-xs mt-1 space-y-1",children:[d.jsxs("div",{className:"text-teal-300",children:["Progress: ",ge.completed,"/",ge.total," operations (",ge.percentage,"%)"]}),(()=>{var te,ue;if(k.subOperations&&k.subOperations.size>0){const O=Array.from(k.subOperations.entries()).find(([X,S])=>S.state==="in_progress");if(O){const[X,S]=O,w=i==null?void 0:i.equipment.find(Q=>Q.id===S.assignedMachineId),V=w?l.get(w.equipmentId):null;return d.jsxs("div",{className:"text-yellow-300",children:["◐ Current: ",S.operation.name,V&&d.jsxs("span",{className:"text-teal-400",children:[" (",V.name,")"]})]})}const $=Array.from(k.subOperations.entries()).find(([X,S])=>S.state==="queued");if($){const[X,S]=$;return d.jsxs("div",{className:"text-blue-300",children:["● Next: ",S.operation.name]})}const Y=Array.from(k.subOperations.entries()).find(([X,S])=>S.state==="pending");if(Y){const[X,S]=Y;return d.jsxs("div",{className:"text-gray-400",children:["○ Waiting: ",S.operation.name]})}}else{if(k.state==="queued")return d.jsxs("div",{className:"text-blue-300",children:["● Next: ",((te=k.method.operations[k.currentOperationIndex])==null?void 0:te.name)||"Starting..."]});if(k.state==="in_progress")return d.jsxs("div",{className:"text-yellow-300",children:["◐ Current: ",((ue=k.method.operations[k.currentOperationIndex])==null?void 0:ue.name)||"Processing..."]})}return null})(),ge.inProgress>1&&d.jsxs("div",{className:"text-yellow-400",children:["+",ge.inProgress-1," more active"]}),ge.queued>1&&d.jsxs("div",{className:"text-blue-400",children:[ge.queued," ready to start"]})]})})()]}),ke&&d.jsx("button",{onClick:()=>o(r===k.id?null:k.id),className:"text-xs text-red-400 hover:text-red-300 px-1",children:"✕"})]}),r===k.id&&ke&&d.jsxs("div",{className:"mb-2 p-2 bg-gray-800 border border-red-600 text-xs",children:[d.jsx("div",{className:"text-red-400 font-semibold mb-1",children:"Cancel Job?"}),d.jsxs("div",{className:"text-gray-300 mb-2",children:["Progress: ",k.completedOperations.length,"/",k.method.operations.length," operations"]}),d.jsx("div",{className:"text-gray-400 mb-2",children:k.jobInventory?d.jsx("div",{children:"All job inventory will be returned to facility"}):d.jsx("div",{children:"Created components will be recovered"})}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>oe(k.id,k.facilityId),className:"bg-red-700 hover:bg-red-600 text-red-100 px-2 py-1 text-xs",children:"Cancel Job"}),d.jsx("button",{onClick:()=>o(null),className:"bg-gray-700 hover:bg-gray-600 text-gray-300 px-2 py-1 text-xs",children:"Keep Job"})]})]}),Ue&&d.jsx("div",{className:"mt-2 ml-4 space-y-2",children:(F(k),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"bg-gray-800 p-2 border border-gray-600",children:[d.jsx("div",{className:"text-teal-400 text-xs font-semibold mb-1",children:"🎯 Expected Outcomes"}),d.jsx("div",{className:"ml-2 space-y-1",children:(()=>{var te;const ge=new Set;if((te=k.method)!=null&&te.operations){const ue=k.method.operations;for(let O=ue.length-1;O>=0;O--){const $=ue[O];if($.materialProduction&&$.materialProduction.length>0){$.materialProduction.forEach(Y=>{const X=W(Y.itemId);X&&ge.add(`${Y.count}x ${X.name}`)});break}}}return ge.size===0&&ge.add(`1x ${zo(k.productId)}`),Array.from(ge).map((ue,O)=>d.jsxs("div",{className:"text-xs text-teal-300",children:["• ",ue]},O))})()})]}),d.jsx("div",{className:"space-y-2",children:k.subOperations&&k.subOperations.size>0?Array.from(k.subOperations.entries()).map(([ge,te])=>{const ue={completed:"✓",in_progress:"◐",queued:"●",pending:"○",failed:"✗"}[te.state]||"○",O={completed:"text-green-400",in_progress:"text-yellow-400",queued:"text-blue-400",pending:"text-gray-400",failed:"text-red-400"}[te.state]||"text-gray-400",$={completed:"bg-green-900",in_progress:"bg-yellow-900",queued:"bg-blue-900",pending:"bg-gray-900",failed:"bg-red-900"}[te.state]||"bg-gray-900";return d.jsxs("div",{className:`border-l-2 border-gray-600 pl-2 py-1 ${$} bg-opacity-20`,children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`${O} font-mono text-xs`,children:ue}),d.jsxs("span",{className:"text-xs text-white font-medium",children:[ge+1,". ",te.operation.name]}),d.jsx("span",{className:`text-xs ${O} uppercase font-bold`,children:te.state})]}),d.jsxs("div",{className:"text-xs text-gray-400",children:["~",te.operation.baseDurationMinutes||0,"min"]})]}),d.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[te.assignedMachineId&&d.jsxs("div",{className:"text-xs text-teal-300",children:["🔧 Machine: ",(()=>{const Y=i==null?void 0:i.equipment.find(S=>S.id===te.assignedMachineId),X=Y?l.get(Y.equipmentId):null;return(X==null?void 0:X.name)||te.assignedMachineId})()]}),te.operation.requiredTag&&d.jsxs("div",{className:"text-xs text-purple-300",children:["📋 Requires: ",te.operation.requiredTag.category," ≥ ",te.operation.requiredTag.minimum]}),te.operation.materialConsumption&&te.operation.materialConsumption.length>0&&d.jsxs("div",{className:"text-xs text-red-300",children:["📥 Consumes: ",te.operation.materialConsumption.map(Y=>{const X=W(Y.itemId);return`${Y.count}x ${(X==null?void 0:X.name)||Y.itemId}`}).join(", ")]}),te.operation.materialProduction&&te.operation.materialProduction.length>0&&d.jsxs("div",{className:"text-xs text-green-300",children:["📤 Produces: ",te.operation.materialProduction.map(Y=>{const X=W(Y.itemId);return`${Y.count}x ${(X==null?void 0:X.name)||Y.itemId}`}).join(", ")]}),te.state==="in_progress"&&te.startedAt&&d.jsxs("div",{className:"text-xs text-yellow-300",children:["⏱️ Started: ",Bi({totalGameHours:te.startedAt,days:Math.floor(te.startedAt/24),hours:te.startedAt%24})]})]})]},ge)}):k.method.operations.map((ge,te)=>{var V;const ue=te<(((V=k.completedOperations)==null?void 0:V.length)||0),O=te===k.currentOperationIndex&&k.state==="in_progress",$=te>k.currentOperationIndex,Y=ue?"✓":O?"◐":$?"○":"●",X=ue?"text-green-400":O?"text-yellow-400":$?"text-gray-400":"text-blue-400",S=ue?"bg-green-900":O?"bg-yellow-900":$?"bg-gray-900":"bg-blue-900",w=ue?"COMPLETED":O?"IN PROGRESS":$?"PENDING":"QUEUED";return d.jsxs("div",{className:`border-l-2 border-gray-600 pl-2 py-1 ${S} bg-opacity-20`,children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`${X} font-mono text-xs`,children:Y}),d.jsxs("span",{className:"text-xs text-white font-medium",children:[te+1,". ",ge.name]}),d.jsx("span",{className:`text-xs ${X} uppercase font-bold`,children:w})]}),d.jsxs("div",{className:"text-xs text-gray-400",children:["~",ge.baseDurationMinutes||0,"min"]})]}),d.jsx("div",{className:"ml-4 mt-1 space-y-1",children:ge.material_requirements&&ge.material_requirements.length>0&&d.jsxs("div",{className:"text-xs text-red-300",children:["📥 Requires: ",ge.material_requirements.map(Q=>`${Q.quantity}x ${Q.material_id}`).join(", ")]})})]},te)})}),k.jobInventory&&d.jsxs("div",{className:"bg-gray-800 p-2 border border-gray-600",children:[d.jsx("div",{className:"text-orange-400 text-xs font-semibold mb-1",children:"📦 Job Inventory"}),d.jsx("div",{className:"ml-2 space-y-1",children:(()=>{const ge=Z.getAllItems(k.jobInventory);return ge.length===0?d.jsx("div",{className:"text-xs text-gray-500",children:"Empty"}):ge.map((te,ue)=>{const O=W(te.baseItemId);return d.jsxs("div",{className:"text-xs text-orange-300",children:["• ",te.quantity,"x ",(O==null?void 0:O.name)||te.baseItemId," (",te.quality,"% quality)"]},ue)})})()})]})]}))})]},k.id)})})})]})}function nh(){const f=Ee(l=>l.jobCompletionNotifications),i=Ee(l=>l.dismissNotification);return pe.useEffect(()=>{const l=f.map(r=>setTimeout(()=>{i(r.id)},5e3));return()=>{l.forEach(r=>clearTimeout(r))}},[f,i]),f.length===0?null:d.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:f.map(l=>d.jsx("div",{className:"bg-teal-800 border border-teal-400 text-teal-100 p-3 rounded shadow-lg max-w-sm animate-bounce",children:d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("div",{className:"font-bold text-sm",children:"Job Completed!"}),d.jsxs("div",{className:"text-xs",children:[l.quantity,"x ",l.productId]}),d.jsxs("div",{className:"text-xs text-teal-300",children:["Method: ",l.methodName]})]}),d.jsx("button",{onClick:()=>i(l.id),className:"text-teal-300 hover:text-teal-100 ml-2",children:"×"})]})},l.id))})}function ih(){const{facilities:f,selectedFacilityId:i,equipmentDatabase:l,machineWorkspace:r,gameTime:o}=Ee(),[u,m]=pe.useState(0);pe.useEffect(()=>{const h=setInterval(()=>{m(v=>v+1)},2e3);return()=>clearInterval(h)},[]);const p=f.find(h=>h.id===i);if(!p)return d.jsx("div",{className:"text-gray-500",children:"No facility selected"});if(!r)return d.jsx("div",{className:"text-gray-500",children:"No workspace found"});const y=[];return r.machines.forEach(h=>{h.currentJob&&y.push(h.currentJob)}),y.push(...r.jobQueue),y.push(...r.completedJobs.slice(-5)),d.jsxs("div",{className:"font-mono text-sm",children:[d.jsx(nh,{}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("h2",{className:"text-xl text-teal-400 mb-2",children:[p.name.toUpperCase()," - EQUIPMENT STATUS"]}),d.jsxs("div",{className:"text-xs text-gray-500",children:["Time: ",Bi(o)]})]}),d.jsx("div",{className:"terminal-card border-green-600 mb-4",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-green-400 font-mono text-lg mb-2",children:"✅ EVENT-DRIVEN ARCHITECTURE ACTIVE"}),d.jsx("div",{className:"text-gray-400 text-sm",children:"Jobs are now processed using an event-driven system for optimal performance."})]})}),d.jsx(Fy,{}),d.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:p.equipment.map(h=>{const v=l.get(h.equipmentId),A=r.machines.get(h.id);return!v||!A?null:d.jsx(th,{equipment:h,definition:v,slot:A,currentTime:o.totalGameHours},h.id)})}),d.jsx(ah,{workspace:r,facility:p,equipmentDatabase:l,allJobs:y}),d.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 text-xs text-gray-500",children:[d.jsxs("div",{children:["Total Machines: ",r.machines.size]}),d.jsxs("div",{children:["Active Jobs: ",Array.from(r.machines.values()).filter(h=>h.currentJob).length]}),d.jsxs("div",{children:["Queued Jobs: ",r.jobQueue.length]}),d.jsxs("div",{children:["Completed Today: ",r.completedJobs.length]})]})]})}var ss=(f=>(f.MANUFACTURE_NEW="manufacture_new",f.REPAIR="repair",f.DISASSEMBLE="disassemble",f.REFURBISH="refurbish",f.CLEAN="clean",f.RECYCLE="recycle",f.PREPARE_STOCK="prepare_stock",f.USE_IN_ASSEMBLY="use_in_assembly",f.ANALYZE="analyze",f.SCRAP="scrap",f))(ss||{});class lh{static analyzeItem(i,l,r){const o=W(i.baseItemId);if(!o)return console.warn(`Unknown base item: ${i.baseItemId}`),[];const u=[],m=rs(l.equipment,r);switch(console.log(`InventoryActionDiscovery: Analyzing ${o.name} [${i.tags.join(", ")}]`),o.manufacturingType){case z.RAW_MATERIAL:u.push(...this.analyzeRawMaterial(i,o,l,m));break;case z.SHAPED_MATERIAL:u.push(...this.analyzeShapedMaterial(i,o,l,m));break;case z.ASSEMBLY:u.push(...this.analyzeAssembly(i,o,l,m));break}return u.push(...this.analyzeUniversalActions(i,o,l,m)),u.sort((p,y)=>p.feasible!==y.feasible?p.feasible?-1:1:y.estimatedValue-p.estimatedValue)}static analyzeRawMaterial(i,l,r,o){const u=[],m=o.has(j.SURFACE)||o.has(j.BASIC_MANIPULATION);return u.push({type:"prepare_stock",name:`Prepare ${l.name} Stock`,description:`Shape raw ${l.name.toLowerCase()} into billets, cylinders, sheets, or wire for manufacturing`,feasible:m,estimatedTime:15*i.quantity,estimatedCost:0,estimatedValue:i.quantity*l.baseValue*1.2,requirements:[{type:"equipment",description:"Basic shaping tools (workbench, hand tools)",satisfied:m,alternatives:m?[]:["Basic Workbench","Hand Tools"]}],riskFactors:[{description:"Material waste during shaping",probability:.1,impact:"minor",mitigation:"Use precision tools for better efficiency"}],confidence:.9}),u}static analyzeShapedMaterial(i,l,r,o){const u=[];return(o.has(j.TURNING)||o.has(j.MILLING))&&u.push({type:"refurbish",name:`Precision Machine ${l.name}`,description:"Further refine this component with precision machining for better quality",feasible:!0,estimatedTime:30*i.quantity,estimatedCost:5*i.quantity,estimatedValue:i.quantity*l.baseValue*1.4,requirements:[{type:"equipment",description:"Precision machining equipment (lathe, mill)",satisfied:!0}],riskFactors:[{description:"Risk of over-machining and ruining component",probability:.05,impact:"moderate",mitigation:"Use careful feeds and speeds"}],confidence:.8}),u.push({type:"use_in_assembly",name:"Use in Assembly",description:`See which products can be made using this ${l.name.toLowerCase()}`,feasible:!0,estimatedTime:0,estimatedCost:0,estimatedValue:0,requirements:[],riskFactors:[],confidence:1}),u}static analyzeAssembly(i,l,r,o){const u=[];if(this.isDamaged(i)){const p=o.has(j.BASIC_MANIPULATION);u.push({type:"repair",name:`Repair ${l.name}`,description:"Disassemble, replace damaged components, and rebuild",feasible:p,estimatedTime:this.estimateRepairTime(i,l),estimatedCost:this.estimateRepairCost(i,l),estimatedValue:this.estimateRepairedValue(i,l),requirements:[{type:"equipment",description:"Basic assembly tools",satisfied:p,alternatives:p?[]:["Basic Hand Tools","Workbench"]},{type:"material",description:"Replacement components and materials",satisfied:!1,alternatives:["Purchase materials","Manufacture components"]}],riskFactors:[{description:"Some damage may be irreparable",probability:.2,impact:"moderate",mitigation:"Careful inspection before starting"}],confidence:.7})}const m=o.has(j.BASIC_MANIPULATION);if(u.push({type:"disassemble",name:`Disassemble ${l.name}`,description:"Carefully break down into recoverable components",feasible:m,estimatedTime:this.estimateDisassemblyTime(i,l),estimatedCost:0,estimatedValue:this.estimateComponentValue(i,l),requirements:[{type:"equipment",description:"Basic disassembly tools",satisfied:m,alternatives:m?[]:["Basic Hand Tools"]}],riskFactors:[{description:"Component damage during disassembly",probability:.15,impact:"minor",mitigation:"Use proper disassembly sequence"}],confidence:.85}),!this.isDamaged(i)&&i.quality<90){const p=o.has(j.PRECISION_MANIPULATION);u.push({type:"refurbish",name:`Refurbish ${l.name}`,description:"Clean, adjust, and tune for improved performance",feasible:p,estimatedTime:45*i.quantity,estimatedCost:10*i.quantity,estimatedValue:i.quantity*l.baseValue*1.3,requirements:[{type:"equipment",description:"Precision tools for adjustment and cleaning",satisfied:p,alternatives:p?[]:["Precision Hand Tools","Measuring Equipment"]}],riskFactors:[{description:"Risk of over-adjustment affecting performance",probability:.1,impact:"minor"}],confidence:.75})}return u}static analyzeUniversalActions(i,l,r,o){const u=[];if(this.hasEnvironmentalDamage(i)){const m=o.has(j.BASIC_MANIPULATION);u.push({type:"clean",name:`Clean ${l.name}`,description:"Remove environmental contamination and restore condition",feasible:m,estimatedTime:20*i.quantity,estimatedCost:5*i.quantity,estimatedValue:this.estimateCleanedValue(i,l),requirements:[{type:"equipment",description:"Cleaning equipment and workspace",satisfied:m}],riskFactors:[{description:"Some contamination may be permanent",probability:.1,impact:"minor"}],confidence:.9})}return u.push({type:"analyze",name:`Analyze ${l.name}`,description:"Study construction and identify improvement opportunities",feasible:!0,estimatedTime:10,estimatedCost:0,estimatedValue:0,requirements:[],riskFactors:[],confidence:1}),u.push({type:"scrap",name:`Scrap ${l.name}`,description:"Emergency disposal for immediate credits (low value)",feasible:!0,estimatedTime:5,estimatedCost:0,estimatedValue:l.baseValue*.1,requirements:[],riskFactors:[{description:"Permanent destruction of item",probability:1,impact:"severe",mitigation:"Consider other options first"}],confidence:1}),u}static isDamaged(i){return i.tags.includes(E.DAMAGED)||i.tags.includes(E.JUNK)}static hasEnvironmentalDamage(i){return i.tags.some(l=>["drenched","corroded","heat_damaged"].includes(l))}static estimateRepairTime(i,l){const o=(100-i.quality)/100;return Math.round(60*(1+o)*i.quantity)}static estimateRepairCost(i,l){const r=l.baseValue*.3,o=(100-i.quality)/100;return Math.round(r*(1+o)*i.quantity)}static estimateRepairedValue(i,l){return Math.round(l.baseValue*.75*i.quantity)}static estimateDisassemblyTime(i,l){return Math.round(20*i.quantity)}static estimateComponentValue(i,l){const r=this.isDamaged(i)?.6:.8;return Math.round(l.baseValue*r*i.quantity)}static estimateCleanedValue(i,l){const r=l.baseValue*(i.quality/100),o=l.baseValue*.15;return Math.round((r+o)*i.quantity)}}class wn{static generateRepairWorkflow(i,l=75){const r=W(i.baseItemId);if(!r)throw new Error(`Unknown item: ${i.baseItemId}`);console.log(`AutomaticWorkflowGeneration: Generating repair workflow for ${r.name}`);const o=[],u=[];let m=0;const p=this.createDisassemblyOperation(i,r,"inspection");o.push(p),m+=p.baseDurationMinutes;const y=this.createAnalysisOperation(i,r);if(o.push(y),m+=y.baseDurationMinutes,this.needsEnvironmentalTreatment(i)){const A=this.createTreatmentOperation(i,r);o.push(A),m+=A.baseDurationMinutes}const h=this.createComponentRepairOperation(i,r,u);o.push(h),m+=h.baseDurationMinutes;const v=this.createReassemblyOperation(i,r);return o.push(v),m+=v.baseDurationMinutes,{id:`repair_${r.id}_${Date.now()}`,targetProduct:r.id,targetQuantity:i.quantity,inputAnalysis:[],componentGaps:[],requiredOperations:o,estimatedDuration:m/60,materialRequirements:u,planningTime:Date.now(),plannerVersion:"auto-repair-v3.0",confidence:.75,name:`Repair ${r.name}`,description:"Complete repair workflow: disassembly → analysis → treatment → component replacement → reassembly",expectedOutputs:[{itemId:r.id,quantity:i.quantity,tags:[E.RESTORED],quality:Math.min(l,85)}],riskFactors:["Some damage may be irreparable","Component replacement may not match original quality","Assembly complexity may cause delays"]}}static generateDisassemblyWorkflow(i,l=!0){const r=W(i.baseItemId);if(!r)throw new Error(`Unknown item: ${i.baseItemId}`);if(r.manufacturingType!==z.ASSEMBLY)throw new Error(`Cannot disassemble ${r.manufacturingType} items`);console.log(`AutomaticWorkflowGeneration: Generating Manufacturing v2 disassembly workflow for ${r.name}`);const o=[];let u=0;const m=l?"careful":"fast",p=this.createComponentExtractionOperation(i,r,m);o.push(p),u+=p.baseDurationMinutes;const y=this.createComponentAssessmentOperation(i,r);o.push(y),u+=y.baseDurationMinutes;const h=this.createAdaptiveProcessingOperation(i,r);return o.push(h),u+=h.baseDurationMinutes,{id:`disassemble_${r.id}_${Date.now()}`,targetProduct:`disassembled_${r.id}`,targetQuantity:i.quantity,inputAnalysis:[],componentGaps:[],requiredOperations:o,estimatedDuration:u/60,materialRequirements:[],planningTime:Date.now(),plannerVersion:"manufacturing-v2-dynamic",confidence:.75,name:`Disassemble ${r.name}`,description:"Manufacturing v2 disassembly: component extraction → condition assessment → adaptive processing",expectedOutputs:[],riskFactors:l?["Component wear during removal","Hidden internal damage"]:["Component damage from fast disassembly","Possible material loss"]}}static generateManufacturingWorkflow(i,l=1){console.log(`AutomaticWorkflowGeneration: Generating manufacturing workflow for ${i.name}`);const r=[],o=[];let u=0;if(i.manufacturingType===z.ASSEMBLY&&i.assemblyComponents){i.assemblyComponents.forEach((h,v)=>{const A=this.createMaterialPreparationOperation(h,v,l);r.push(A),u+=A.baseDurationMinutes,o.push({material_id:h.componentId,quantity:h.quantity*l,consumed_at_start:!0})});const m=this.createComponentInspectionOperation(i,l);r.push(m),u+=m.baseDurationMinutes;const p=this.createAssemblyOperation(i,l);r.push(p),u+=p.baseDurationMinutes;const y=this.createFinishingOperation(i,l);r.push(y),u+=y.baseDurationMinutes}else if(i.manufacturingType===z.SHAPED_MATERIAL){const m=this.createRawMaterialPrepOperation(i,l);r.push(m),u+=m.baseDurationMinutes,i.materialSource&&o.push({material_id:i.materialSource,quantity:l,consumed_at_start:!0});const p=this.createShapingOperation(i,l);r.push(p),u+=p.baseDurationMinutes;const y=this.createQualityControlOperation(i,l);r.push(y),u+=y.baseDurationMinutes}return{id:`manufacture_${i.id}_${Date.now()}`,targetProduct:i.id,targetQuantity:l,inputAnalysis:[],componentGaps:[],requiredOperations:r,estimatedDuration:u/60,materialRequirements:o,planningTime:Date.now(),plannerVersion:"auto-manufacturing-v3.0",confidence:.85,name:`Manufacture ${i.name}`,description:"Complete manufacturing workflow: material preparation → processing → assembly → finishing",expectedOutputs:[{itemId:i.id,quantity:l,tags:[],quality:75}],riskFactors:["Material quality may affect final output","Complex assemblies may require additional time","Equipment precision affects final quality"]}}static generateTreatmentWorkflow(i,l){const r=W(i.baseItemId);if(!r)throw new Error(`Unknown item: ${i.baseItemId}`);console.log(`AutomaticWorkflowGeneration: Generating treatment workflow for conditions: ${l.join(", ")}`);const o=[];let u=0;l.forEach(p=>{const y=this.createSpecificTreatmentOperation(i,r,p);y&&(o.push(y),u+=y.baseDurationMinutes)});const m=this.createQualityAssessmentOperation(i,r);return o.push(m),u+=m.baseDurationMinutes,{id:`treatment_${r.id}_${Date.now()}`,targetProduct:r.id,targetQuantity:i.quantity,inputAnalysis:[],componentGaps:[],requiredOperations:o,estimatedDuration:u/60,materialRequirements:this.getTreatmentMaterials(l),planningTime:Date.now(),plannerVersion:"auto-treatment-v3.0",confidence:.8,name:`Treat ${r.name}`,description:`Environmental damage treatment: ${l.join(" + ")} removal → quality assessment`,expectedOutputs:[{itemId:r.id,quantity:i.quantity,tags:i.tags.filter(p=>!l.includes(p)),quality:Math.min(i.quality+15,100)}],riskFactors:["Some environmental damage may be permanent","Treatment chemicals may affect other components"]}}static createComponentExtractionOperation(i,l,r){const u={careful:{time:1,description:"Carefully extract components preserving their condition"},fast:{time:.6,description:"Quickly extract components for rapid processing"}}[r];return{id:`extract_components_${Date.now()}`,name:"Component Extraction",description:u.description,operationType:xe.DISASSEMBLY,requiredTag:{category:j.BASIC_MANIPULATION,minimum:1},baseDurationMinutes:Math.round(20*i.quantity*u.time),materialConsumption:[{itemId:i.baseItemId,count:i.quantity,tags:i.tags}],can_fail:r==="fast",failure_chance:r==="fast"?.1:.02,labor_skill:r==="careful"?"skilled_technician":"unskilled",generatedReason:`Extract components from ${l.name} for condition assessment`,isConditional:!1}}static createComponentAssessmentOperation(i,l){const r=[];if(l.assemblyComponents)for(const m of l.assemblyComponents)r.push({itemId:m.componentId,count:m.quantity*i.quantity,tags:[]});const o=Math.max(20,i.quality||20),u={...i,quality:o};return{id:`assess_components_${Date.now()}`,name:"Component Assessment",description:"Inspect extracted components to discover their actual conditions",operationType:xe.SHAPING,requiredTag:{category:j.MEASURING,minimum:1},baseDurationMinutes:15*i.quantity,materialConsumption:r,materialProduction:this.generateDiscoveredComponents(u,l,.8),can_fail:!1,failure_chance:0,labor_skill:"skilled_technician",generatedReason:"Discover actual component conditions through inspection",isConditional:!1}}static createAdaptiveProcessingOperation(i,l){return{id:`adaptive_processing_${Date.now()}`,name:"Adaptive Processing",description:"Process components based on discovered conditions (cleaning, treatment, or finalization)",operationType:xe.SHAPING,requiredTag:{category:j.BASIC_MANIPULATION,minimum:1},baseDurationMinutes:10*i.quantity,can_fail:!1,failure_chance:0,labor_skill:"unskilled",generatedReason:"Apply appropriate processing based on component assessment results",isConditional:!0}}static createDisassemblyOperation(i,l,r){console.warn("⚠️ DEPRECATED: createDisassemblyOperation should be replaced with Manufacturing v2 operations");const u={inspection:{time:.8,quality:.9},careful:{time:1,quality:.95},fast:{time:.6,quality:.7}}[r];return{id:`disassemble_${r}_${Date.now()}`,name:`${r.charAt(0).toUpperCase()+r.slice(1)} Disassembly`,description:`${r==="inspection"?"Partially disassemble for inspection":r==="careful"?"Carefully disassemble preserving components":"Quickly disassemble for rapid processing"}`,operationType:xe.DISASSEMBLY,requiredTag:{category:j.BASIC_MANIPULATION,minimum:1},baseDurationMinutes:Math.round(20*i.quantity*u.time),materialConsumption:[{itemId:i.baseItemId,count:i.quantity,tags:i.tags}],materialProduction:this.generateDisassemblyOutputs(i,l,u.quality),can_fail:r==="fast",failure_chance:r==="fast"?.1:.02,labor_skill:r==="careful"?"skilled_technician":"unskilled",generatedReason:`${r} disassembly for ${r==="inspection"?"repair analysis":"component recovery"}`,isConditional:!1}}static createAnalysisOperation(i,l){return{id:`analyze_${Date.now()}`,name:"Component Analysis",description:"Assess component condition and determine repair requirements",operationType:xe.SHAPING,requiredTag:{category:j.MEASURING,minimum:1},baseDurationMinutes:10*i.quantity,can_fail:!1,failure_chance:0,labor_skill:"skilled_technician",generatedReason:"Component condition assessment for repair planning",isConditional:!1}}static createTreatmentOperation(i,l){return{id:`treatment_${Date.now()}`,name:"Environmental Treatment",description:"Remove environmental contamination and damage",operationType:xe.SHAPING,requiredTag:{category:j.BASIC_MANIPULATION,minimum:1},baseDurationMinutes:30*i.quantity,materialConsumption:[{itemId:"cleaning_supplies",count:i.quantity,tags:[]}],can_fail:!0,failure_chance:.1,labor_skill:"unskilled",generatedReason:"Environmental damage treatment",isConditional:!0}}static createComponentRepairOperation(i,l,r){const o=[],u=[];if(l.assemblyComponents&&l.assemblyComponents.length>0){console.log(`AutomaticWorkflowGeneration: Creating Manufacturing v2 repair operation for ${l.name}`);for(const m of l.assemblyComponents){o.push({itemId:m.componentId,count:m.quantity*i.quantity,tags:[]});const p=(100-i.quality)/100,y=Math.min(.8,p+.2);Math.random()<y?(o.push({itemId:m.componentId,count:m.quantity*i.quantity,tags:[]}),u.push({itemId:m.componentId,count:m.quantity*i.quantity,tags:[],quality:85}),r.push({material_id:m.componentId,quantity:m.quantity*i.quantity,consumed_at_start:!1}),console.log(`AutomaticWorkflowGeneration: Will replace ${m.quantity}x ${m.componentId} (damaged)`)):(u.push({itemId:m.componentId,count:m.quantity*i.quantity,tags:[],quality:Math.min(i.quality+10,90)}),console.log(`AutomaticWorkflowGeneration: Will restore ${m.quantity}x ${m.componentId} (repairable)`))}}else console.warn(`AutomaticWorkflowGeneration: No assembly components found for ${l.name}, using fallback repair materials`),o.push({itemId:"low_tech_spares",count:Math.max(1,Math.round((100-i.quality)/20)),tags:[]}),r.push({material_id:"low_tech_spares",quantity:Math.max(1,Math.round((100-i.quality)/20)),consumed_at_start:!1});return{id:`component_repair_${Date.now()}`,name:"Component Repair/Replacement",description:"Inspect components and replace/repair as needed, then return functional components to job inventory",operationType:xe.ASSEMBLY,requiredTag:{category:j.BASIC_MANIPULATION,minimum:5},baseDurationMinutes:45*i.quantity,materialConsumption:o,materialProduction:u,can_fail:!0,failure_chance:.15,labor_skill:"skilled_technician",generatedReason:"Component inspection, repair, and replacement for repair workflow",isConditional:!1}}static createReassemblyOperation(i,l){const r=[];if(l.assemblyComponents&&l.assemblyComponents.length>0){console.log(`AutomaticWorkflowGeneration: Using recipe-based assembly for ${l.name}`),console.log(`AutomaticWorkflowGeneration: Requires ${l.assemblyComponents.length} component types`);for(const o of l.assemblyComponents)r.push({itemId:o.componentId,count:o.quantity*i.quantity,tags:[],requiredTags:o.requiredTags||[],maxQuality:void 0}),console.log(`AutomaticWorkflowGeneration: Final assembly requires ${o.quantity*i.quantity}x ${o.componentId}`)}else console.warn(`AutomaticWorkflowGeneration: No assemblyComponents found for ${l.name}, assembly may fail`),r.push({itemId:"machined_parts",count:3*i.quantity,tags:[]});return{id:`reassemble_${Date.now()}`,name:"Final Assembly",description:`Reassemble all components into complete ${l.name}`,operationType:xe.ASSEMBLY,requiredTag:{category:j.BASIC_MANIPULATION,minimum:3},baseDurationMinutes:35*i.quantity,materialConsumption:r,materialProduction:[{itemId:l.id,count:i.quantity,tags:[E.RESTORED],quality:75}],can_fail:!0,failure_chance:.1,labor_skill:"skilled_technician",generatedReason:"Final assembly after repair",isConditional:!1}}static createSortingOperation(i,l){return{id:`sort_${Date.now()}`,name:"Component Sorting",description:"Sort and catalog recovered components by condition",operationType:xe.SHAPING,requiredTag:{category:j.BASIC_MANIPULATION,minimum:1},baseDurationMinutes:5*i.quantity,can_fail:!1,failure_chance:0,labor_skill:"unskilled",generatedReason:"Component organization after disassembly",isConditional:!1}}static createCleaningOperation(i,l){return{id:`clean_${Date.now()}`,name:"Component Cleaning",description:"Clean and prepare components for storage or reuse",operationType:xe.SHAPING,requiredTag:{category:j.BASIC_MANIPULATION,minimum:1},baseDurationMinutes:15*i.quantity,materialConsumption:[{itemId:"cleaning_supplies",count:Math.ceil(i.quantity/5),tags:[]}],can_fail:!1,failure_chance:0,labor_skill:"unskilled",generatedReason:"Component cleaning after disassembly",isConditional:!1}}static createSpecificTreatmentOperation(i,l,r){return{id:`treat_${r}_${Date.now()}`,name:`Treat ${r} Condition`,description:`Remove ${r} condition from item`,operationType:xe.SHAPING,requiredTag:{category:j.BASIC_MANIPULATION,minimum:1},baseDurationMinutes:30,can_fail:!0,failure_chance:.1,labor_skill:"unskilled",generatedReason:`Treatment for ${r} condition`,isConditional:!0}}static createQualityAssessmentOperation(i,l){return{id:`assess_${Date.now()}`,name:"Quality Assessment",description:"Final quality evaluation after treatment",operationType:xe.SHAPING,requiredTag:{category:j.MEASURING,minimum:1},baseDurationMinutes:10,can_fail:!1,failure_chance:0,labor_skill:"unskilled",generatedReason:"Quality assessment after treatment",isConditional:!1}}static needsEnvironmentalTreatment(i){return i.tags.some(l=>["drenched","corroded","heat_damaged"].includes(l))}static needsCleaning(i){return i.quality<50||this.needsEnvironmentalTreatment(i)}static generateDiscoveredComponents(i,l,r=.8){const o=[];if(l.assemblyComponents&&l.assemblyComponents.length>0){console.log(`AutomaticWorkflowGeneration: Discovering components through assessment of ${l.name}`),console.log(`AutomaticWorkflowGeneration: Found ${l.assemblyComponents.length} components in recipe`);for(const u of l.assemblyComponents){const p=(i.quality>1?i.quality:i.quality*100)*r,h=(Math.random()-.5)*20;let v=Math.round(Math.max(5,Math.min(95,p+h)));const A=[];v<30&&A.push(E.DAMAGED),i.tags.includes(E.DAMAGED)&&v<50&&A.push(E.DAMAGED),o.push({itemId:u.componentId,count:u.quantity*i.quantity,tags:A,quality:v}),console.log(`AutomaticWorkflowGeneration: Discovered ${u.quantity}x ${u.componentId} at ${v}% quality`)}}else console.warn(`AutomaticWorkflowGeneration: No assembly components defined for ${l.name}`);return o}static generateDisassemblyOutputs(i,l,r){const o=[];if(l.assemblyComponents&&l.assemblyComponents.length>0){console.log(`AutomaticWorkflowGeneration: Using recipe-based disassembly for ${l.name}`),console.log(`AutomaticWorkflowGeneration: Found ${l.assemblyComponents.length} components in recipe`);for(const u of l.assemblyComponents){let m=Math.round(i.quality*r);u.componentId.includes("tube")?m=Math.round(m*1.1):u.componentId.includes("casing")&&(m=Math.round(m*.9)),m=Math.max(1,Math.min(100,m));const p=[];if(i.tags.includes(E.DAMAGED)){const y=u.componentId.includes("casing")?.9:.7;Math.random()<y&&p.push(E.DAMAGED)}o.push({itemId:u.componentId,count:u.quantity*i.quantity,tags:p,quality:m}),console.log(`AutomaticWorkflowGeneration: Will produce ${u.quantity*i.quantity}x ${u.componentId} at ${m}% quality`)}}else console.warn(`AutomaticWorkflowGeneration: No assemblyComponents found for ${l.name}, using generic breakdown`),o.push({itemId:"steel-scrap",count:i.quantity*1,quality:Math.round(i.quality*r*.6)}),o.push({itemId:"plastic-scrap",count:i.quantity*1,quality:Math.round(i.quality*r*.4)});return o}static predictComponentRecovery(i,l,r){const o=r?.9:.7;return this.generateDisassemblyOutputs(i,l,o).map(m=>({itemId:m.itemId,quantity:m.count,tags:m.tags||[],quality:m.quality||Math.round(i.quality*o)}))}static getTreatmentMaterials(i){const l=[];return l.push({material_id:"cleaning_supplies",quantity:Math.ceil(i.length/2),consumed_at_start:!0}),l}static createMaterialPreparationOperation(i,l,r){return{id:`prep_material_${l}_${Date.now()}`,name:`Prepare ${i.componentId}`,description:`Prepare and verify ${i.componentId} components for assembly`,operationType:xe.SHAPING,requiredTag:{category:j.BASIC_MANIPULATION,minimum:1},baseDurationMinutes:5*i.quantity*r,can_fail:!1,failure_chance:0,labor_skill:"unskilled",generatedReason:`Material preparation for ${i.componentId}`,isConditional:!1}}static createComponentInspectionOperation(i,l){return{id:`inspect_components_${Date.now()}`,name:"Component Inspection",description:"Inspect all components for quality and compatibility",operationType:xe.SHAPING,requiredTag:{category:j.MEASURING,minimum:1},baseDurationMinutes:10*l,can_fail:!0,failure_chance:.05,labor_skill:"skilled_technician",generatedReason:"Quality control for assembly components",isConditional:!1}}static createAssemblyOperation(i,l){var o;const r=((o=i.assemblyComponents)==null?void 0:o.length)||1;return{id:`assemble_${Date.now()}`,name:"Primary Assembly",description:`Assemble ${i.name} from prepared components`,operationType:xe.ASSEMBLY,requiredTag:{category:j.BASIC_MANIPULATION,minimum:3},baseDurationMinutes:30*l*r,materialProduction:[{itemId:i.id,count:l,tags:[],quality:75}],can_fail:!0,failure_chance:.1,labor_skill:"skilled_technician",generatedReason:`Assembly of ${i.name}`,isConditional:!1}}static createFinishingOperation(i,l){return{id:`finish_${Date.now()}`,name:"Finishing & QC",description:"Final finishing touches and quality control",operationType:xe.SHAPING,requiredTag:{category:j.PRECISION_MANIPULATION,minimum:1},baseDurationMinutes:15*l,can_fail:!0,failure_chance:.05,labor_skill:"skilled_technician",generatedReason:"Final finishing and quality control",isConditional:!1}}static createRawMaterialPrepOperation(i,l){return{id:`prep_raw_${Date.now()}`,name:"Raw Material Preparation",description:`Prepare raw materials for ${i.name} production`,operationType:xe.SHAPING,requiredTag:{category:j.BASIC_MANIPULATION,minimum:1},baseDurationMinutes:10*l,can_fail:!1,failure_chance:0,labor_skill:"unskilled",generatedReason:"Raw material preparation",isConditional:!1}}static createShapingOperation(i,l){let r="Shaping",o=j.BASIC_MANIPULATION,u=20;return i.id.includes("tube")||i.id.includes("cylinder")?(r="Turning",o=j.TURNING,u=25):i.id.includes("billet")||i.id.includes("component")?(r="Milling",o=j.MILLING,u=30):i.id.includes("casing")&&(r="Forming",o=j.FORMING,u=15),{id:`shape_${Date.now()}`,name:r,description:`${r} operation to create ${i.name}`,operationType:xe.SHAPING,requiredTag:{category:o,minimum:1},baseDurationMinutes:u*l,materialProduction:[{itemId:i.id,count:l,tags:[],quality:70}],can_fail:!0,failure_chance:.1,labor_skill:"skilled_machinist",generatedReason:`${r} to create ${i.name}`,isConditional:!1}}static createQualityControlOperation(i,l){return{id:`qc_${Date.now()}`,name:"Quality Control",description:"Final dimensional and quality inspection",operationType:xe.SHAPING,requiredTag:{category:j.MEASURING,minimum:1},baseDurationMinutes:8*l,can_fail:!0,failure_chance:.05,labor_skill:"skilled_technician",generatedReason:"Quality control inspection",isConditional:!1}}}class Nf{static generateTreatmentPlan(i,l,r){const o=this.detectEnvironmentalConditions(i);if(o.length===0)return null;console.log(`ConditionTreatmentPlanner: Detected conditions for ${l.name}: ${o.join(", ")}`);const u=[],m=[];let p=!0;o.forEach(H=>{const B=this.treatmentDatabase.get(H);if(B&&(u.push(B),!B.requiredEquipment.every(F=>r.has(F)&&(r.get(F)||0)>0))){let F=!1;B.alternativeEquipment&&(F=B.alternativeEquipment.some(oe=>oe.every(se=>r.has(se)&&(r.get(se)||0)>0))),F||(p=!1,B.requiredEquipment.forEach(oe=>{(!r.has(oe)||(r.get(oe)||0)===0)&&m.push(oe)}))}});const y=this.optimizeTreatmentSequence(u),h=u.reduce((H,B)=>H+B.estimatedTime,0),v=this.calculateMaterialCosts(u),A=Math.min(u.reduce((H,B)=>H+B.qualityImprovement,0),100-i.quality),T=u.reduce((H,B)=>H*B.successProbability,1),N=u.flatMap(H=>H.riskFactors),I={low:N.filter(H=>H.severity==="low"),medium:N.filter(H=>H.severity==="medium"),high:N.filter(H=>H.severity==="high")};return{itemId:i.id,detectedConditions:o,requiredTreatments:u,treatmentSequence:y,totalEstimatedTime:h,totalMaterialCost:v,expectedQualityGain:A,overallSuccessProbability:T,equipment_feasible:p,missingEquipment:[...new Set(m)],riskAssessment:I}}static getTreatmentOperation(i){return this.treatmentDatabase.get(i)}static canTreatCondition(i,l){const r=this.treatmentDatabase.get(i);return r?r.requiredEquipment.every(u=>l.has(u)&&(l.get(u)||0)>0)?!0:r.alternativeEquipment?r.alternativeEquipment.some(u=>u.every(m=>l.has(m)&&(l.get(m)||0)>0)):!1:!1}static detectEnvironmentalConditions(i){const l=[];return i.tags.includes(E.DRENCHED)&&l.push("drenched"),i.tags.includes(E.CORRODED)&&l.push("corroded"),i.tags.includes(E.HEAT_DAMAGED)&&l.push("heat_damaged"),i.tags.includes(E.CONTAMINATED)&&l.push("contaminated"),i.tags.includes(E.FROZEN)&&l.push("frozen"),i.tags.includes(E.RADIATION_EXPOSED)&&l.push("radiation_exposed"),i.tags.includes(E.IMPACT_DAMAGED)&&l.push("impact_damaged"),i.tags.includes(E.WORN)&&l.push("worn"),i.quality<60&&!i.tags.includes(E.DAMAGED)&&!l.includes("worn")&&l.push("worn"),l}static optimizeTreatmentSequence(i){const l=[...i];return l.sort((r,o)=>{if(r.prerequisites&&r.prerequisites.includes(o.id))return 1;if(o.prerequisites&&o.prerequisites.includes(r.id))return-1;const u=["drying","corrosion_removal","heat_repair","decontamination","thawing","refurbishment"],m=u.findIndex(y=>r.id.includes(y)),p=u.findIndex(y=>o.id.includes(y));return m-p}),l.map(r=>r.id)}static calculateMaterialCosts(i){return i.reduce((l,r)=>l+r.materialRequirements.reduce((o,u)=>o+u.quantity*10,0),0)}static getAllTreatmentOperations(){return Array.from(this.treatmentDatabase.values())}static getTreatmentRecommendations(i,l,r){return this.detectEnvironmentalConditions(i).map(u=>{const m=this.treatmentDatabase.get(u),p=this.canTreatCondition(u,r);let y="medium",h="";return u==="corroded"?(y="high",h="Corrosion will worsen over time and affect other components"):u==="drenched"?(y="high",h="Water damage can lead to corrosion and electrical problems"):u==="heat_damaged"?(y="medium",h="Heat damage affects structural integrity and performance"):u==="worn"?(y="low",h="General wear affects performance but not critical function"):h="Environmental damage should be addressed to prevent degradation",{condition:u,treatment:m,feasible:p,priority:y,reasoning:h}}).sort((u,m)=>{const p={high:3,medium:2,low:1};return p[m.priority]-p[u.priority]})}}De(Nf,"treatmentDatabase",new Map([["drenched",{id:"treatment_drying",name:"Drying Process",description:"Remove moisture and prevent further water damage",targetCondition:"drenched",requiredEquipment:[j.BASIC_MANIPULATION],alternativeEquipment:[[j.SURFACE]],estimatedTime:45,materialRequirements:[{materialId:"absorbent_materials",quantity:1,description:"Drying cloths and absorbents"}],successProbability:.95,qualityImprovement:10,riskFactors:[{description:"Rapid drying may cause material stress",probability:.1,impact:"quality_reduction",severity:"low",mitigation:"Use gradual temperature increase"}],laborSkill:"unskilled"}],["corroded",{id:"treatment_corrosion_removal",name:"Corrosion Removal",description:"Chemical treatment to remove rust and corrosion",targetCondition:"corroded",requiredEquipment:[j.BASIC_MANIPULATION],estimatedTime:60,materialRequirements:[{materialId:"rust_remover",quantity:2,description:"Chemical rust removal compounds"},{materialId:"protective_coating",quantity:1,description:"Anti-corrosion coating"}],successProbability:.85,qualityImprovement:15,riskFactors:[{description:"Chemical damage to other components",probability:.15,impact:"component_loss",severity:"medium",mitigation:"Careful component isolation"},{description:"Deep corrosion may be irreversible",probability:.2,impact:"quality_reduction",severity:"medium",mitigation:"Pre-assessment of corrosion depth"}],laborSkill:"skilled_technician",prerequisites:["treatment_drying"]}],["heat_damaged",{id:"treatment_heat_repair",name:"Heat Damage Repair",description:"Re-tempering and structural repair for heat-damaged components",targetCondition:"heat_damaged",requiredEquipment:[j.SURFACE,j.BASIC_MANIPULATION],alternativeEquipment:[[j.TURNING,j.BASIC_MANIPULATION]],estimatedTime:90,materialRequirements:[{materialId:"tempering_compounds",quantity:1,description:"Heat treatment materials"}],successProbability:.7,qualityImprovement:20,riskFactors:[{description:"Further heat damage during treatment",probability:.25,impact:"quality_reduction",severity:"high",mitigation:"Precise temperature control"},{description:"Warping or dimensional changes",probability:.15,impact:"component_loss",severity:"medium",mitigation:"Controlled cooling rates"}],laborSkill:"skilled_machinist"}],["contaminated",{id:"treatment_decontamination",name:"Chemical Decontamination",description:"Remove chemical contamination and residues",targetCondition:"contaminated",requiredEquipment:[j.BASIC_MANIPULATION],estimatedTime:75,materialRequirements:[{materialId:"decontamination_solution",quantity:3,description:"Specialized cleaning solutions"},{materialId:"neutralizing_agent",quantity:1,description:"Chemical neutralization compounds"}],successProbability:.8,qualityImprovement:12,riskFactors:[{description:"Unknown contaminant reactions",probability:.1,impact:"material_waste",severity:"medium",mitigation:"Test small area first"}],laborSkill:"specialist"}],["frozen",{id:"treatment_thawing",name:"Controlled Thawing",description:"Gradual temperature restoration to prevent thermal shock",targetCondition:"frozen",requiredEquipment:[j.SURFACE],estimatedTime:30,materialRequirements:[{materialId:"thermal_protection",quantity:1,description:"Thermal shock prevention materials"}],successProbability:.9,qualityImprovement:8,riskFactors:[{description:"Thermal shock from rapid temperature change",probability:.15,impact:"quality_reduction",severity:"medium",mitigation:"Gradual temperature increase"}],laborSkill:"skilled_technician"}],["worn",{id:"treatment_refurbishment",name:"General Refurbishment",description:"Address general wear and restore performance",targetCondition:"worn",requiredEquipment:[j.PRECISION_MANIPULATION,j.MEASURING],estimatedTime:40,materialRequirements:[{materialId:"lubricants",quantity:1,description:"Precision lubricants and cleaners"},{materialId:"replacement_parts",quantity:1,description:"Small replacement components"}],successProbability:.85,qualityImprovement:15,riskFactors:[{description:"Over-adjustment affecting performance",probability:.1,impact:"quality_reduction",severity:"low",mitigation:"Careful calibration and testing"}],laborSkill:"skilled_technician"}],["radiation_exposed",{id:"treatment_radiation_decontamination",name:"Radiation Decontamination",description:"Remove radioactive contamination and assess radiation damage",targetCondition:"radiation_exposed",requiredEquipment:[j.BASIC_MANIPULATION,j.MEASURING],estimatedTime:120,materialRequirements:[{materialId:"decontamination_solution",quantity:4,description:"Radiation-specific decontamination compounds"},{materialId:"protective_coating",quantity:2,description:"Radiation-resistant protective coating"}],successProbability:.75,qualityImprovement:18,riskFactors:[{description:"Residual radiation may cause ongoing degradation",probability:.2,impact:"quality_reduction",severity:"high",mitigation:"Multiple decontamination cycles"},{description:"Radiation exposure risk to technician",probability:.05,impact:"time_increase",severity:"medium",mitigation:"Proper safety protocols and protective equipment"}],laborSkill:"specialist"}],["impact_damaged",{id:"treatment_structural_repair",name:"Structural Impact Repair",description:"Assess and repair structural damage from physical trauma",targetCondition:"impact_damaged",requiredEquipment:[j.PRECISION_MANIPULATION,j.MEASURING,j.BASIC_MANIPULATION],estimatedTime:80,materialRequirements:[{materialId:"replacement_parts",quantity:3,description:"Structural replacement components"},{materialId:"protective_coating",quantity:1,description:"Stress-resistant protective coating"}],successProbability:.8,qualityImprovement:25,riskFactors:[{description:"Hidden stress fractures may remain",probability:.15,impact:"component_loss",severity:"medium",mitigation:"Thorough structural analysis"},{description:"Repair may not restore original strength",probability:.1,impact:"quality_reduction",severity:"low",mitigation:"Conservative quality assessment"}],laborSkill:"skilled_technician"}]]));function sh({facility:f,onJobStart:i}){const[l,r]=pe.useState("inventory_actions"),[o,u]=pe.useState(null),[m,p]=pe.useState(""),[y,h]=pe.useState(null),[v,A]=pe.useState(null),[T,N]=pe.useState([]),[I,H]=pe.useState(!1),B=f.inventory,P=B?Z.getAllItems(B):[];pe.useEffect(()=>{o?F(o):(h(null),A(null))},[o]);const F=pe.useCallback(async se=>{H(!0);try{let J=null,Ae=null;if(se.type==="new_product"&&se.productId){const Oe=W(se.productId);Oe&&(J=wn.generateManufacturingWorkflow(Oe,1))}else if(se.type==="inventory_item"&&se.inventoryItem){const Oe=se.inventoryItem,Ge=W(Oe.baseItemId);if(Ge){const k=f.equipment_capacity||new Map;Ae=Nf.generateTreatmentPlan(Oe,Ge,k),Oe.tags.some(be=>["damaged","junk"].includes(be))?J=wn.generateRepairWorkflow(Oe):J=wn.generateDisassemblyWorkflow(Oe)}}else if(se.type==="discovered_action"&&se.action&&se.inventoryItem){const Oe=se.action,Ge=se.inventoryItem;switch(Oe.type){case ss.REPAIR:J=wn.generateRepairWorkflow(Ge);break;case ss.DISASSEMBLE:J=wn.generateDisassemblyWorkflow(Ge,!0);break;case ss.CLEAN:if(W(Ge.baseItemId)){const be=["drenched","corroded"];J=wn.generateTreatmentWorkflow(Ge,be)}break}}h(J),A(Ae)}catch(J){console.error("Failed to generate workflow:",J),h(null),A(null)}finally{H(!1)}},[f]),oe=()=>{if(!y)return;let se;T.length>0&&(se={jobId:`temp-${Date.now()}`,selectedEnhancements:T,totalTimeModifier:T.reduce((J,Ae)=>J*Ae.timeModifier,1),totalComplexityModifier:T.reduce((J,Ae)=>J*Ae.complexityModifier,1),totalQualityModifier:T.reduce((J,Ae)=>J+Ae.qualityModifier,0),additionalCosts:T.flatMap(J=>J.costs),additionalTags:[...new Set(T.flatMap(J=>J.outputTags))]}),i(y,se),u(null),N([])};return d.jsxs("div",{className:"h-full flex bg-gray-900 text-gray-100",children:[d.jsxs("div",{className:"w-1/2 border-r border-gray-700 flex flex-col",children:[d.jsxs("div",{className:"border-b border-gray-700 flex",children:[d.jsx("button",{onClick:()=>r("inventory_actions"),className:`px-4 py-2 text-sm font-mono border-r border-gray-700 ${l==="inventory_actions"?"bg-teal-800 text-teal-100":"bg-gray-800 text-gray-400 hover:text-gray-200"}`,children:"📦 INVENTORY"}),d.jsx("button",{onClick:()=>r("product_tree"),className:`px-4 py-2 text-sm font-mono border-r border-gray-700 ${l==="product_tree"?"bg-teal-800 text-teal-100":"bg-gray-800 text-gray-400 hover:text-gray-200"}`,children:"📋 CATALOG"}),d.jsx("button",{onClick:()=>r("search"),className:`px-4 py-2 text-sm font-mono ${l==="search"?"bg-teal-800 text-teal-100":"bg-gray-800 text-gray-400 hover:text-gray-200"}`,children:"🔍 SEARCH"})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[l==="inventory_actions"&&d.jsx(rh,{inventoryItems:P,facility:f,onItemSelect:u,selectedItem:o}),l==="product_tree"&&d.jsx(oh,{onProductSelect:se=>u({type:"new_product",productId:se}),selectedProductId:(o==null?void 0:o.type)==="new_product"?o.productId:void 0}),l==="search"&&d.jsx(ch,{searchQuery:m,onSearchChange:p,onItemSelect:u})]})]}),d.jsxs("div",{className:"w-1/2 flex flex-col",children:[d.jsx("div",{className:"border-b border-gray-700 px-4 py-2",children:d.jsx("h3",{className:"text-sm font-mono text-gray-400",children:"WORKFLOW PREVIEW"})}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:I?d.jsx("div",{className:"flex items-center justify-center h-32",children:d.jsx("div",{className:"text-teal-400 font-mono",children:"⚙ Analyzing workflow..."})}):y?d.jsx(uh,{workflow:y,treatmentPlan:v,selectedEnhancements:T,onEnhancementChange:N,onJobStart:oe}):o?d.jsxs("div",{className:"text-center text-gray-500 mt-8",children:[d.jsx("div",{className:"text-4xl mb-4",children:"🔧"}),d.jsx("div",{children:"Select an action to generate workflow"})]}):d.jsxs("div",{className:"text-center text-gray-500 mt-8",children:[d.jsx("div",{className:"text-4xl mb-4",children:"👈"}),d.jsx("div",{children:"Select an item or product to begin"})]})})]})]})}function rh({inventoryItems:f,facility:i,onItemSelect:l,selectedItem:r}){const[o,u]=pe.useState(null);i.equipment_capacity;const m=f.filter(h=>{const v=W(h.baseItemId);return v&&v.manufacturingType!==z.RAW_MATERIAL}).reduce((h,v)=>{const A=W(v.baseItemId);if(!A)return h;const T=[...v.tags].sort(),N=T.length>0?T.join("_"):"pristine",I=`${A.id}_${N}`;return h[I]||(h[I]={baseItem:A,condition:v.tags.includes(E.DAMAGED)?"damaged":"functional",items:[],totalQuantity:0,averageQuality:0,tags:T}),h[I].items.push(v),h[I].totalQuantity+=v.quantity,h[I].averageQuality=h[I].items.reduce((H,B)=>H+B.quality*B.quantity,0)/h[I].totalQuantity,h},{}),p=h=>{u(o===h?null:h)},y=(h,v)=>v==="damaged"?[{action:"repair",icon:"🔧",description:"Restore to working condition"},{action:"disassemble",icon:"🔬",description:"Salvage usable components"}]:[{action:"disassemble",icon:"🔬",description:"Break down into components"},{action:"refurbish",icon:"✨",description:"Improve quality and condition"}];return d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:["Inventory items (",Object.keys(m).length," groups):"]}),Object.entries(m).map(([h,v])=>{const A=o===h,T=v.items[0],N=y(v.items,v.condition);return d.jsxs("div",{className:"border border-gray-700 bg-gray-800 rounded",children:[d.jsxs("button",{onClick:()=>p(h),className:"w-full p-3 text-left flex items-center justify-between hover:bg-gray-750 transition-colors",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("span",{className:"text-gray-400 text-sm",children:A?"▼":"▶"}),d.jsxs("div",{children:[d.jsxs("div",{className:"font-medium text-teal-400 text-sm",children:[v.baseItem.name,v.tags.length>0?d.jsxs("span",{className:"ml-2 text-xs text-blue-300",children:["[",v.tags.join(", "),"]"]}):d.jsx("span",{className:"ml-2 text-xs px-2 py-1 rounded bg-green-900 text-green-300",children:"pristine"})]}),d.jsxs("div",{className:"text-xs text-gray-400",children:[v.totalQuantity," units • ",Math.round(v.averageQuality),"% quality"]})]})]}),d.jsxs("div",{className:"text-xs text-gray-500",children:[N.length," actions"]})]}),A&&d.jsx("div",{className:"border-t border-gray-700 p-3 space-y-2",children:N.map((I,H)=>{var oe,se,J;const P=lh.analyzeItem(T,i,kn).find(Ae=>Ae.name.toLowerCase().includes(I.action)),F=(P==null?void 0:P.feasible)??!1;return d.jsxs("button",{onClick:()=>P&&l({type:"discovered_action",action:P,inventoryItem:T}),disabled:!F,className:`w-full text-left p-2 rounded text-sm transition-colors ${F?(r==null?void 0:r.type)==="discovered_action"&&((oe=r==null?void 0:r.action)!=null&&oe.name.toLowerCase().includes(I.action))&&((se=r==null?void 0:r.inventoryItem)==null?void 0:se.baseItemId)===T.baseItemId&&((J=r==null?void 0:r.inventoryItem)==null?void 0:J.tags.includes(E.DAMAGED))===(v.condition==="damaged")?"bg-teal-700 text-teal-100 border border-teal-500":"hover:bg-gray-700 text-gray-300 border border-gray-600":"text-gray-600 cursor-not-allowed border border-gray-800"}`,children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{children:I.icon}),d.jsx("span",{className:"font-medium capitalize",children:I.action})]}),d.jsx("span",{className:F?"text-green-400":"text-red-400",children:F?"✓":"✗"})]}),d.jsx("div",{className:"text-xs text-gray-400 mt-1 ml-6",children:I.description}),P&&F&&d.jsxs("div",{className:"text-xs text-gray-500 mt-1 ml-6",children:["~",P.estimatedTime,"min • ",P.estimatedCost,"cr"]})]},H)})})]},h)}),Object.keys(m).length===0&&d.jsxs("div",{className:"text-center text-gray-500 py-8",children:[d.jsx("div",{className:"text-2xl mb-2",children:"📦"}),d.jsx("div",{children:"No items in inventory"})]})]})}function oh({onProductSelect:f,selectedProductId:i}){const[l,r]=pe.useState(new Set),[o,u]=pe.useState(null),m=v=>v.manufacturingType===z.ASSEMBLY?"Assembly Operations":v.manufacturingType===z.SHAPED_MATERIAL?v.id.includes("tube")||v.id.includes("cylinder")?"Turning Operations":v.id.includes("billet")||v.id.includes("component")?"Milling Operations":v.id.includes("casing")||v.id.includes("plastic")?"Forming Operations":"Precision Machining":"Other Operations",p=Object.values($i).filter(v=>v.manufacturingType!==z.RAW_MATERIAL).reduce((v,A)=>{const T=A.category,N=m(A);return v[T]||(v[T]={}),v[T][N]||(v[T][N]=[]),v[T][N].push(A),v},{}),y=v=>{const A=new Set(l);A.has(v)?A.delete(v):A.add(v),r(A)},h=v=>{u(o===v?null:v)};return d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"text-xs text-gray-400 mb-4",children:"Manufacturing catalog (by operation type):"}),Object.entries(p).map(([v,A])=>{const T=l.has(v),N=Object.values(A).flat().length;return d.jsxs("div",{className:"border border-gray-700 bg-gray-800 rounded",children:[d.jsx("button",{onClick:()=>y(v),className:"w-full p-3 text-left flex items-center justify-between hover:bg-gray-750 transition-colors",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("span",{className:"text-gray-400 text-sm",children:T?"▼":"▶"}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium text-blue-400 text-sm capitalize",children:v.replace("_"," ").toLowerCase()}),d.jsxs("div",{className:"text-xs text-gray-400",children:[N," items • ",Object.keys(A).length," methods"]})]})]})}),T&&d.jsx("div",{className:"border-t border-gray-700 p-2 space-y-1",children:Object.entries(A).map(([I,H])=>{const B=`${v}_${I}`,P=o===B;return d.jsxs("div",{className:"border border-gray-600 bg-gray-900 rounded",children:[d.jsx("button",{onClick:()=>h(B),className:"w-full p-2 text-left flex items-center justify-between hover:bg-gray-800 transition-colors",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{className:"text-gray-500 text-xs",children:P?"▼":"▶"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-yellow-400 font-medium",children:I}),d.jsxs("div",{className:"text-xs text-gray-500",children:[H.length," items"]})]})]})}),P&&d.jsx("div",{className:"border-t border-gray-600 p-2 space-y-1",children:H.map(F=>d.jsxs("button",{onClick:()=>f(F.id),className:`w-full text-left p-2 rounded text-sm transition-colors ml-2 ${i===F.id?"bg-teal-700 text-teal-100 border border-teal-500":"hover:bg-gray-700 text-gray-300 border border-gray-600"}`,children:[d.jsx("div",{className:"font-medium",children:F.name}),d.jsx("div",{className:"text-xs text-gray-400 mt-1",children:F.description}),d.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[F.baseValue,"cr • ",F.manufacturingType.replace("_"," ").toLowerCase()]})]},F.id))})]},I)})})]},v)})]})}function ch({searchQuery:f,onSearchChange:i,onItemSelect:l}){return d.jsxs("div",{className:"space-y-4",children:[d.jsx("input",{type:"text",placeholder:"Search products and actions...",value:f,onChange:r=>i(r.target.value),className:"w-full bg-gray-800 border border-gray-600 text-gray-300 text-sm p-2 focus:border-teal-400 focus:outline-none"}),d.jsxs("div",{className:"text-center text-gray-500 py-8",children:[d.jsx("div",{className:"text-2xl mb-2",children:"🔍"}),d.jsx("div",{children:"Search functionality coming soon"})]})]})}function uh({workflow:f,treatmentPlan:i,selectedEnhancements:l,onEnhancementChange:r,onJobStart:o}){return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"border border-gray-700 bg-gray-800 p-4",children:[d.jsx("h4",{className:"text-teal-400 font-bold mb-2",children:f.name}),d.jsx("p",{className:"text-sm text-gray-300 mb-3",children:f.description}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400",children:"Duration:"}),d.jsxs("div",{className:"text-white",children:[Math.round(f.estimatedDuration*60)," minutes"]})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400",children:"Confidence:"}),d.jsxs("div",{className:"text-white",children:[Math.round(f.confidence*100),"%"]})]})]})]}),i&&d.jsxs("div",{className:"border border-yellow-600 bg-yellow-900/20 p-4",children:[d.jsx("h5",{className:"text-yellow-400 font-bold mb-2",children:"⚠ Treatment Required"}),d.jsxs("div",{className:"text-sm text-yellow-200 mb-2",children:["Detected conditions: ",i.detectedConditions.join(", ")]}),d.jsxs("div",{className:"text-xs text-yellow-300",children:[i.totalEstimatedTime,"min treatment • +",i.expectedQualityGain,"% quality"]})]}),d.jsxs("div",{className:"border border-gray-700 bg-gray-800 p-4",children:[d.jsx("h5",{className:"text-gray-400 font-bold mb-3",children:"Operations:"}),d.jsx("div",{className:"space-y-2",children:f.requiredOperations.map((u,m)=>d.jsxs("div",{className:"flex items-start space-x-3 text-xs",children:[d.jsxs("div",{className:"text-teal-400 font-mono w-6",children:[m+1,"."]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"text-white font-medium",children:u.name}),d.jsx("div",{className:"text-gray-400",children:u.description}),d.jsxs("div",{className:"text-gray-500 mt-1",children:[u.baseDurationMinutes,"min • ",u.labor_skill]})]})]},u.id))})]}),d.jsxs("div",{className:"border border-gray-700 bg-gray-800 p-4",children:[d.jsx("h5",{className:"text-gray-400 font-bold mb-3",children:"Expected Results:"}),d.jsx("div",{className:"space-y-2",children:f.expectedOutputs.map((u,m)=>d.jsxs("div",{className:"text-xs flex justify-between",children:[d.jsxs("span",{className:"text-gray-300",children:[u.quantity,"x ",u.itemId.replace(/_/g," "),u.tags.length>0&&d.jsxs("span",{className:"text-blue-300",children:[" [",u.tags.join(", "),"]"]})]}),d.jsxs("span",{className:"text-teal-400",children:[u.quality,"% quality"]})]},m))})]}),f.riskFactors.length>0&&d.jsxs("div",{className:"border border-red-600 bg-red-900/20 p-4",children:[d.jsx("h5",{className:"text-red-400 font-bold mb-2",children:"⚠ Risk Factors:"}),d.jsx("ul",{className:"text-xs text-red-200 space-y-1",children:f.riskFactors.map((u,m)=>d.jsxs("li",{children:["• ",u]},m))})]}),d.jsx("button",{onClick:o,className:"w-full bg-teal-600 hover:bg-teal-500 text-white py-3 px-4 font-mono text-sm transition-colors",children:"START WORKFLOW"})]})}function dh(f){return f.split("_").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ")}function mh(f){switch(f){case"military":return"text-red-400";case"corporate":return"text-blue-400";case"government":return"text-purple-400";case"rebel":return"text-orange-400";case"civilian":return"text-green-400";default:return"text-gray-400"}}function fh(f){switch(f){case"low":return"Any Quality";case"standard":return"Standard+";case"high":return"High Quality";case"military":return"Military Spec";default:return"Unknown"}}function hf({contract:f,customer:i,onAccept:l,onFulfill:r,currentTime:o,canAccept:u}){var oe,se;const[m,p]=pe.useState(!1),[y,h]=pe.useState(!1),v=()=>{p(!0),l(f.id),setTimeout(()=>p(!1),500)},A=()=>{r&&(h(!0),r(f.id),setTimeout(()=>h(!1),500))},T=f.status==="available",N=f.status==="accepted"||f.status==="in_progress",I=f.status==="completed",H=f.status==="failed";let B=0,P=!1;if(N&&f.acceptedAt){const J=f.acceptedAt+f.deadlineHours;B=Math.max(0,J-o),P=B===0}let F="border-gray-600";return T&&(F="border-yellow-600"),N&&!P&&(F="border-green-600"),N&&P&&(F="border-red-600"),I&&(F="border-blue-600"),H&&(F="border-red-600"),d.jsxs("div",{className:`terminal-card ${F}`,children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-white font-medium",children:f.title}),d.jsx("p",{className:"text-gray-400 text-sm",children:(i==null?void 0:i.name)||"Unknown Customer"}),d.jsxs("p",{className:"text-gray-500 text-xs",children:[d.jsx("span",{className:mh((i==null?void 0:i.type)||""),children:((oe=i==null?void 0:i.type)==null?void 0:oe.toUpperCase())||"UNKNOWN"})," • ",fh((i==null?void 0:i.qualityStandards)||"")]})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("div",{className:"text-teal-400 font-mono font-bold",children:[f.totalPayment.toLocaleString(),"cr"]}),f.rushOrder&&d.jsx("div",{className:"text-red-400 text-xs font-bold",children:"RUSH ORDER"}),i&&d.jsxs("div",{className:"text-gray-500 text-xs",children:["Rep: ",i.reputation,"% • Pay: ",i.paymentReliability,"%"]})]})]}),d.jsxs("div",{className:"mb-3",children:[d.jsx("div",{className:"text-gray-500 text-xs mb-1",children:"Requirements:"}),f.requirements.map((J,Ae)=>d.jsxs("div",{className:"text-sm",children:[d.jsxs("span",{className:"text-white font-mono",children:[J.quantity,"x"]}),d.jsx("span",{className:"text-gray-300 ml-2",children:dh(J.productId)}),d.jsxs("span",{className:"text-gray-500 ml-2",children:["(min ",J.minimumQuality,"% quality)"]})]},Ae))]}),d.jsx("div",{className:"text-xs text-gray-500 mb-3 italic",children:f.description}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm mb-3",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400",children:"Deadline:"}),d.jsx("div",{className:"font-mono text-white",children:N?`${Math.ceil(B)}h remaining`:`${f.deadlineHours}h to complete`}),f.allowPartialFulfillment&&d.jsxs("div",{className:"text-gray-500 text-xs",children:["Min ",f.minimumFulfillmentPercent,"% fulfillment"]})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400",children:"Payment:"}),d.jsxs("div",{className:"font-mono text-white",children:[(f.totalPayment/((se=f.requirements[0])==null?void 0:se.quantity)||0).toFixed(0),"cr/unit"]}),f.bonusRate>0&&d.jsxs("div",{className:"text-green-400 text-xs",children:["+",(f.bonusRate*100).toFixed(0),"% early bonus"]})]})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{className:"text-xs",children:[T&&d.jsx("span",{className:"text-yellow-400",children:"Available to accept"}),N&&!P&&d.jsx("span",{className:"text-green-400",children:"In progress"}),N&&P&&d.jsx("span",{className:"text-red-400",children:"OVERDUE"}),I&&d.jsx("span",{className:"text-blue-400",children:"Completed"}),H&&d.jsx("span",{className:"text-red-400",children:"Failed"})]}),d.jsxs("div",{className:"flex space-x-2",children:[T&&d.jsx("button",{onClick:v,disabled:!u||m,className:`text-xs px-3 py-1 border transition-colors ${m?"bg-green-700 border-green-500 text-green-100":u?"bg-yellow-800 hover:bg-yellow-700 text-yellow-100 border-yellow-600":"bg-gray-800 text-gray-500 border-gray-600 cursor-not-allowed"}`,children:m?"Accepted!":"Accept Contract"}),N&&r&&d.jsx("button",{onClick:A,disabled:y,className:`text-xs px-3 py-1 border transition-colors ${y?"bg-blue-700 border-blue-500 text-blue-100":"bg-teal-800 hover:bg-teal-700 text-teal-100 border-teal-600"}`,children:y?"Fulfilling...":"Fulfill Contract"})]})]})]})}function ph(){const{contractState:f,contractGenerator:i,gameTime:l,selectedFacilityId:r,acceptCustomerContract:o,fulfillContract:u,refreshContracts:m}=Ee(),[p]=pe.useState([{id:"contract-1",customerId:"customer-1",title:"Rebel Coalition Weapon Order",description:"Resistance forces require reliable equipment. Any functional condition acceptable.",requirements:[{productId:"basic_sidearm",quantity:25,minimumQuality:30,maxAcceptableDefects:2}],totalPayment:3750,deadlineHours:168,rushOrder:!1,allowPartialFulfillment:!0,minimumFulfillmentPercent:80,penaltyRate:.05,bonusRate:.02,status:"available"},{id:"contract-2",customerId:"customer-2",title:"Corporate Security Premium Contract",description:"Official corporate procurement contract. High quality standards required.",requirements:[{productId:"basic_sidearm",quantity:50,minimumQuality:80,maxAcceptableDefects:1}],totalPayment:11250,deadlineHours:336,rushOrder:!1,allowPartialFulfillment:!0,minimumFulfillmentPercent:90,penaltyRate:.03,bonusRate:.05,status:"available"},{id:"contract-3",customerId:"customer-3",title:"Emergency Military Procurement",description:"Urgent military procurement for active operations. Military specification quality mandatory.",requirements:[{productId:"tactical_knife",quantity:15,minimumQuality:90,maxAcceptableDefects:0}],totalPayment:1950,deadlineHours:72,rushOrder:!0,allowPartialFulfillment:!1,minimumFulfillmentPercent:100,penaltyRate:.1,bonusRate:.15,status:"available"}]),[y]=pe.useState([{id:"customer-1",name:"Free Coalition",type:"rebel",reputation:65,paymentReliability:75,qualityStandards:"low",preferredProducts:["basic_sidearm","tactical_knife"]},{id:"customer-2",name:"Titan Corporation",type:"corporate",reputation:85,paymentReliability:95,qualityStandards:"high",preferredProducts:["basic_sidearm"]},{id:"customer-3",name:"Vega Military Command",type:"military",reputation:95,paymentReliability:100,qualityStandards:"military",preferredProducts:["basic_sidearm","tactical_knife"]}]),h=N=>{o(N)},v=N=>{r&&u(N,r)},A=f.availableCustomerContracts,T=f.activeCustomerContracts;return d.jsxs("div",{className:"space-y-6 font-mono text-sm",children:[d.jsxs("div",{className:"terminal-header",children:[d.jsx("span",{className:"ascii-accent",children:"◈"})," CUSTOMER CONTRACTS"]}),d.jsx("div",{className:"terminal-card border-green-600",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-green-400 font-mono text-lg mb-2",children:"⚡ CONTRACTS V1 ACTIVE"}),d.jsx("div",{className:"text-gray-400 text-sm",children:"Customer contract system online. Accept contracts and fulfill with manufactured products."})]})}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[d.jsx("div",{className:"text-gray-400 text-xs",children:"Available"}),d.jsx("div",{className:"font-mono text-yellow-400 text-lg",children:A.length})]}),d.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[d.jsx("div",{className:"text-gray-400 text-xs",children:"Active"}),d.jsx("div",{className:"font-mono text-green-400 text-lg",children:T.length})]}),d.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[d.jsx("div",{className:"text-gray-400 text-xs",children:"Completed Today"}),d.jsx("div",{className:"font-mono text-blue-400 text-lg",children:f.completedContracts.length})]})]}),T.length>0&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-gray-400 font-bold mb-3",children:"ACTIVE CONTRACTS"}),d.jsx("div",{className:"space-y-3",children:T.map(N=>{const I=i.getCustomer(N.customerId);return d.jsx(hf,{contract:N,customer:I,onAccept:h,onFulfill:v,currentTime:l.totalGameHours,canAccept:!0},N.id)})})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-3",children:[d.jsx("h3",{className:"text-gray-400 font-bold",children:"AVAILABLE CONTRACTS"}),d.jsx("button",{onClick:m,className:"text-xs bg-gray-700 hover:bg-gray-600 text-gray-300 px-2 py-1 border border-gray-600",children:"Refresh Contracts"})]}),A.length===0?d.jsx("div",{className:"terminal-card border-gray-600",children:d.jsx("div",{className:"text-center text-gray-500",children:"No contracts currently available. Check back later or refresh."})}):d.jsx("div",{className:"space-y-3",children:A.map(N=>{const I=i.getCustomer(N.customerId);return d.jsx(hf,{contract:N,customer:I,onAccept:h,currentTime:l.totalGameHours,canAccept:!0},N.id)})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx("button",{onClick:m,className:"btn-secondary",children:"Scout New Customers"}),d.jsx("button",{className:"btn-secondary opacity-50 cursor-not-allowed",disabled:!0,children:"Negotiate Terms"})]}),d.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Contract Time: ",Bi(l)]})]})}function ki(f){return f.split("_").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ")}function Cf(f){switch(f){case"salvage":return"text-orange-400";case"standard":return"text-teal-400";case"premium":return"text-blue-400";case"military":return"text-purple-400";default:return"text-gray-400"}}function gh({lot:f,supplier:i,onPurchase:l,canAfford:r,currentTime:o}){const[u,m]=pe.useState(!1),p=()=>{m(!0),l(f.id),setTimeout(()=>m(!1),500)},y=f.expiresAt-o,h=y<12;return d.jsxs("div",{className:`terminal-card border-gray-600 ${h?"border-yellow-600":""}`,children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-teal-400 font-medium",children:ki(f.materialId)}),d.jsx("p",{className:"text-gray-400 text-sm",children:(i==null?void 0:i.name)||"Unknown Supplier"}),d.jsxs("p",{className:"text-gray-500 text-xs",children:[d.jsx("span",{className:Cf(f.qualityGrade),children:f.qualityGrade.toUpperCase()})," • ",f.quantity," units available"]})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-gray-400 text-xs",children:i&&d.jsxs("div",{children:["Rep: ",i.reputation,"% • Rel: ",i.reliability,"%"]})}),h&&d.jsx("div",{className:"text-yellow-400 text-xs font-bold",children:"EXPIRES SOON"})]})]}),f.description&&d.jsx("p",{className:"text-gray-500 text-xs mb-3 italic",children:f.description}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm mb-3",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400",children:"Price:"}),d.jsxs("div",{className:"font-mono text-white",children:[f.pricePerUnit,"cr/unit"]}),d.jsxs("div",{className:"font-mono text-teal-400 font-bold",children:[f.totalPrice,"cr total"]})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400",children:"Delivery:"}),d.jsxs("div",{className:"font-mono text-white",children:[Math.ceil(f.deliveryTimeHours)," hours"]}),d.jsx("div",{className:"text-gray-500 text-xs",children:"Est. arrival"})]})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{className:"text-xs text-gray-500",children:["Expires in ",Math.max(0,Math.ceil(y)),"h"]}),d.jsx("button",{onClick:p,disabled:!r||u,className:`text-xs px-3 py-1 border transition-colors ${u?"bg-green-700 border-green-500 text-green-100":r?"bg-teal-800 hover:bg-teal-700 text-teal-100 border-teal-600":"bg-gray-800 text-gray-500 border-gray-600 cursor-not-allowed"}`,children:u?"Ordered!":r?"Purchase":"Insufficient Credits"})]})]})}function yh({order:f,supplier:i,currentTime:l}){const r=l>=f.deliveryAt,o=Math.max(0,f.deliveryAt-l);return d.jsxs("div",{className:`terminal-card ${r?"border-green-600":"border-blue-600"}`,children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-white font-medium",children:ki(f.materialId)}),d.jsx("p",{className:"text-gray-400 text-sm",children:(i==null?void 0:i.name)||"Unknown Supplier"})]}),d.jsx("div",{className:"text-right",children:d.jsx("div",{className:`text-xs px-2 py-1 rounded ${r?"bg-green-800 text-green-200":"bg-blue-800 text-blue-200"}`,children:r?"DELIVERED":"IN TRANSIT"})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400",children:"Quantity:"}),d.jsxs("div",{className:"font-mono text-white",children:[f.quantity," units"]})]}),d.jsxs("div",{children:[d.jsxs("span",{className:"text-gray-400",children:[r?"Delivered:":"ETA:",":"]}),d.jsx("div",{className:"font-mono text-white",children:r?"Complete":`${Math.ceil(o)}h`})]})]}),d.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Total paid: ",f.totalPaid,"cr"]})]})}function hh({listing:f,onRemove:i,currentTime:l}){const[r,o]=pe.useState(!1),u=()=>{o(!0),i(f.id),setTimeout(()=>o(!1),500)},m=f.soldQuantity/f.quantity*100,p=f.quantity-f.soldQuantity,y=f.expiresAt-l,h=y<=0,v=()=>f.status==="sold"?"border-green-600":f.status==="partially_sold"?"border-blue-600":f.status==="expired"?"border-red-600":h?"border-orange-600":"border-teal-600",A=()=>f.status==="sold"?"SOLD OUT":f.status==="expired"||h?"EXPIRED":f.soldQuantity>0?"SELLING":"LISTED";return d.jsxs("div",{className:`terminal-card ${v()}`,children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-teal-400 font-medium",children:ki(f.productId)}),d.jsx("p",{className:"text-gray-400 text-sm",children:"Your Listing"}),d.jsxs("p",{className:"text-gray-500 text-xs",children:[d.jsx("span",{className:Cf(f.qualityGrade),children:f.qualityGrade.toUpperCase()})," • ","Listed ",Math.floor(l-f.listedAt),"h ago"]})]}),d.jsx("div",{className:"text-right",children:d.jsx("div",{className:`text-xs px-2 py-1 rounded ${f.status==="sold"?"bg-green-800 text-green-200":f.status==="partially_sold"?"bg-blue-800 text-blue-200":"bg-teal-800 text-teal-200"}`,children:A()})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm mb-3",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400",children:"Progress:"}),d.jsxs("div",{className:"font-mono text-white",children:[f.soldQuantity,"/",f.quantity," sold"]}),d.jsxs("div",{className:"text-gray-500 text-xs",children:[m.toFixed(0),"% complete"]})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400",children:"Revenue:"}),d.jsxs("div",{className:"font-mono text-white",children:[f.pricePerUnit,"cr/unit"]}),d.jsxs("div",{className:"font-mono text-teal-400",children:[(f.soldQuantity*f.pricePerUnit).toLocaleString(),"cr earned"]})]})]}),f.soldQuantity>0&&d.jsx("div",{className:"mb-3",children:d.jsxs("div",{className:"text-teal-400 text-xs",children:["█".repeat(Math.floor(m/10)),"░".repeat(10-Math.floor(m/10))]})}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("div",{className:"text-xs text-gray-500",children:h?"Expired":`Expires in ${Math.max(0,Math.ceil(y))}h`}),(f.status==="active"||f.status==="partially_sold")&&p>0&&d.jsx("button",{onClick:u,disabled:r,className:`text-xs px-3 py-1 border transition-colors ${r?"bg-red-700 border-red-500 text-red-100":"bg-red-800 hover:bg-red-700 text-red-100 border-red-600"}`,children:r?"Removing...":"Remove Listing"})]})]})}function bh({facility:f}){const[i,l]=pe.useState(""),[r,o]=pe.useState(1),[u,m]=pe.useState(100),[p,y]=pe.useState(!1),{listProductForSale:h}=Ee(),v=f.inventory?Array.from(f.inventory.groups.values()).flatMap(N=>N.slots).filter(N=>["basic_sidearm","tactical_knife"].includes(N.baseItemId)).filter(N=>N.available>0).map(N=>{const I=N.stack.uniqueTags,H=N.stack.averageQuality,B=H>=90?"pristine":H>=75?"functional":H>=50?"standard":"junk",P=I.join(", ");return{key:`${N.baseItemId}_${B}_${I.join("_")}`,productId:N.baseItemId,quality:B,tags:P,quantity:N.available,averageQuality:H}}):Object.keys(f.current_storage).filter(N=>N.includes("_")&&f.current_storage[N]>0).map(N=>{const[I,H]=N.split("_");return{key:N,productId:I,quality:H,tags:"",quantity:f.current_storage[N],averageQuality:0}}).filter(N=>["basic_sidearm","tactical_knife"].includes(N.productId)),A=()=>{if(!i||r<=0||u<=0)return;const N=v.find(I=>I.key===i);N&&(y(!0),h(f.id,N.productId,r,u),l(""),o(1),m(100),setTimeout(()=>y(!1),500))},T=v.find(N=>N.key===i);return d.jsxs("div",{className:"terminal-card border-gray-600",children:[d.jsx("h3",{className:"text-gray-400 font-bold mb-3",children:"LIST PRODUCTS FOR SALE"}),v.length===0?d.jsxs("div",{className:"text-center text-gray-500 py-4",children:[d.jsx("div",{children:"No manufactured products available to sell."}),d.jsx("div",{className:"text-xs mt-2",children:"Complete manufacturing jobs to create products, then return here to list them for sale."}),f.inventory&&d.jsxs("div",{className:"text-xs mt-1 text-gray-400",children:["Inventory system: ",f.inventory.totalItems," total items stored"]})]}):d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Select Product:"}),d.jsxs("select",{value:i,onChange:N=>l(N.target.value),className:"w-full bg-gray-800 border border-gray-600 text-gray-300 text-xs p-2 focus:border-teal-400 focus:outline-none",children:[d.jsx("option",{value:"",children:"-- Choose Product --"}),v.map(N=>d.jsxs("option",{value:N.key,children:[ki(N.productId)," (",N.quality,")",N.tags&&` [${N.tags}]`," - ",N.quantity," available"]},N.key))]})]}),T&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Quantity:"}),d.jsx("input",{type:"number",min:"1",max:T.quantity,value:r,onChange:N=>o(Math.max(1,Math.min(T.quantity,parseInt(N.target.value)||1))),className:"w-full bg-gray-800 border border-gray-600 text-gray-300 text-xs p-2 focus:border-teal-400 focus:outline-none"})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Price per Unit (cr):"}),d.jsx("input",{type:"number",min:"1",value:u,onChange:N=>m(Math.max(1,parseInt(N.target.value)||1)),className:"w-full bg-gray-800 border border-gray-600 text-gray-300 text-xs p-2 focus:border-teal-400 focus:outline-none"})]}),d.jsxs("div",{className:"bg-gray-800 p-2 rounded",children:[d.jsx("div",{className:"text-xs text-gray-400",children:"Listing Summary:"}),d.jsxs("div",{className:"text-sm text-white",children:[r,"x ",ki(T.productId)," (",T.quality,")",T.tags&&` [${T.tags}]`]}),d.jsxs("div",{className:"text-sm text-teal-400 font-mono",children:["Total Value: ",(r*u).toLocaleString(),"cr"]})]}),d.jsx("button",{onClick:A,disabled:p,className:`w-full px-3 py-2 text-sm border transition-colors ${p?"bg-green-700 border-green-500 text-green-100":"bg-teal-800 hover:bg-teal-700 text-teal-100 border-teal-600"}`,children:p?"Listed!":"List for Sale"})]})]})]})}function vh(){const{marketState:f,marketGenerator:i,credits:l,gameTime:r,selectedFacilityId:o,facilities:u,purchaseMarketLot:m,removePlayerListing:p,refreshMarketLots:y}=Ee(),h=H=>{o&&m(H,o)},v=H=>{p(H)},A=f.availableLots,T=f.activePurchaseOrders,N=f.playerListings,I=u.find(H=>H.id===o);return d.jsxs("div",{className:"space-y-6 font-mono text-sm",children:[d.jsxs("div",{className:"terminal-header",children:[d.jsx("span",{className:"ascii-accent",children:"◊"})," MATERIAL MARKET"]}),d.jsx("div",{className:"terminal-card border-blue-600",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-blue-400 font-mono text-lg mb-2",children:"⚡ MARKET V1 ACTIVE"}),d.jsx("div",{className:"text-gray-400 text-sm",children:"Open market for material purchasing. Dynamic lot generation and contract system coming online."})]})}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[d.jsx("div",{className:"text-gray-400 text-xs",children:"Available Lots"}),d.jsx("div",{className:"font-mono text-teal-400 text-lg",children:A.length})]}),d.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[d.jsx("div",{className:"text-gray-400 text-xs",children:"Active Orders"}),d.jsx("div",{className:"font-mono text-blue-400 text-lg",children:T.length})]}),d.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[d.jsx("div",{className:"text-gray-400 text-xs",children:"Credits Available"}),d.jsxs("div",{className:"font-mono text-yellow-400 text-lg",children:[l.toLocaleString(),"cr"]})]})]}),T.length>0&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-gray-400 font-bold mb-3",children:"ACTIVE ORDERS"}),d.jsx("div",{className:"space-y-3",children:T.map(H=>{const B=i.getSupplier(H.supplierId);return d.jsx(yh,{order:H,supplier:B,currentTime:r.totalGameHours},H.id)})})]}),N.length>0&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-gray-400 font-bold mb-3",children:"YOUR PRODUCT LISTINGS"}),d.jsx("div",{className:"space-y-3",children:N.map(H=>d.jsx(hh,{listing:H,onRemove:v,currentTime:r.totalGameHours},H.id))})]}),I?d.jsx(bh,{facility:I}):d.jsxs("div",{className:"terminal-card border-yellow-600",children:[d.jsx("h3",{className:"text-gray-400 font-bold mb-3",children:"LIST PRODUCTS FOR SALE"}),d.jsx("div",{className:"text-center text-yellow-400 py-4",children:"No facility selected. Please select a facility to list products for sale."})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-3",children:[d.jsx("h3",{className:"text-gray-400 font-bold",children:"AVAILABLE LOTS"}),d.jsx("button",{onClick:y,className:"text-xs bg-gray-700 hover:bg-gray-600 text-gray-300 px-2 py-1 border border-gray-600",children:"Refresh Market"})]}),A.length===0?d.jsx("div",{className:"terminal-card border-gray-600",children:d.jsx("div",{className:"text-center text-gray-500",children:"No lots currently available. Check back later or refresh the market."})}):d.jsx("div",{className:"space-y-3",children:A.map(H=>{const B=i.getSupplier(H.supplierId),P=l>=H.totalPrice;return d.jsx(gh,{lot:H,supplier:B,onPurchase:h,canAfford:P,currentTime:r.totalGameHours},H.id)})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx("button",{onClick:y,className:"btn-secondary",children:"Scout New Suppliers"}),d.jsx("button",{className:"btn-secondary opacity-50 cursor-not-allowed",disabled:!0,children:"Request Custom Lot"})]}),d.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Market Time: ",Bi(r)]})]})}function xh(){const{selectedFacilityId:f,facilities:i,equipmentDatabase:l,credits:r,purchaseEquipment:o}=Ee(),u=i.find(m=>m.id===f);return u?d.jsxs("div",{className:"font-mono text-teal-400 p-4",children:[d.jsx("div",{className:"terminal-card border-green-600 mb-4",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-green-400 font-mono text-lg mb-2",children:"✓ EQUIPMENT V1 COMPLETE"}),d.jsx("div",{className:"text-gray-400 text-sm",children:"Equipment database with 15+ equipment types and starter sets fully functional."})]})}),d.jsx("pre",{className:"whitespace-pre",children:`╔════════════════════════════════════════════════════════════════════╗
║ EQUIPMENT MANAGEMENT - ${u.name.padEnd(44)} ║
╠════════════════════════════════════════════════════════════════════╣
║ Space: ${u.used_floor_space}/${u.floor_space}m² used │ Credits: $${r.toLocaleString().padEnd(35)} ║
╚════════════════════════════════════════════════════════════════════╝`}),d.jsxs("div",{className:"mt-4",children:[d.jsx("h3",{className:"text-gray-400 mb-2",children:"INSTALLED EQUIPMENT:"}),u.equipment.length===0?d.jsx("div",{className:"text-gray-500",children:"No equipment installed"}):d.jsx("div",{className:"space-y-2",children:u.equipment.map(m=>{const p=l.get(m.equipmentId);return p?d.jsxs("div",{className:"border border-gray-700 p-2",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-teal-300",children:p.name}),d.jsxs("span",{className:"text-gray-400",children:[m.condition,"%"]})]}),d.jsxs("div",{className:"text-xs text-gray-500",children:["Space: ",p.footprint,"m² | Daily cost: $",p.dailyOperatingCost]})]},m.id):null})})]}),d.jsxs("div",{className:"mt-4",children:[d.jsx("h3",{className:"text-gray-400 mb-2",children:"AVAILABLE EQUIPMENT:"}),d.jsx("div",{className:"space-y-2",children:Array.from(l.values()).filter(m=>{const p=m.footprint<=u.floor_space-u.used_floor_space,y=m.purchaseCost+m.installationCost<=r;return p&&y}).slice(0,8).map(m=>d.jsx("div",{className:"border border-gray-800 p-2",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-teal-300",children:m.name}),d.jsxs("div",{className:"text-xs text-gray-400",children:["$",m.purchaseCost.toLocaleString()," | ",m.footprint,"m² | $",m.dailyOperatingCost,"/day"]})]}),d.jsx("button",{onClick:()=>o(u.id,m.id),className:"text-green-400 hover:text-green-300 border border-green-400 px-2 py-1 text-xs",children:"BUY"})]})},m.id))})]})]}):d.jsx("div",{className:"font-mono text-teal-400 p-4",children:d.jsx("pre",{children:"No facility selected"})})}function Ah(){const f=Ee(u=>u.activeTab),i=Ee(u=>u.facilities),l=Ee(u=>u.startMachineJob),r=(u,m)=>{const p=i[0];if(!p){console.error("No facility available for job creation");return}console.log("Creating job from plan:",u.name,"with",u.requiredOperations.length,"operations");const y=os.convertPlanToMethod(u);console.log("Converted to method:",y.name,"with ID:",y.id),l(p.id,u.targetProduct,y.id,u.targetQuantity,m,!1,y),console.log("Job started successfully")},o=()=>{switch(f){case"research":return d.jsx(Wy,{});case"manufacturing":return d.jsx(ih,{});case"catalog":return d.jsx(sh,{facility:i[0],onJobStart:r});case"equipment":return d.jsx(xh,{});case"market":return d.jsx(vh,{});case"contracts":return d.jsx(ph,{});default:return d.jsx("div",{children:"Unknown tab"})}};return d.jsx("div",{className:"h-full overflow-y-auto",children:o()})}function Sh(){const f=Ee(p=>p.selectedFacilityId),i=Ee(p=>p.facilities),[l,r]=pe.useState(new Set),o=i.find(p=>p.id===f),u=o?Object.entries(o.current_storage):[],m=p=>{const y=new Set(l);y.has(p)?y.delete(p):y.add(p),r(y)};return d.jsxs("div",{className:"space-y-6",children:[(o==null?void 0:o.inventory)&&d.jsxs("div",{className:"terminal-card",children:[d.jsxs("div",{className:"terminal-header",children:[d.jsx("span",{className:"ascii-accent",children:"▼"})," INVENTORY (",o.name,")"]}),d.jsx("div",{className:"space-y-2",children:o.inventory.groups instanceof Map?Array.from(o.inventory.groups.values()).map(p=>{const y=l.has(p.category),h=p.slots.reduce((v,A)=>v+A.stack.totalQuantity,0);return d.jsxs("div",{className:"border border-gray-700",children:[d.jsx("div",{className:"flex justify-between items-center p-2 cursor-pointer hover:bg-gray-800",onClick:()=>m(p.category),children:d.jsxs("span",{className:"text-gray-300 text-sm",children:[y?"▼":"►"," ",p.category," (",h," items)"]})}),y&&d.jsx("div",{className:"px-3 pb-2 space-y-1",children:p.slots.map(v=>{const A=$i[v.baseItemId];return A?d.jsxs("div",{className:"ml-2",children:[d.jsxs("div",{className:"text-gray-400 text-xs font-semibold",children:[A.name," (",v.stack.totalQuantity," total)"]}),(()=>{const T=new Map;return v.stack.instances.forEach(N=>{const I=Wm(N),H=Fm(N.quality),B=`${I}_${H}`;T.has(B)||T.set(B,{instances:[],totalQuantity:0});const P=T.get(B);P.instances.push(N),P.totalQuantity+=N.quantity}),Array.from(T.entries()).map(([N,I])=>{const H=I.instances[0];return d.jsxs("div",{className:"ml-3 text-xs text-gray-500",children:["• ",Wm(H)," x",I.totalQuantity,d.jsxs("span",{className:"text-gray-600 ml-1",children:["(",Fm(H.quality),")"]})]},N)})})()]},v.baseItemId):null})})]},p.category)}):d.jsxs("div",{className:"text-red-400 text-xs",children:["Inventory Error: groups is not a Map",d.jsxs("div",{className:"text-xs mt-1 text-gray-500",children:["Type: ",typeof o.inventory.groups,", Value: ",String(o.inventory.groups)||"undefined"]})]})})]}),o&&!o.inventory&&d.jsxs("div",{className:"terminal-card",children:[d.jsxs("div",{className:"terminal-header",children:[d.jsx("span",{className:"ascii-accent",children:"◇"})," MATERIALS - LEGACY (",o.name,")"]}),d.jsxs("div",{className:"space-y-3",children:[u.map(([p,y])=>d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-gray-400 text-sm",children:p}),d.jsx("span",{className:"font-mono text-teal-400",children:y.toLocaleString()})]},p)),u.length===0&&d.jsx("div",{className:"text-gray-500 text-sm",children:"No materials in storage"})]})]}),d.jsxs("div",{className:"terminal-card",children:[d.jsxs("div",{className:"terminal-header",children:[d.jsx("span",{className:"ascii-accent",children:"◇"})," STARMAP: SECTOR 3C"]}),d.jsx("div",{className:"bg-gray-800 rounded p-4 mb-4",children:d.jsxs("div",{className:"grid grid-cols-6 gap-1 font-mono text-center text-sm",children:[d.jsx("span",{className:"text-gray-600",children:"·"}),d.jsx("span",{className:"text-gray-600",children:"·"}),d.jsx("span",{className:"status-danger",children:"X"}),d.jsx("span",{className:"text-gray-600",children:"·"}),d.jsx("span",{className:"status-warning",children:"P"}),d.jsx("span",{className:"text-gray-600",children:"·"}),d.jsx("span",{className:"status-info",children:"S"}),d.jsx("span",{className:"text-gray-600",children:"·"}),d.jsx("span",{className:"text-gray-600",children:"·"}),d.jsx("span",{className:"text-yellow-400",children:"!"}),d.jsx("span",{className:"text-gray-600",children:"·"}),d.jsx("span",{className:"text-gray-600",children:"·"}),d.jsx("span",{className:"text-gray-600",children:"·"}),d.jsx("span",{className:"text-gray-600",children:"·"}),d.jsx("span",{className:"text-gray-600",children:"·"}),d.jsx("span",{className:"text-gray-600",children:"·"}),d.jsx("span",{className:"text-gray-600",children:"·"}),d.jsx("span",{className:"status-danger",children:"X"})]})}),d.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[d.jsxs("div",{children:[d.jsx("span",{className:"status-danger",children:"X"})," Conflict"]}),d.jsxs("div",{children:[d.jsx("span",{className:"status-warning",children:"P"})," Pirates"]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-yellow-400",children:"!"})," Disruption"]}),d.jsxs("div",{children:[d.jsx("span",{className:"status-info",children:"S"})," Scout"]})]})]})]})}function Mh(){const f=Ee(m=>m.gameTime),i=Ee(m=>m.credits),l=Ee(m=>m.updateGameTime),r=Ee(m=>m.togglePause),o=Ee(m=>m.setGameSpeed),u=Ee(m=>m.updateProduction);return pe.useEffect(()=>{const m=Math.max(100,1e3/f.gameSpeed),p=setInterval(()=>{f.isPaused||(l(m),u())},m);return()=>clearInterval(p)},[l,u,f.isPaused,f.gameSpeed]),d.jsxs("div",{className:"min-h-screen bg-gray-950 p-4",children:[d.jsx("header",{className:"terminal-card mb-6",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("span",{className:"ascii-accent text-lg",children:"▲"}),d.jsx("h1",{className:"text-xl font-bold text-white",children:"DEFENSE MAGNATE"}),d.jsx("span",{className:"ascii-accent text-lg",children:"▼"})]}),d.jsxs("div",{className:"flex items-center space-x-6",children:[d.jsxs("div",{className:"text-sm",children:[d.jsx("span",{className:"text-gray-400",children:"TIME:"}),d.jsx("span",{className:"text-teal-400 font-mono ml-2",children:Bi(f)})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{className:"text-gray-400 text-sm",children:"SPEED:"}),d.jsx("span",{className:`font-mono text-sm ${f.isPaused?"text-orange-400":"text-teal-400"}`,children:$y(f.isPaused?0:f.gameSpeed)}),d.jsx("div",{className:"flex space-x-1 ml-2",children:[1,2,5,10].map(m=>d.jsxs("button",{onClick:()=>o(m),className:`px-2 py-1 text-xs font-mono rounded transition-colors border ${f.gameSpeed===m?"bg-teal-600 border-teal-500 text-white":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600"}`,children:[m,"x"]},m))})]}),d.jsxs("div",{className:"text-sm",children:[d.jsx("span",{className:"text-gray-400",children:"CREDITS:"}),d.jsxs("span",{className:"status-good font-mono ml-2",children:[i.toLocaleString(),"cr"]})]})]})]})}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6",children:[d.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[d.jsx("div",{className:"terminal-card",children:d.jsx(Zy,{})}),d.jsx("div",{className:"terminal-card min-h-96",children:d.jsx(Ah,{})})]}),d.jsx("div",{className:"lg:col-span-1",children:d.jsx(Sh,{})})]}),d.jsx("div",{className:"terminal-card",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"ascii-accent text-sm",children:`> STATUS: ${f.isPaused?"PAUSED":"OPERATIONAL"}`}),d.jsx("div",{className:"flex space-x-3",children:d.jsx("button",{onClick:r,className:`px-4 py-2 font-mono rounded transition-colors ${f.isPaused?"bg-green-600 hover:bg-green-500 text-white":"bg-orange-600 hover:bg-orange-500 text-white"}`,children:f.isPaused?"▶ RESUME":"⏸ PAUSE"})})]})})]})}cy.createRoot(document.getElementById("root")).render(d.jsx(pe.StrictMode,{children:d.jsx(Mh,{})}));
